(function(){var a=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"accessoryLayout");a.prototype.render=function(b,c){try{var d=document.createElement("div"),e=document.createElement("div");e.setAttribute("id",c+"_content");e.className="amx-accessoryLayout_content "+this._ensureValidString(b.getAttribute("contentClass"),"");e.setAttribute("style",this._ensureValidString(b.getAttribute("contentStyle"),""));d.appendChild(e);for(var g=b.getRenderedChildren(),h=0,k=g.length;h<
k;++h){var m=g[h].render();null!=m&&e.appendChild(m)}for(var n=e=0,t=null,u=null,v=!1,w=!1,x=null,g=b.getRenderedChildren("start"),h=0,k=g.length;h<k;++h)if(m=g[h].render(),null!=m){if(null==x){var v=!0,t=this._ensureValidString(b.getAttribute("startFullTriggerSelector"),""),y=document.createElement("div");y.setAttribute("id",c+"_start");y.className="amx-accessoryLayout_start "+this._ensureValidString(b.getAttribute("startClass"),"");y.setAttribute("style",this._ensureValidString(b.getAttribute("startStyle"),
""));x=document.createElement("div");x.setAttribute("id",c+"_startWrap");x.className="amx-accessoryLayout_startWrap";y.appendChild(x);var e=this._ensureValidWidth(b.getAttribute("startWidth")),z=this._ensureValidString(b.getAttribute("startDesc"),"");d.appendChild(y);d.appendChild(a._createToggleLink(z,c,"start",e))}x.appendChild(m)}y=null;g=b.getRenderedChildren("end");h=0;for(k=g.length;h<k;++h)if(m=g[h].render(),null!=m){if(null==y){var w=!0,u=this._ensureValidString(b.getAttribute("endFullTriggerSelector"),
""),A=document.createElement("div");A.setAttribute("id",c+"_end");A.className="amx-accessoryLayout_end "+this._ensureValidString(b.getAttribute("endClass"),"");A.setAttribute("style",this._ensureValidString(b.getAttribute("endStyle"),""));y=document.createElement("div");y.setAttribute("id",c+"_endWrap");y.className="amx-accessoryLayout_endWrap";A.appendChild(y);var n=this._ensureValidWidth(b.getAttribute("endWidth")),B=this._ensureValidString(b.getAttribute("endDesc"),"");d.appendChild(A);d.appendChild(a._createToggleLink(B,
c,"end",n))}y.appendChild(m)}(v||w)&&adf.mf.api.amx.addDragListener(d,{start:a._handleDragStart,drag:a._handleDrag,end:a._handleDragEnd,threshold:5},{id:c,startWidth:e,endWidth:n,hasStart:v,hasEnd:w,startFullTriggerSelector:t,endFullTriggerSelector:u,dragState:"closed"});return d}catch(D){console.error(D)}};a._createToggleLink=function(b,c,d,e){var g=document.createElement("a");g.setAttribute("id",c+"_"+d+"Toggle");g.className="amx-accessoryLayout_toggle-"+d;g.setAttribute("tabindex",0);adf.mf.api.amx.addBubbleEventListener(g,
"click",function(a){a.stopPropagation();a.preventDefault()});g.setAttribute("href","#");adf.mf.api.amx.addBubbleEventListener(g,"click",a._handleToggle,{id:c,facetName:d,facetWidth:e});g.textContent=b;return g};a._handleToggle=function(b){b.preventDefault();b.stopPropagation();var c=b.data.id,d=b.data.facetName;b=b.data.facetWidth;document.getElementById(c+"_"+d+"Toggle").focus();var e=document.getElementById(c+"_content");e.parentNode.classList.add("amx-active");var g=null,h=null,k=null;"start"==
d?(g=document.getElementById(c+"_start"),g.style.display="block",k=g):(h=document.getElementById(c+"_end"),h.style.display="block",k=h);b=a._getFacetWidth(e,k,b);"start"!=d&&(b=-b);d=a._cleanupId!=c;a._resetAccessoryLayouts();d&&(a._setFinalStates(g,h,e,b,!0),a._startCleanupInterval(c,!1))};a.prototype._ensureValidString=function(a,c){return null==a?c:a};a.prototype._ensureValidWidth=function(a){if(null==a||"auto"==a)return 0;if("100%"==a)return-1;a=parseInt(a,10);return isNaN(a)||0>a?0:a};a._handleDragStart=
function(b,c){a._resetAccessoryLayouts()};a._handleDrag=function(b,c){if(adf.mf.api.amx.acceptEvent()){var d=Math.abs(c.originalAngle);if((30>=d||150<=d)&&c.requestDragLock(this,!0,!1)){b.preventDefault();b.stopPropagation();c.preventDefault=!0;c.stopPropagation=!0;var d=b.data,e=d.startPageX;if(null==e)d.startPageX=c.pageX;else{var e=c.pageX-e,g=d.id,h=d.dragDirectionIsStart,k=d.contentElement,m=d.startElement,n=d.endElement,t="rtl"==document.documentElement.dir;if(null==h)0!=e&&(h=t?0>e:0<e,!h||
d.hasStart)&&(h||d.hasEnd)&&(d.dragDirectionIsStart=h,k=document.getElementById(g+"_content"),d.contentElement=k,m=document.getElementById(g+"_start"),d.startElement=m,n=document.getElementById(g+"_end"),d.endElement=n);else{g=d.contentWidth;null==g&&(g=k.offsetWidth,d.contentWidth=g);k.parentNode.classList.add("amx-active");var u=!h;t&&(u=h);var v=0,v=u?-e:e;h?(e=t?Math.min(0,e):Math.max(0,e),a._handleDirectionMovement(d,"startFullTriggerSelector","startWidth",m,g,k,v)):(e=t?Math.max(0,e):Math.min(0,
e),a._handleDirectionMovement(d,"endFullTriggerSelector","endWidth",n,g,k,v));adf.shared.impl.animationUtils._setTransformTranslate(k,e+"px,0px")}}}}else b.data.dragState="closed",a._concludeMovement(b,c)};a._handleDragEnd=function(b,c){a._concludeMovement(b,c)};a._getFacetWidth=function(a,c,d){if(0==d){a=c.childNodes;c=0;for(var e=a.length;c<e;++c)d+=a[c].offsetWidth}else-1==d&&(d=a.offsetWidth);return d};a._handleDirectionMovement=function(b,c,d,e,g,h,k){var m=!1;e.style.display="block";var n=b.facetWidth;
null==n&&(n=a._getFacetWidth(h,e,b[d]),b.facetWidth=n);c=b[c];""!=c&&(null==b.foundFullTriggerElement?(m=null!=e.querySelector(c),b.foundFullTriggerElement=m):m=b.foundFullTriggerElement);c=2*n;g/=2;g<c&&(c=Math.max(g,n+20));var t=h.parentNode;m&&k>c?(b.dragState="full",t.classList.contains("amx-full")||(t.classList.add("amx-full"),adf.shared.impl.animationUtils.addOneTimeTransitionEndWithFailsafe(e,function(){t.classList.remove("amx-gap")})),n=k):(b.dragState=k<n/2?"closed":"open",k>n?t.classList.add("amx-gap"):
t.classList.remove("amx-gap"),t.classList.remove("amx-full"),n=Math.min(n,k));e.style.width=Math.max(0,n)+"px"};a._concludeMovement=function(b,c){var d=b.data;if(d.startPageX){var e=!0===d.dragDirectionIsStart,g=d.contentWidth,h=d.facetWidth,k=d.contentElement,m=d.startElement,n=d.endElement;delete d.startPageX;delete d.contentElement;delete d.startElement;delete d.endElement;delete d.dragDirectionIsStart;delete d.contentWidth;delete d.facetWidth;delete d.foundFullTriggerElement;b.preventDefault();
b.stopPropagation();c.preventDefault=!0;c.stopPropagation=!0;null!=k&&(adf.shared.impl.animationUtils._setTransition(k,"all 200ms ease-out"),null!=m&&adf.shared.impl.animationUtils._setTransition(m,"all 200ms ease-out"),null!=n&&adf.shared.impl.animationUtils._setTransition(n,"all 200ms ease-out"),setTimeout(function(){if(null!=k)switch(d.dragState){case "open":a._setFinalStates(e?m:null,e?null:n,k,e?h:-h,!0);a._startCleanupInterval(d.id,!0);break;case "full":a._setFinalStates(e?m:null,e?null:n,k,
e?g:-g,!0);setTimeout(function(){var b=null,b=e?m.querySelector(d.startFullTriggerSelector):n.querySelector(d.endFullTriggerSelector);if(null!=b){var c=b.className;null!=c&&-1!=c.indexOf("amx-goLink")?adf.mf.api.amx.triggerBubbleEventListener(b,"click"):adf.mf.api.amx.triggerBubbleEventListener(b,"tap")}a._setFinalStates(m,n,k,0,!1)},500);break;default:a._setFinalStates(m,n,k,0,!0)}},1))}};a._setFinalStates=function(b,c,d,e,g){try{g&&adf.shared.impl.animationUtils.addOneTimeTransitionEndWithFailsafe(d,
function(){a._setFinalStatesPartB(b,c,d,e)}),null!=b&&(b.style.width=Math.abs(e)+"px"),null!=c&&(c.style.width=Math.abs(e)+"px"),"rtl"==document.documentElement.dir&&(e=-e),adf.shared.impl.animationUtils._setTransformTranslate(d,e+"px,0px"),g||a._setFinalStatesPartB(b,c,d,e)}catch(h){console.error(h)}};a._setFinalStatesPartB=function(a,c,d,e){adf.shared.impl.animationUtils._setTransition(d,"");null!=a&&adf.shared.impl.animationUtils._setTransition(a,"");null!=c&&adf.shared.impl.animationUtils._setTransition(c,
"");0==e&&(d.parentNode.classList.remove("amx-active","amx-gap","amx-full"),null!=a&&(a.style.display="none"),null!=c&&(c.style.display="none"))};a._resetAccessoryLayouts=function(){null!=a._intervalKey&&(window.clearInterval(a._intervalKey),a._handleCleanup(a._cleanupId))};a._startCleanupInterval=function(b,c){a._resetAccessoryLayouts();a._cleanupId=b;a._startedFromDragGesture=c;window.setTimeout(function(){var c=document.activeElement;a._intervalKey=window.setInterval(function(){if(a._startedFromDragGesture&&
c!=document.activeElement)a._handleCleanup();else{var e=document.getElementById(b);null!=e&&e.classList.contains("amx-active")||window.clearInterval(a._intervalKey)}},500)},1)};a._handleCleanup=function(){var b=a._cleanupId;window.clearInterval(a._intervalKey);a._intervalKey=null;a._cleanupId=null;var c=document.getElementById(b);if(null!=c&&c.classList.contains("amx-active")){var c=document.getElementById(b+"_content"),d=document.getElementById(b+"_start"),b=document.getElementById(b+"_end");a._setFinalStates(d,
b,c,0,!1)}}})();