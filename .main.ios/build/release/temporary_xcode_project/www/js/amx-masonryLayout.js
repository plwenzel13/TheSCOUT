(function(){function a(){return"rtl"==document.documentElement.dir}function b(a){for(a=a.target;null!=a&&!a.classList.contains("amx-masonryLayoutItem")&&!a.classList.contains("amx-masonryLayout");a=a.parentNode)if(a.classList.contains("amx-commandLink")||a.classList.contains("amx-commandButton"))return!0;return!1}function c(b,c){var d=b.tile,e=b.ghost;a()?(d.style.right=e.style.right,d.style.left=""):d.style.left=e.style.left;d.style.top=e.style.top;d.style.zIndex=0;d.classList.add("amx-masonryLayoutItem");
d.classList.remove("amx-masonryLayoutItem-dragging");d._dragging=!1;adf.mf.api.amx.removeDomNode(e);b.insertBefore?d!=b.insertBefore&&g(c,d,b.insertBefore):(d.parentNode==c&&c.removeChild(d),c.appendChild(d));b.clear();for(var d=adf.mf.api.amx.MasonryReorderEvent,e=[],h=c.childNodes,k=1,m=h.length;k<m;k++)void 0!==h[k]._originalIndex&&e.push(h[k]._originalIndex);d=new d(e);e=adf.mf.api.amx.AmxNode.getAmxNodeForElement(c);adf.mf.api.amx.processAmxEvent(e,"reorder",void 0,void 0,d)}function d(a){return a.classList.contains("amx-masonryLayoutItem-size-1x1")?
"amx-masonryLayoutItem-size-1x1":a.classList.contains("amx-masonryLayoutItem-size-1x2")?"amx-masonryLayoutItem-size-1x2":a.classList.contains("amx-masonryLayoutItem-size-1x3")?"amx-masonryLayoutItem-size-1x3":a.classList.contains("amx-masonryLayoutItem-size-2x1")?"amx-masonryLayoutItem-size-2x1":a.classList.contains("amx-masonryLayoutItem-size-2x2")?"amx-masonryLayoutItem-size-2x2":a.classList.contains("amx-masonryLayoutItem-size-2x3")?"amx-masonryLayoutItem-size-2x3":a.classList.contains("amx-masonryLayoutItem-size-3x1")?
"amx-masonryLayoutItem-size-3x1":a.classList.contains("amx-masonryLayoutItem-size-3x2")?"amx-masonryLayoutItem-size-3x2":"amx-masonryLayoutItem-size-1x1"}function e(){this.request=this.timeout=0;this.insertBefore=this.tile=this.ghost=null;this.startPageY=this.startPageX=this.startY=this.startX=0}function g(a,b,c){b!==c&&(a.removeChild(b),a.insertBefore(b,c))}function h(a){if("1x1"!=a){if("1x2"==a)return"amx-masonryLayoutItem-size-1x2";if("1x3"==a)return"amx-masonryLayoutItem-size-1x3";if("2x1"==a)return"amx-masonryLayoutItem-size-2x1";
if("2x2"==a)return"amx-masonryLayoutItem-size-2x2";if("2x3"==a)return"amx-masonryLayoutItem-size-2x3";if("3x1"==a)return"amx-masonryLayoutItem-size-3x1";if("3x2"==a)return"amx-masonryLayoutItem-size-3x2"}return"amx-masonryLayoutItem-size-1x1"}adf.mf.api.amx.MasonryReorderEvent=function(a){this.itemOrder=a;this[".type"]="oracle.adfmf.amx.event.MasonryReorderEvent"};var k=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"masonryLayout");k.prototype.Init=function(){k.superclass.Init.call(this)};
k.prototype.createChildrenNodes=function(a){return!1};k.prototype.visitChildren=function(a,b,c){return a.visitStampedChildren(null,null,null,b,c)};var m=null,m=amx.hasTouch()?{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}:{touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};k.prototype.render=function(b){var c=document.createElement("div");this.initMLC(b,c);for(var d=[],g=b.renderDescendants(),h=0;h<g.length;h++){var k=g[h];k&&(k._originalIndex=h,d.push(k))}this._applyOrder(b,
c,d);d={id:b.getId(),rtl:a(),dragContext:new e,amxNode:b};c.classList.contains("amx-masonryLayout-noDrag")||(this._addListener(c,"mousedown",this._createMouseDownCallback(),d),this._addListener(c,"mousemove",this._createMouseMoveCallback(),d),this._addListener(c,"mouseup",this._createMouseUpCallback(b),d));return c};k.prototype.postDisplay=function(a,b){a._mlCommon&&a._mlCommon.setup(!0)};k.prototype.getDescendentChangeAction=function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};k.prototype.updateChildren=
function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};k.prototype.refresh=function(a,b,c){var d=a.getId(),e=document.getElementById(d);if(e._locked)e._refresh=!0;else{e._locked=!0;for(var m={},n=[],A=e.childNodes,B=0;B<A.length;B++)A[B].id&&(m[A[B].id]=A[B]);var D=a.getRenderedChildren(),C=this._getInitialOrder(a,D.length),A=[],G=0,F=[];if(c&&c.getAffectedNodes()){var B=c.getAffectedNodes()[0],E=c.getChanges(B);B&&E&&E.getCollectionChange("value")&&(F=E.getCollectionChange("value").getUpdatedKeys())}E=
new adf.mf.api.amx.AmxNodeUpdateArguments;for(B=0;B<D.length;B++){var I=C?C[B]:B,K=D[I];-1<F.indexOf(I+"")&&E.setAffectedAttribute(K,"xx");var J=K.getId();if(m[J])(I=m[J])&&delete m[J],g(e,I,e.children[G]),G++,J=h(K.getAttribute("dimension")),I.classList.contains(J)||(I=e._mlCommon,d=K.getId().replace(/:/g,"\\:"),I.resizeTile("#"+d,J));else if(K=K.render())n.push(K),A.push(G)}0<F.length&&adf.mf.api.amx.markNodeForUpdate(E);D=[];for(d in m)B=m[d],D.push(B);I=e._mlCommon;0<D.length&&(I._arInfoletsToHide=
D,I._hidingInfolets=!0);if(0<n.length)for(I._arInfoletsToShow=n,I._showingInfolets=!0,B=0;B<n.length;B++)d=n[B],d.style.top="-1px",d.style.left="-1px",d.classList.add("amx-masonryLayoutItem-transition-show-from"),I.insertTileDomElem(d,A[B]);I._queueRelayout();k.superclass.refresh.call(this,a,b,c)}};k.prototype.destroy=function(a,b){var c=b.getAttribute("resizeListener");window.removeEventListener("resize",c)};k.prototype.initMLC=function(b,e){e.classList.add("amx-masonryLayout");e.className+=" "+
b.getAttribute("styleClass");var g=new window.adf.shared.impl.masonryLayout.MasonryLayoutCommon(e,a(),!1,{tiles:".amx-masonryLayoutItem.amx-masonryLayoutItem-size-1x1, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-1x2, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-1x3, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-2x1, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-2x2, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-2x3, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-3x1, .amx-masonryLayoutItem.amx-masonryLayoutItem-size-3x2"},
{transitionComponentResizeToStyleClass:"amx-masonryLayout-transition-resize-to",transitionComponentResizeToFastStyleClass:"amx-masonryLayout-transition-resize-to-fast",transitionMoveToStyleClass:"amx-masonryLayoutItem-transition-move-to",transitionMoveToFastStyleClass:"amx-masonryLayoutItem-transition-move-to-fast",transitionResizeToStyleClass:"amx-masonryLayoutItem-transition-resize-to",transitionHideFromStyleClass:"amx-masonryLayoutItem-transition-hide-from",transitionHideToStyleClass:"amx-masonryLayoutItem-transition-hide-to",
transitionShowFromStyleClass:"amx-masonryLayoutItem-transition-show-from",transitionShowToStyleClass:"amx-masonryLayoutItem-transition-show-to"},{addStyleClassName:function(a,b){null!=b&&""!=b&&a.classList.add.apply(a.classList,b.split(" "))},removeStyleClassName:function(a,b){null!=b&&""!=b&&a.classList.remove.apply(a.classList,b.split(" "))},getSizeStyleClassName:function(a){return d(a)},getTileSpan:function(a){return a.classList.contains("amx-masonryLayoutItem-size-1x1")?{colSpan:1,rowSpan:1}:
a.classList.contains("amx-masonryLayoutItem-size-1x2")?{colSpan:1,rowSpan:2}:a.classList.contains("amx-masonryLayoutItem-size-1x3")?{colSpan:1,rowSpan:3}:a.classList.contains("amx-masonryLayoutItem-size-2x1")?{colSpan:2,rowSpan:1}:a.classList.contains("amx-masonryLayoutItem-size-2x2")?{colSpan:2,rowSpan:2}:a.classList.contains("amx-masonryLayoutItem-size-2x3")?{colSpan:2,rowSpan:3}:a.classList.contains("amx-masonryLayoutItem-size-3x1")?{colSpan:3,rowSpan:1}:a.classList.contains("amx-masonryLayoutItem-size-3x2")?
{colSpan:3,rowSpan:2}:{colSpan:1,rowSpan:1}},showTileOnEndFunc:function(a){},hideTileOnEndFunc:function(a){adf.mf.api.amx.removeDomNode(a)},layoutOnEndFunc:function(){e.stopDragging=!1;var a=adf.mf.api.amx.AmxNode.getAmxNodeForElement(e),b=a.getAttribute("_pendingMove");b&&(a.setAttributeResolvedValue("_pendingMove",null),c(b,e))},layoutCycleOnStartFunc:function(){},layoutCycleOnEndFunc:function(){e._locked&&(e._locked=!1,e._refresh&&(e._refresh=!1,k.prototype.refresh(b)))}}),h=function(a){setTimeout(function(a){e._locked?
e._refresh=!0:(e._locked=!0,g.resizeNotify())},250,a)};b.setAttributeResolvedValue("resizeListener",h);window.addEventListener("resize",h);e._mlCommon=g};k.prototype._addListener=function(a,b,c,d){var e=function(a){var b=m[a];return b?b:a};amx.hasTouch()?adf.mf.api.amx.addBubbleEventListener(a,e(b),function(a){if("touchend"===a.type)c(null,null,a);else if(1==a.touches.length){var b=a.touches[0];c(b.pageX,b.pageY,a)}},d):adf.mf.api.amx.addBubbleEventListener(a,e(b),function(a){c(a.pageX,a.pageY,a)},
d)};k.prototype._createMouseDownCallback=function(){var c=this;return function(e,g,h){var k=c._getTile(h);adf.mf.api.amx.AmxNode.getAmxNodeForElement(k);var m=document.getElementById(h.data.id);if(k){if(b(h))return!1;var n=h.data.dragContext;n.timeout=window.setTimeout(function(){n.timeout=0;a()?n.startX=parseInt(k.style.right,10):n.startX=k.offsetLeft;n.startY=k.offsetTop;n.startPageX=e;n.startPageY=g;n.tile=k;var b=document.createElement("div");b.classList.add("amx-masonryLayoutItem");b.classList.add(d(k));
b.setAttribute("style","position: absolute; background-color: lightGray");a()?b.style.right=k.style.right:b.style.left=k.style.left;b.style.top=k.style.top;b._ghost=!0;k.style.zIndex=300;k._dragging=!0;k.classList.remove("amx-masonryLayoutItem");k.classList.add("amx-masonryLayoutItem-dragging");m.insertBefore(b,k);n.ghost=b},125)}}};k.prototype._createMouseMoveCallback=function(){var b=this;return function(c,d,e){var h=e.data.dragContext,k=document.getElementById(e.data.id);if(h.timeout)window.clearTimeout(h.timeout),
h.timeout=null;else{var m=h.tile;if(h.ghost){e.preventDefault();e=h.startX+c-h.startPageX;var n=h.startY+d-h.startPageY;m.style.left=e+"px";a()&&(e=h.startX-(c-h.startPageX),m.style.right=e+"px",m.style.left="");m.style.top=n+"px";if(!k.stopDragging&&(e=adf.mf.internal.amx.getElementLeft(k),e=c-e,a()&&(e=k.getBoundingClientRect().right,e-=c),c=adf.mf.internal.amx.getElementTop(k),d=b._getTilePosition(m.parentNode,e,d-c),0<d)){if(d<k.childNodes.length){if(k.childNodes.item(d)._ghost)return;d=k.childNodes.item(d);
g(k,h.ghost,d);h.insertBefore=d}else adf.mf.api.amx.removeDomNode(h.ghost),k.appendChild(h.ghost);k.stopDragging=!0;h.request&&(window.cancelAnimationFrame(h.request),h.request=0);h.request=window.requestAnimationFrame(function(){k._locked?k._refresh=!0:(k._locked=!0,k._mlCommon.setup(!1))})}}}}};k.prototype._createMouseUpCallback=function(a){return function(b,d,e){b=e.data.dragContext;d=document.getElementById(e.data.id);d.stopDragging?a.setAttributeResolvedValue("_pendingMove",b):b.timeout?(window.clearTimeout(b.timeout),
b.timeout=0):b.ghost?(e.preventDefault(),c(b,d)):b.clear()}};k.prototype._getTile=function(a){for(a=a.target;a;){if(a.classList.contains("amx-masonryLayoutItem"))return a;if(a.classList.contains("amx-masonryLayout"))break;a=a.parentNode}return null};k.prototype._getInitialOrder=function(a,b){var c=a.getAttribute("initialOrder");if(!c)return null;var d=[];"string"===typeof c&&(c=c.split(","));if(c.length)for(var e={},g=0;g<c.length;g++){var h=parseInt(c[g]);h<b&&!e[h]&&(d.push(h),e[h]=!0)}for(g=0;g<
b;g++)-1==d.indexOf(g)&&d.push(g);return d};k.prototype._applyOrder=function(a,b,c){if(a=this._getInitialOrder(a,c.length))for(d=0;d<a.length;d++)a[d]<c.length&&b.appendChild(c[a[d]]);else for(var d=0;d<c.length;d++)b.appendChild(c[d])};k._renderDescendants=function(a){a=a.getChildren();for(var b=0;b<a.length;b++){var c=a[b];null!=document.getElementById(c.getId())&&c.rerender()}};k.prototype._getTilePosition=function(b,c,d){b=b.childNodes;for(var e=1,g=b.length;e<g;e++){var h=b[e];if(!h._dragging&&
!h._ghost)if(a()){var k=parseInt(h.style.right,10);if(c<k+h.offsetWidth&&c>k&&h.offsetTop<d&&d<h.offsetTop+h.offsetHeight)return c-k>h.offsetWidth/2?e:e+1}else if(h.offsetLeft<c&&c<h.offsetLeft+h.offsetWidth&&h.offsetTop<d&&d<h.offsetTop+h.offsetHeight)return c>h.offsetLeft+h.offsetWidth/2?e:e+1}return-1};e.prototype.clear=function(){this.request=this.timeout=0;this.insertBefore=this.tile=this.ghost=null;this.startPageY=this.startPageX=this.startY=this.startX=0};var n=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,
"masonryLayoutItem");n.prototype.createChildrenNodes=function(a){a.createStampedChildren(null,[null,"primary","secondary"]);a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);return adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.HANDLED};n.prototype.visitChildren=function(a,b,c){return a.visitStampedChildren(null,null,null,b,c)};n.prototype.render=function(b){var c=document.createElement("div"),e=h(b.getAttribute("dimension"));c.classList.add(e);var g=b.getChildren("primary");if(1>g.length)for(var g=
b.getChildren(),k=0;k<g.length;k++){var m=g[k].render();m&&c.appendChild(m)}b=b.getId();if(g=document.getElementById(b))a()?c.style.right=g.style.right:c.style.left=g.style.left,c.style.top=g.style.top,c.classList.remove(e),k=d(g),c.classList.add(k),k=g.parentNode,k._locked?k._refresh=!0:(k._locked=!0,m=k._mlCommon,b=b.replace(/:/g,"\\:"),c.id=b,k.appendChild(c),k.removeChild(g),m.resizeTile("#"+b,e),k.removeChild(c),k.appendChild(g));return c};n.prototype.updateChildren=function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};
n.prototype.getDescendentChangeAction=function(a,b){return adf.mf.api.amx.AmxNodeChangeResult.REFRESH};n.prototype.refresh=function(a,b,c){a.getParent().refresh(b,c)}})();