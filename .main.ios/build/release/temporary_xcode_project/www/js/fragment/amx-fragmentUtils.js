(function(){function a(a,b){var c=a.getChildren("http://xmlns.oracle.com/adf/mf/amx/fragment",b);return 0==c.length?void 0:c[0].getTextContent()}function b(a){this.Init(a)}function c(a){this.Init(a)}function d(a){this.Init(a)}function e(a){this.Init(a)}adf.mf.internal.amx.fragment={};adf.mf.internal.amx.fragment.FRAGMENT_XML_NS="http://xmlns.oracle.com/adf/mf/amx/fragment";adf.mf.internal.amx.fragment.findFragmentAmxNode=function(a){a=a.findAncestorByTag(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"fragmentDef");
return null==a?null:a.getParent()};adf.mf.internal.amx.fragment.AttributeMetaDataHolder=b;adf.mf.api.AdfObject.createSubclass(adf.mf.internal.amx.fragment.AttributeMetaDataHolder,adf.mf.api.AdfObject,"adf.mf.internal.amx.fragment.AttributeMetaDataHolder");b.prototype.Init=function(a){b.superclass.Init.call(this);this._attributes={};this._attributeLists={};for(var c=a.getChildren("http://xmlns.oracle.com/adf/mf/amx/fragment","attribute"),k=0,m=c.length;k<m;k++){var n=new d(c[k]);this._attributes[n.name]=
n}a=a.getChildren("http://xmlns.oracle.com/adf/mf/amx/fragment","attribute-list");c=0;for(k=a.length;c<k;c++)m=new e(a[c]),this._attributeLists[m.name]=m};b.prototype.getAttributeMetaData=function(a){return this._attributes[a]};b.prototype.getAttributeListMetaData=function(a){return this._attributeLists[a]};b.prototype.setupContext=function(a){var b={},c,d,e={},t=[],u,v=!1;u=null;var w=!a.getAttribute("_attrListsValidated");a instanceof adf.mf.api.amx.AmxNode?(c=a,d=c.__getTagInstances(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,
"attribute"),w&&(u=c.__getTagInstances(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"attributeList"),c.setAttributeResolvedValue("_attrListsValidated",!0))):(c=a.getParentAmxNode(),d=a.getChildren(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"attribute"),w&&(u=a.getChildren(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"attributeList"),a.setAttribute("_attrListsValidated",!0)));if(w&&u)for(a=0,w=u.length;a<w;++a){var x=u[a].getAttribute("name");if(null==this.getAttributeListMetaData(x))throw Error(adf.mf.resource.getInfoString("AMXErrorBundle",
"ERROR_NO_ATTRIBUTE_LIST_DEFINED",x));}w=0;for(x=d.length;w<x;++w){var y=d[w],z=y.getAttribute("name");b[z]=!0;a=this.getAttributeMetaData(z);if(null==a)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_FRAGMENT_ATTRIBUTE_NOT_DEFINED",z));a.validateTagInstance(y);u=y.getAttributeExpression("value");var A=null;if(void 0!==a.defaultValue){if(A=y.getAttribute("value"),null===A||null==A&&null==u)adf.mf.api.amx.AmxTag.__isELExpression(a.defaultValue)?u=adf.mf.api.amx.AmxNode.__performElSubstitutions(a.defaultValue):
A=a.defaultValue}else null==u&&(A=y.getAttribute("value"));null!=u?(e[z]=u,v=!0):(t.push(z),adf.mf.api.pushVariable(z,A))}for(z in this._attributes)b[z]||(a=this._attributes[z],a.validateTagInstance(null),void 0===a.defaultValue?(t.push(z),adf.mf.api.pushVariable(z,adf.mf.api.OptionalFragmentArgument)):adf.mf.api.amx.AmxTag.__isELExpression(a.defaultValue)?(e[z]=adf.mf.api.amx.AmxNode.__performElSubstitutions(a.defaultValue),v=!0):(t.push(z),adf.mf.api.pushVariable(z,a.defaultValue)));v&&c.__pushElReplacements(e);
return{hasElReplacements:v,elReplacements:e,variableNames:t,amxNode:c}};b.prototype.tearDownContext=function(a){a.hasElReplacements&&a.amxNode.__popElReplacements();a=a.variableNames;for(var b=0,c=a.length;b<c;++b)adf.mf.api.popVariable(a[b])};adf.mf.internal.amx.fragment.FragmentMetaData=c;adf.mf.api.AdfObject.createSubclass(adf.mf.internal.amx.fragment.FragmentMetaData,adf.mf.internal.amx.fragment.AttributeMetaDataHolder,"adf.mf.internal.amx.fragment.FragmentMetaData");c.prototype.Init=function(b){c.superclass.Init.call(this,
b);this._facets=[];this._popups={};for(var d=b.getChildren("http://xmlns.oracle.com/adf/mf/amx/fragment","facet"),e=0,m=d.length;e<m;++e)this._facets[a(d[e],"facet-name")]=!0;b=b.getChildren("http://xmlns.oracle.com/adf/mf/amx/fragment","popup");d=0;for(e=b.length;d<e;++d){var n=b[d],m=a(n,"popup-id"),n=a(n,"ref");this._popups[m]=null==n?!0:n}};c.prototype.hasExportedPopup=function(a){return null!=this._popups[a]};c.prototype.getExportedPopupReference=function(a){a=this._popups[a];return!0===a?null:
a};c.prototype.validateFacets=function(a){a=a.getTag().getChildrenFacetTags();for(var b=0,c=a.length;b<c;++b){var d=a[b].getAttribute("name");if(!this._facets[d])throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_FRAGMENT_FACET_NOT_DEFINED",d));}};c.prototype.storeMetaData=function(a){a.setAttributeResolvedValue("_fragmentMetaData",this)};c.getMetaData=function(a){return a.getAttribute("_fragmentMetaData")};adf.mf.internal.amx.fragment.AttributeMetaData=d;adf.mf.api.AdfObject.createSubclass(adf.mf.internal.amx.fragment.AttributeMetaData,
adf.mf.api.AdfObject,"adf.mf.internal.amx.fragment.AttributeMetaData");d.prototype.Init=function(b){d.superclass.Init.call(this);this.name=a(b,"attribute-name");var c=a(b,"required");this.required=null!=c&&adf.mf.api.amx.isValueTrue(c);this.defaultValue=a(b,"default-value")};d.prototype.validateTagInstance=function(a){if(!adf.mf.environment.profile.dtMode&&this.required&&void 0===this.defaultValue){var b=null!=a;if(b&&!a.getAttribute("_validated")){var c=a.getAttribute("value");if(void 0===c)return;
null==c&&(b=!1);a.setAttribute("_validated",!0)}if(!b)throw Error(adf.mf.resource.getInfoString("AMXErrorBundle","ERROR_FRAGMENT_REQUIRED_ATTRIBUTE_MISSING",this.name));}};adf.mf.internal.amx.fragment.AttributeListMetaData=e;adf.mf.api.AdfObject.createSubclass(adf.mf.internal.amx.fragment.AttributeListMetaData,adf.mf.internal.amx.fragment.AttributeMetaDataHolder,"adf.mf.internal.amx.fragment.AttributeListMetaData");e.prototype.Init=function(b){e.superclass.Init.call(this,b);this.name=a(b,"name")}})();