DvtTimeUtils={supportsTouch:function(){return DvtAgent.isTouchDevice()}};DvtObj.createSubclass(DvtTimeUtils,DvtObj,"DvtTimeUtils");DvtTimeUtils.getDatePosition=function(a,b,c,d){c=(c-a)*d;a=b-a;return 0==c||0==a?0:c/a};DvtTimeUtils.getPositionDate=function(a,b,c,d){b=c*(b-a);return 0==b||0==d?a:b/d+a};var DvtTimeComponent=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtTimeComponent,DvtBaseComponent,"DvtTimeComponent");DvtTimeComponent.BACKGROUND_ID="bg";
DvtTimeComponent.prototype.Init=function(a,b,c){DvtTimeComponent.superclass.Init.call(this,a);this._callback=b;this._callbackObj=c;this._virtualize=!1};DvtTimeComponent.prototype.render=function(a,b,c){c&&this.SetOptions(c);this.Width=a;this.Height=b;this.Options&&(a=this.Parse(this.Options),this._applyParsedProperties(a))};DvtTimeComponent.prototype.SetOptions=function(a){this.Options=DvtJSONUtils.clone(a)};
DvtTimeComponent.prototype.addTick=function(a,b,c,d,e,g,h){b=new DvtLine(this.getCtx(),b,d,c,e,h);b.setStroke(g);b.setPixelHinting(!0);a.addChild(b);return b};DvtTimeComponent.prototype.addAxisLabel=function(a,b,c,d,e){b.setX(c);b.setY(d);b.isTruncated()&&b.setTextString(b.getUntruncatedTextString());DvtTextUtils.fitText(b,e,Infinity,a);b.alignCenter()};
DvtTimeComponent.prototype.addLabel=function(a,b,c,d,e,g,h,k,m,n,t){c=new DvtOutputText(this.getCtx(),c,b,0,h);null!=g&&c.setCSSStyle(g);a.addChild(c);var u=c.getDimensions();a.removeChild(c);e-=u.h;c.setY(e);t&&c.setX(b-u.w);k&&(k=Math.min(u.w+2*m,d),b=t?b-k+2*m:b,e=new DvtRect(this.getCtx(),b-m,e-m,k,u.h+2*m,"ob_"+h),e.setCSSStyle(g),e.setCornerRadius(3),a.addChild(e),n&&n.push(e));DvtTextUtils.fitText(c,d,Infinity,a);n&&n.push(c);return c};
DvtTimeComponent.prototype._applyParsedProperties=function(a){this._origStart=a.origStart;this._origEnd=a.origEnd;this._start=a.start;this._end=a.end;this._inlineStyle=a.inlineStyle;this._scale=a.scale;this._converter=a.converter;this.applyStyleValues()};DvtTimeComponent.prototype.applyStyleValues=function(){this._style.parseInlineStyle(this._inlineStyle)};DvtTimeComponent.prototype.isAnimationEnabled=function(){return!1};DvtTimeComponent.prototype.getAdjustedStartTime=function(){return this._start};
DvtTimeComponent.prototype.getAdjustedEndTime=function(){return this._end};DvtTimeComponent.prototype.getContentLength=function(){return this._contentLength};DvtTimeComponent.prototype.setContentLength=function(a){this._contentLength=this._canvasLength<a?a:this._canvasLength;this._virtualize||(this._fetchStartPos=0,this._fetchEndPos=this._contentLength)};DvtTimeComponent.prototype.isRTL=function(){return DvtAgent.isRightToLeft(this.getCtx())};DvtTimeComponent.prototype.isVertical=function(){return this._isVertical};
DvtTimeComponent.prototype.setVScrollPos=function(a){null!=this._canvas&&this._canvas.setTranslateY(0-a)};DvtTimeComponent.prototype.setHScrollPos=function(a){null!=this._canvas&&this._canvas.setTranslateX(0-a)};var DvtTimeComponentAxis=function(a,b,c,d,e,g){this.Init(a,b,c,d,e,g)};DvtObj.createSubclass(DvtTimeComponentAxis,DvtContainer,"DvtTimeComponentAxis");DvtTimeComponentAxis.DEFAULT_INTERVAL_WIDTH=50;DvtTimeComponentAxis.DEFAULT_INTERVAL_HEIGHT=21;
DvtTimeComponentAxis.DEFAULT_INTERVAL_PADDING=2;DvtTimeComponentAxis.DEFAULT_BORDER_WIDTH=1;DvtTimeComponentAxis.DEFAULT_SEPARATOR_WIDTH=1;DvtTimeComponentAxis._VALID_SCALES="seconds minutes hours days weeks months quarters years".split(" ");
DvtTimeComponentAxis.prototype.Init=function(a,b,c,d,e,g){DvtTimeComponentAxis.superclass.Init.call(this,a);this._calendar=new DvtTimeComponentCalendar;this._formatter=new DvtTimeComponentAxisFormatter(DvtTimeComponentAxisFormatter.SHORT,g);this._contentSize=d?DvtTimeComponentAxis.DEFAULT_INTERVAL_WIDTH:DvtTimeComponentAxis.DEFAULT_INTERVAL_HEIGHT;this._borderWidth=DvtTimeComponentAxis.DEFAULT_BORDER_WIDTH;this._zoomOrder=e;this._dateToIsoConverter=a.getLocaleHelpers().dateToIsoConverter};
DvtTimeComponentAxis.prototype.setScale=function(a){this._scale=a};DvtTimeComponentAxis.prototype.increaseScale=function(){for(var a=0;a<this._zoomOrder.length-1;a++)if(this._zoomOrder[a]==this._scale)return this._scale=this._zoomOrder[a+1],!0;return!1};DvtTimeComponentAxis.prototype.decreaseScale=function(){for(var a=1;a<this._zoomOrder.length;a++)if(this._zoomOrder[a]==this._scale)return this._scale=this._zoomOrder[a-1],!0;return!1};
DvtTimeComponentAxis.prototype.setConverter=function(a){this._converter=a};DvtTimeComponentAxis.prototype.setDefaultConverter=function(a){this._defaultConverter=a};DvtTimeComponentAxis.prototype.getContentSize=function(){return this._contentSize};DvtTimeComponentAxis.prototype.setContentSize=function(a){a>this._contentSize&&(this._contentSize=a)};DvtTimeComponentAxis.prototype.getTimeAxisWidth=function(){null==this._timeAxisWidth&&(this._timeAxisWidth=30);return this._timeAxisWidth};
DvtTimeComponentAxis.prototype.setBorderWidth=function(a){this._borderWidth=a};DvtTimeComponentAxis.prototype.getBorderWidth=function(){return this._borderWidth};DvtTimeComponentAxis.prototype.getSize=function(){return this._contentSize+2*this._borderWidth};DvtTimeComponentAxis.prototype.setType=function(a,b){this._formatter=new DvtTimeComponentAxisFormatter(a,b)};DvtTimeComponentAxis.prototype.adjustDate=function(a){return this._calendar.adjustDate(new Date(a),this._scale)};
DvtTimeComponentAxis.prototype.getNextDate=function(a){return this._calendar.getNextDate(new Date(a),this._scale)};
DvtTimeComponentAxis.prototype.formatDate=function(a){if(this._converter){var b;b=this._converter[this._scale]?this._converter[this._scale]:this._converter["default"]?this._converter["default"]:this._converter;if(b.format)return b.format(this._dateToIsoConverter?this._dateToIsoConverter(a):a);if(b.getAsString)return b.getAsString(a)}if(this._defaultConverter&&this._defaultConverter[this._scale]){b=this._defaultConverter[this._scale];if(b.format)return b.format(this._dateToIsoConverter?this._dateToIsoConverter(a):
a);if(b.getAsString)return b.getAsString(a)}return this._formatter.format(a,this._scale)};DvtTimeComponentAxis.prototype.getZoomOrder=function(){return this._zoomOrder};DvtTimeComponentAxis.prototype.setZoomOrder=function(a){this._zoomOrder=a};var DvtTimeComponentAxisFormatter=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtTimeComponentAxisFormatter,DvtObj,"DvtTimeComponentAxisFormatter");DvtTimeComponentAxisFormatter.LONG=0;DvtTimeComponentAxisFormatter.SHORT=1;
DvtTimeComponentAxisFormatter.prototype.Init=function(a,b){this._type=a;this._dateFormatStrings=b;this._formats=[];this._formats[0]={};this._formats[0].seconds="HH:MM:ss";this._formats[0].minutes="HH:MM";this._formats[0].hours="HH:MM";this._formats[0].days="dddd";this._formats[0].weeks="m/dd";this._formats[0].months="mmmm";this._formats[0].quarters="mmmm";this._formats[0].halfyears="yyyy";this._formats[0].years="yyyy";this._formats[0].twoyears="yyyy";this._formats[1]={};this._formats[1].seconds="HH:MM:ss";
this._formats[1].minutes="HH:MM";this._formats[1].hours="HH:MM";this._formats[1].days="m/dd";this._formats[1].weeks="m/dd";this._formats[1].months="mmm";this._formats[1].quarters="mmm";this._formats[1].halfyears="yy";this._formats[1].years="yy";this._formats[1].twoyears="yy"};DvtTimeComponentAxisFormatter.prototype.setPattern=function(a,b){this._formats[this._type][a]=b};
DvtTimeComponentAxisFormatter.prototype.format=function(a,b){var c=this._formats[this._type][b];return null!=c?a.format(c,null,this._dateFormatStrings):a.toLocaleString()};
var dateFormat=function(a){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,e=function(a,b){a=String(a);for(b=b||2;a.length<b;)a="0"+a;return a};return function(a,h,k,m){var n=dateFormat;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(a)||/\d/.test(a)||(h=a,a=void 0);a=a?new Date(a):new Date;if(isNaN(a))throw SyntaxError("invalid date");
h=String(n.masks[h]||h||n.masks["default"]);"UTC:"==h.slice(0,4)&&(h=h.slice(4),k=!0);var t=k?"getUTC":"get",n=a[t+"Date"](),u=a[t+"Day"](),v=a[t+"Month"](),w=a[t+"FullYear"](),x=a[t+"Hours"](),y=a[t+"Minutes"](),z=a[t+"Seconds"](),t=a[t+"Milliseconds"](),A=k?0:a.getTimezoneOffset(),B={d:n,dd:e(n),ddd:m.dayNames[u],dddd:m.dayNames[u+7],m:v+1,mm:e(v+1),mmm:m.monthNames[v],mmmm:m.monthNames[v+12],yy:String(w).slice(2),yyyy:w,h:x%12||12,hh:e(x%12||12),H:x,HH:e(x),M:y,MM:e(y),s:z,ss:e(z),l:e(t,3),L:e(99<
t?Math.round(t/10):t),t:12>x?"a":"p",tt:12>x?"am":"pm",T:12>x?"A":"P",TT:12>x?"AM":"PM",Z:k?"UTC":(String(a).match(c)||[""]).pop().replace(d,""),o:(0<A?"-":"+")+e(100*Math.floor(Math.abs(A)/60)+Math.abs(A)%60,4),S:["th","st","nd","rd"][3<n%10?0:(10!=n%100-n%10)*n%10]};return h.replace(b,function(a){return a in B?B[a]:a.slice(1,a.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};Date.prototype.format=function(a,b,c){return dateFormat(this,a,b,c)};var DvtTimeComponentCalendar=function(a){this.Init(a)};
DvtObj.createSubclass(DvtTimeComponentCalendar,DvtObj,"DvtTimeComponentCalendar");DvtTimeComponentCalendar.prototype.Init=function(){this._dayInMillis=864E5};DvtTimeComponentCalendar.prototype.getFirstDayOfWeek=function(){return 0};
DvtTimeComponentCalendar.prototype.adjustDate=function(a,b){var c=new Date(a.getTime());if("weeks"==b){c.setHours(0,0,0);var d=(a.getDay()-this.getFirstDayOfWeek()+7)%7;0<d&&c.setTime(c.getTime()-d*this._dayInMillis)}else"months"==b?c.setDate(1):"days"==b?c.setHours(0,0,0):"hours"==b?c.setMinutes(0,0,0):"minutes"==b?c.setSeconds(0,0):"seconds"==b?c.setMilliseconds(0):"quarters"==b?(c.setDate(1),d=2-(a.getMonth()+11)%3,0<d&&c.setMonth(c.getMonth()+d)):"halfyears"==b?(c.setDate(1),d=5-(a.getMonth()+
11)%6,0<d&&c.setMonth(c.getMonth()+d)):"years"==b?(c.setMonth(0),c.setDate(1)):"twoyears"==b&&(c.setMonth(0),c.setDate(1));return c};
DvtTimeComponentCalendar.prototype.getNextDate=function(a,b){var c=new Date(a.getTime());"seconds"==b?c.setSeconds(a.getSeconds()+1):"minutes"==b?c.setMinutes(a.getMinutes()+1):"hours"==b?c.setHours(a.getHours()+1):"days"==b?c.setDate(a.getDate()+1):"weeks"==b?c.setDate(a.getDate()+7):"months"==b?c.setMonth(a.getMonth()+1):"quarters"==b?c.setMonth(a.getMonth()+3):"halfyears"==b?c.setMonth(a.getMonth()+6):"years"==b?c.setFullYear(a.getFullYear()+1):"twoyears"==b?c.setFullYear(a.getFullYear()+2):c.setYear(a.getYear()+
1);return c};var DvtTimelineKeyboardHandler=function(a){this.Init(a)};DvtObj.createSubclass(DvtTimelineKeyboardHandler,DvtKeyboardHandler,"DvtTimelineKeyboardHandler");DvtTimelineKeyboardHandler.prototype.Init=function(a){DvtTimelineKeyboardHandler.superclass.Init.call(this,a)};DvtTimelineKeyboardHandler.prototype.isSelectionEvent=function(a){return this.isNavigationEvent(a)&&!a.ctrlKey};
DvtTimelineKeyboardHandler.prototype.isMultiSelectEvent=function(a){return a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey};
DvtTimelineKeyboardHandler.prototype.processKeyDown=function(a){var b=a.keyCode;DvtKeyboardEvent.isEquals(a)||DvtKeyboardEvent.isPlus(a)?this._eventManager.zoomBy(1/DvtTimeline.ZOOM_BY_VALUE):DvtKeyboardEvent.isMinus(a)||DvtKeyboardEvent.isUnderscore(a)?this._eventManager.zoomBy(DvtTimeline.ZOOM_BY_VALUE):b==DvtKeyboardEvent.PAGE_UP?(a.shiftKey?this._eventManager.panBy(-.25,0):this._eventManager.panBy(0,-.25),DvtEventManager.consumeEvent(a)):b==DvtKeyboardEvent.PAGE_DOWN&&(a.shiftKey?this._eventManager.panBy(.25,
0):this._eventManager.panBy(0,.25),DvtEventManager.consumeEvent(a));return DvtTimelineKeyboardHandler.superclass.processKeyDown.call(this,a)};
DvtTimelineKeyboardHandler.getNextNavigable=function(a,b,c){var d=a.getSeries(),e=a.getSeriesIndex(),g=DvtAgent.isRightToLeft(d.getCtx()),d=d.isVertical(),h=1<c.length;if(!g&&DvtKeyboardEvent.RIGHT_ARROW==b.keyCode||g&&DvtKeyboardEvent.LEFT_ARROW==b.keyCode){if(!d)return DvtTimelineKeyboardHandler.getNextItem(a,c[e],!0);if(h&&1!=e)return DvtTimelineKeyboardHandler.getClosestItem(a,c[1])}else if(!g&&DvtKeyboardEvent.LEFT_ARROW==b.keyCode||g&&DvtKeyboardEvent.RIGHT_ARROW==b.keyCode){if(!d)return DvtTimelineKeyboardHandler.getNextItem(a,
c[e],!1);if(h&&0!=e)return DvtTimelineKeyboardHandler.getClosestItem(a,c[0])}else if(DvtKeyboardEvent.DOWN_ARROW==b.keyCode){if(d)return DvtTimelineKeyboardHandler.getNextItem(a,c[e],!0);if(h&&1!=e)return DvtTimelineKeyboardHandler.getClosestItem(a,c[1])}else if(DvtKeyboardEvent.UP_ARROW==b.keyCode){if(d)return DvtTimelineKeyboardHandler.getNextItem(a,c[e],!1);if(h&&0!=e)return DvtTimelineKeyboardHandler.getClosestItem(a,c[0])}return null};
DvtTimelineKeyboardHandler.getNextItem=function(a,b,c){a=b.indexOf(a)+(c?1:-1);return 0<=a&&a<b.length?b[a]:null};DvtTimelineKeyboardHandler.getClosestItem=function(a,b){if(0<b.length){for(var c=b[0],d=a.getLoc(),e=Math.abs(d-c.getLoc()),g=1;g<b.length;g++){var h=Math.abs(d-b[g].getLoc());h<e&&(e=h,c=b[g])}return c}return null};var DvtTimelineEventManager=function(a){this.Init(a.getCtx(),a.processEvent,a);this._timeline=a;this._isPinchZoom=this._isDragPanning=!1};
DvtObj.createSubclass(DvtTimelineEventManager,DvtEventManager,"DvtTimelineEventManager");DvtTimelineEventManager.GECKO_MOUSEWHEEL="wheel";
DvtTimelineEventManager.prototype.addListeners=function(a){DvtTimelineEventManager.superclass.addListeners.call(this,a);DvtSvgDocumentUtils.addDragListeners(this._timeline,this._onDragStart,this._onDragMove,this._onDragEnd,this);DvtAgent.isTouchDevice()||(DvtAgent.isPlatformGecko()?a.addEvtListener(DvtTimelineEventManager.GECKO_MOUSEWHEEL,this.OnMouseWheel,!1,this):a.addEvtListener(DvtMouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this),DvtAgent.isPlatformIE()&&(a=this.getCtx().getStage(),a.addEvtListener("mouseenter",
this.OnMouseEnter,!1,this),a.addEvtListener("mouseleave",this.OnMouseLeave,!1,this)))};
DvtTimelineEventManager.prototype.removeListeners=function(a){DvtTimelineEventManager.superclass.removeListeners.call(this,a);DvtAgent.isTouchDevice()||(DvtAgent.isPlatformGecko()?a.removeEvtListener(DvtTimelineEventManager.GECKO_MOUSEWHEEL,this.OnMouseWheel,!1,this):a.removeEvtListener(DvtMouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this),DvtAgent.isPlatformIE()&&(a=this.getCtx().getStage(),a.removeEvtListener("mouseenter",this.OnMouseEnter,!1,this),a.removeEvtListener("mouseleave",this.OnMouseLeave,
!1,this)))};DvtTimelineEventManager.prototype.OnKeyDown=function(a){DvtTimelineEventManager.superclass.OnKeyDown.call(this,a);this._timeline.HandleKeyDown(a)};DvtTimelineEventManager.prototype.OnClick=function(a){this._isDragPanning||(DvtTimelineEventManager.superclass.OnClick.call(this,a),this._timeline.HandleMouseClick(a))};
DvtTimelineEventManager.prototype.PreOnMouseOver=function(a){this._mouseOutTimer&&this._mouseOutTimer.isRunning()&&this._mouseOutTimer.stop();DvtTimelineEventManager.superclass.PreOnMouseOver.call(this,a);DvtAgent.isPlatformIE()||this.isMouseOver||(this.isMouseOver=!0,this._timeline.isAnimating()||this._timeline.showThenHideHotspots(0))};
DvtTimelineEventManager.prototype.OnMouseEnter=function(a){this._mouseOutTimer&&this._mouseOutTimer.isRunning()&&this._mouseOutTimer.stop();this.isMouseOver||(this.isMouseOver=!0,this._timeline.isAnimating()||this._timeline.showThenHideHotspots(0))};DvtTimelineEventManager.prototype.OnMouseLeave=function(a){this._mouseOutTimer||(this._mouseOutTimer=new DvtTimer(this.getCtx(),10,this._onMouseOutTimerEnd,this,1));this._mouseOutTimer.reset();this._mouseOutTimer.start()};
DvtTimelineEventManager.prototype.PreOnMouseOut=function(a){DvtTimelineEventManager.superclass.PreOnMouseOut.call(this,a);DvtAgent.isPlatformIE()||(this._mouseOutTimer||(this._mouseOutTimer=new DvtTimer(this.getCtx(),10,this._onMouseOutTimerEnd,this,1)),this._mouseOutTimer.reset(),this._mouseOutTimer.start())};DvtTimelineEventManager.prototype._onMouseOutTimerEnd=function(){this.isMouseOver=!1};
DvtTimelineEventManager.prototype.PreOnMouseDown=function(a){this._isDragPanning=!1;DvtTimelineEventManager.superclass.PreOnMouseDown.call(this,a);this._timeline.HandleMouseDown(a)};DvtTimelineEventManager.prototype.OnMouseWheel=function(a){this._timeline.HandleMouseWheel(a)};DvtTimelineEventManager.prototype.OnTouchStartBubble=function(a){DvtTimelineEventManager.superclass.OnTouchStartBubble.call(this,a);this._timeline.HandleTouchStart(a);this._timeline.getCtx().getStage().getSVGRoot().parentNode.focus()};
DvtTimelineEventManager.prototype.OnTouchEndBubble=function(a){DvtTimelineEventManager.superclass.OnTouchEndBubble.call(this,a);this._timeline.HandleTouchEnd(a)};DvtTimelineEventManager.prototype._onDragStart=function(a){if(this._timeline.hasValidOptions())return DvtAgent.isTouchDevice()?this._onTouchDragStart(a):this._onMouseDragStart(a)};DvtTimelineEventManager.prototype._onDragMove=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragMove(a):this._onMouseDragMove(a)};
DvtTimelineEventManager.prototype._onDragEnd=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragEnd(a):this._onMouseDragEnd(a)};DvtTimelineEventManager.prototype._getRelativePosition=function(a,b){this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition());return new DvtPoint(a-this._stageAbsolutePosition.x,b-this._stageAbsolutePosition.y)};
DvtTimelineEventManager.prototype._onMouseDragStart=function(a){return a.button!=DvtMouseEvent.RIGHT_CLICK_BUTTON?(a=this._getRelativePosition(a.pageX,a.pageY),this._timeline.beginDragPan(a.x,a.y),!0):!1};DvtTimelineEventManager.prototype._onMouseDragMove=function(a){a=this._getRelativePosition(a.pageX,a.pageY);this._timeline.contDragPan(a.x,a.y)&&(this._isDragPanning=!0)};DvtTimelineEventManager.prototype._onMouseDragEnd=function(a){this._timeline.endDragPan();this._stageAbsolutePosition=null};
DvtTimelineEventManager.prototype._onTouchDragStart=function(a){var b=a.touches;if(1==b.length)return a=this._getRelativePosition(b[0].pageX,b[0].pageY),this._timeline.beginDragPan(a.x,a.y),!0;if(2==b.length){this._timeline.endDragPan();this._isPinchZoom=!0;var c=this._getRelativePosition(b[0].pageX,b[0].pageY),b=this._getRelativePosition(b[1].pageX,b[1].pageY);this._timeline.beginPinchZoom(c.x,c.y,b.x,b.y);DvtEventManager.consumeEvent(a);return!0}return!1};
DvtTimelineEventManager.prototype._onTouchDragMove=function(a){var b=a.touches;if(1==b.length){var c=this._getRelativePosition(b[0].pageX,b[0].pageY);this._timeline.contDragPan(c.x,c.y);a.preventDefault()}else 2==b.length&&(c=this._getRelativePosition(b[0].pageX,b[0].pageY),b=this._getRelativePosition(b[1].pageX,b[1].pageY),this._timeline.contPinchZoom(c.x,c.y,b.x,b.y),a.preventDefault())};
DvtTimelineEventManager.prototype._onTouchDragEnd=function(a){this._isPinchZoom?(this._isPinchZoom=!1,this._timeline.endPinchZoom()):this._timeline.endDragPan();a.preventDefault();this._stageAbsolutePosition=null};DvtTimelineEventManager.prototype.zoomBy=function(a){this._timeline.zoomBy(a)};
DvtTimelineEventManager.prototype.panBy=function(a,b){var c=a*this._timeline._canvasLength*(DvtAgent.isRightToLeft(this._context)?-1:1),d=b*this._timeline._seriesSize;0!=c&&(this._timeline._triggerViewportChange=!0);var e=this.getFocus();e&&(this._timeline._dragPanSeries=e._series);this._timeline.panBy(c,d);this._timeline.endPan()};DvtTimelineEventManager.prototype.HandleZoomInClick=function(a){this._timeline.handleZoom(!0)};DvtTimelineEventManager.prototype.HandleZoomOutClick=function(a){this._timeline.handleZoom(!1)};
DvtTimelineEventManager.prototype.GetTouchResponse=function(){return DvtEventManager.TOUCH_RESPONSE_TOUCH_HOLD};var DvtTimeline=function(){};DvtObj.createSubclass(DvtTimeline,DvtTimeComponent,"DvtTimeline");DvtTimeline.ZOOM_BY_VALUE=1.5;DvtTimeline.ORIENTATION_VERTICAL="vertical";DvtTimeline.newInstance=function(a,b,c){var d=new DvtTimeline;d.Init(a,b,c);return d};
DvtTimeline.prototype.Init=function(a,b,c){DvtTimeline.superclass.Init.call(this,a,b,c);this.Defaults=new DvtTimelineDefaults;this.EventManager=new DvtTimelineEventManager(this,a,b,c);this.EventManager.addListeners(this);DvtAgent.isTouchDevice()?this._keyboardHandler=null:(this._keyboardHandler=new DvtTimelineKeyboardHandler(this.EventManager),this.EventManager.setKeyboardHandler(this._keyboardHandler))};
DvtTimeline.prototype.SetOptions=function(a){this.Options=this.Defaults.calcOptions(a);DvtAgent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")};DvtTimeline.prototype.Parse=function(a){this._parser=new DvtTimelineParser;return this._parser.parse(a)};
DvtTimeline.prototype._applyParsedProperties=function(a){var b=a.orientation;this._isVertical=b&&b==DvtTimeline.ORIENTATION_VERTICAL?!0:!1;this._hasOverview=a.hasOverview;this._viewStartTime=a.viewStart;this._viewEndTime=a.viewEnd;this._selectionMode=a.selectionMode;this.SelectionHandler="single"==this._selectionMode?new DvtSelectionHandler(DvtSelectionHandler.TYPE_SINGLE):"multiple"==this._selectionMode?new DvtSelectionHandler(DvtSelectionHandler.TYPE_MULTIPLE):null;this.EventManager.setSelectionHandler(this.SelectionHandler);
this._axisInlineStyle=a.axisStyle;this._shortDesc=a.shortDesc;this._id=a.id;this._referenceObjects=a.referenceObjects;this._zoomOrder=a.zoomOrder;this._seriesScale=a.seriesScale;this._dateFormatStrings={dayNames:[DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SHORT_SUNDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SHORT_MONDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SHORT_TUESDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SHORT_WEDNESDAY",
null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SHORT_THURSDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SHORT_FRIDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SHORT_SATURDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SUNDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_MONDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_TUESDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,
"DAY_WEDNESDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_THURSDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_FRIDAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DAY_SATURDAY",null)],monthNames:[DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_JANUARY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_FEBRUARY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_MARCH",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,
"MONTH_SHORT_APRIL",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_MAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_JUNE",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_JULY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_AUGUST",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_SEPTEMBER",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_OCTOBER",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,
"MONTH_SHORT_NOVEMBER",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SHORT_DECEMBER",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_JANUARY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_FEBRUARY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_MARCH",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_APRIL",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_MAY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,
"MONTH_JUNE",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_JULY",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_AUGUST",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_SEPTEMBER",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_OCTOBER",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_NOVEMBER",null),DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"MONTH_DECEMBER",null)]};this._seriesScale?(this._seriesConverter=
a.seriesConverter,this._seriesTimeAxis=new DvtTimeComponentAxis(this.getCtx(),null,null,this._isVertical),this._seriesTimeAxis.setScale(this._seriesScale),this._seriesTimeAxis.setConverter(this._seriesConverter),this._isVertical?(this._seriesTimeAxis.setType(DvtTimeComponentAxisFormatter.SHORT,this._dateFormatStrings),this._seriesTimeAxis.setDefaultConverter(this._resources.converterVert)):(this._seriesTimeAxis.setType(DvtTimeComponentAxisFormatter.LONG,this._dateFormatStrings),this._seriesTimeAxis.setDefaultConverter(this._resources.converter))):
this._seriesTimeAxis=null;this._defaultInversions=[!1,!0];DvtTimeline.superclass._applyParsedProperties.call(this,a)};DvtTimeline.prototype.getTimeAxisSize=function(){return this._timeAxis.getSize()};DvtTimeline.prototype.getTimeAxisVisibleSize=function(a){return this._hasOverview||1!=a?this.getTimeAxisSize():this.getTimeAxisSize()-this._timeAxis.getBorderWidth()};DvtTimeline.prototype.select=function(a){this.Options.selection=DvtJSONUtils.clone(a);this.SelectionHandler&&this.applyInitialSelections()};
DvtTimeline.prototype.render=function(a,b,c){a?(this.SetOptions(a),this.Options&&(this._resources=this.Options._resources,null==this._resources&&(this._resources=[])),this.Width=b,this.Height=c,a=this.Parse(this.Options),this._applyParsedProperties(a),this._fetchStartPos=0,this._fetchEndPos=this._isVertical?c:b,this.Options.styleDefaults&&(this._axisStyleDefaults=this.Options.styleDefaults.minorAxis,this._majorAxisStyleDefaults=this.Options.styleDefaults.majorAxis,this._seriesStyleDefaults=this.Options.styleDefaults.series),
this.prepareViewportLength(),this._scale&&(this.prepareTimeAxisZoomLevelIntervals(this._start,this._end),this.applyAxisStyleValues()),this._populateSeries(),DvtTimelineRenderer.renderTimeline(this),this.UpdateAriaAttributes(),this.getCtx().setKeyboardFocusArray([this])):this._handleResize(b,c)};
DvtTimeline.prototype.hasValidSeriesItems=function(){for(var a=0;a<this._seriesOptions.length;a++){var b=this._seriesOptions[a];if(b.items)for(var c=0;c<b.items.length;c++){var d=b.items[c],e=(new Date(d.start)).getTime();if(!e||d.hasOwnProperty("end")&&(d=(new Date(d.end)).getTime(),!(d&&d>e)))return!1}}return!0};
DvtTimeline.prototype.hasValidOptions=function(){var a=this._scale&&-1!=DvtTimeComponentAxis._VALID_SCALES.indexOf(this._scale),b=this._start&&this._end&&this._end>this._start,c=this._series&&0<this._series.length,d=c?this.hasValidSeriesItems():!1,e=this._seriesScale?-1!=DvtTimeComponentAxis._VALID_SCALES.indexOf(this._seriesScale):!0,g=this._viewStartTime&&this._viewEndTime?this._viewEndTime>this._viewStartTime:!0,h=this._viewStartTime?this._viewStartTime>=this._start&&this._viewStartTime<this._end:
!0,k=this._viewEndTime?this._viewEndTime>this._start&&this._viewEndTime<=this._end:!0;return a&&b&&c&&d&&e&&g&&h&&k};DvtTimeline.prototype.GetComponentDescription=function(){return this._shortDesc?this._shortDesc:DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"TIMELINE")};DvtTimeline.prototype.isAnimating=function(){for(var a=0;a<this._series.length;a++)if(this._series[a]._isAnimating)return!0;return!1};
DvtTimeline.prototype.showThenHideHotspots=function(a,b){if(this.hasValidOptions()){for(var c=new DvtAnimator(this.getCtx(),DvtTimelineStyleUtils.getHotspotAnimationDuration(),a,DvtEasing.linear),d=0;d<this._scrollHotspots.length;d++){var e=this._scrollHotspots[d],g=e.getId(),h=!0;this._contentLength<=this._canvasLength&&("lhs"==g||"rhs"==g)&&(h=!1);var k=e.getParent().getId();k&&(k=k.substring(k.length-1),null!=b&&b!=k&&(h=!1),this._series[k]._maxOverflowValue<=this._seriesSize&&("ths"==g||"bhs"==
g)&&(h=!1));h&&c.addProp(DvtAnimator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,DvtTimelineStyleUtils.getHotspotOpacity())}DvtPlayable.appendOnEnd(c,this.hideHotspots,this);c.play()}};DvtTimeline.prototype.hideHotspots=function(){var a=this._scrollHotspots.length;if(0!=a){for(var b=new DvtAnimator(this.getCtx(),DvtTimelineStyleUtils.getHotspotAnimationDuration(),0,DvtEasing.linear),c=0;c<a;c++){var d=this._scrollHotspots[c];b.addProp(DvtAnimator.TYPE_NUMBER,d,d.getAlpha,d.setAlpha,0)}b.play()}};
DvtTimeline.prototype.applyStyleValues=function(){this._style=new DvtCSSStyle(DvtTimelineStyleUtils.getTimelineStyle());if(this.Options.styleDefaults){var a=this.Options.styleDefaults.borderColor;a&&this._style.parseInlineStyle("border-color:"+a+";")}if(this._hasOverview&&(this._overviewSize=this._isVertical?DvtTimelineStyleUtils.getOverviewWidth():DvtTimelineStyleUtils.getOverviewHeight(),a=this.Options.overview.style))for(var a=a.split(";"),b=0;b<a.length;b++){var c=a[b];if(c&&0<c.length){var d=
c.indexOf(":");if(-1<d){var e=DvtStringUtils.trim(c.substring(0,d));if(this._isVertical&&"width"==e||!this._isVertical&&"height"==e){this._overviewSize=parseInt(DvtStringUtils.trim(c.substring(d+1)),10);break}}}}DvtTimeline.superclass.applyStyleValues.call(this);a=this._style.getBorderWidth();b=2*a;this._style.parseInlineStyle("border:"+b+"px;");this._startY=this._startX=a;this._backgroundWidth=this.Width;this._backgroundHeight=this.Height;this._isVertical?(this._canvasLength=this._backgroundHeight-
b,this._hasOverview?(this._canvasSize=this._backgroundWidth-this._overviewSize-b,this.isRTL()&&(this._startX+=this._overviewSize)):this._canvasSize=this._backgroundWidth-b):(this._canvasLength=this._backgroundWidth-b,this._canvasSize=this._hasOverview?this.Height-this._overviewSize-b:this.Height-b)};
DvtTimeline.prototype.applyAxisStyleValues=function(){this._axisStyle=new DvtCSSStyle(DvtTimelineStyleUtils.getAxisStyle());if(this._axisStyleDefaults){var a="",b=this._axisStyleDefaults.backgroundColor;b&&(a=a+"background-color:"+b+";");(b=this._axisStyleDefaults.borderColor)&&(a=a+"border-color:"+b+";");(b=this._axisStyleDefaults.borderWidth)&&(a=a+"border-width:"+b+";");this._axisStyle.parseInlineStyle(a)}this._axisStyle.parseInlineStyle(this._axisInlineStyle);this._axisBorderWidth=this._axisStyle.getBorderWidth();
this._axisStyle.parseInlineStyle("border:"+2*this._axisBorderWidth+"px;");this._timeAxis.setBorderWidth(this._axisBorderWidth);this._axisLength=this._contentLength+2*this._axisBorderWidth-DvtTimeComponentAxis.DEFAULT_SEPARATOR_WIDTH;if(this._seriesStyleDefaults&&this._seriesStyleDefaults.backgroundColor){var c=this._seriesStyleDefaults.backgroundColor,a=DvtColorUtils.getRed(c),b=DvtColorUtils.getGreen(c),c=DvtColorUtils.getBlue(c);this._seriesBackgroundOverlayStyle="background-color:rgba("+a+","+
b+","+c+",0.8);"}};
DvtTimeline.prototype.prepareViewportLength=function(){this._setLength=!0;this._startPos=0;this.isRTL()&&!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos);if(this._viewStartTime&&this._viewEndTime){var a=this._viewEndTime-this._viewStartTime;0<a&&(this._setLength=!1,a=this._canvasLength/a,this.setContentLength(a*(this._end-this._start)),this._startPos=a*(this._start-this._viewStartTime),this.isRTL()&&!this._isVertical&&(this._startPos=this._backgroundWidth-
this._contentLength-this._startPos))}};
DvtTimeline.prototype.prepareTimeAxisZoomLevelIntervals=function(a,b){var c=this.getCtx(),d=DvtTimelineStyleUtils.getAxisLabelStyle(this.Options);this._timeAxis=new DvtTimeComponentAxis(c,null,null,this._isVertical,this._zoomOrder);this._timeAxis.setConverter(this._converter);this._timeAxis.setType(DvtTimeComponentAxisFormatter.SHORT,this._dateFormatStrings);this._dates=[];this._labels=[];this._zoomLevelLengths=[];if(this._isVertical){var e=DvtTimeComponentAxis.DEFAULT_INTERVAL_HEIGHT;this._timeAxis.setDefaultConverter(this._resources.converterVert)}else e=
DvtTimeComponentAxis.DEFAULT_INTERVAL_WIDTH,this._timeAxis.setDefaultConverter(this._resources.converter);for(var g=0;g<this._timeAxis._zoomOrder.length;g++){var h=this._timeAxis._zoomOrder[g];this._timeAxis.setScale(h);var k=new DvtRect(c,0,0,0,0,"tempAxis"),m=Infinity,n=0,t=[],u=[],v=this._timeAxis.adjustDate(a).getTime();for(t.push(v);v<b;){var w=this._timeAxis.formatDate(this._timeAxis.adjustDate(v)),x=new DvtOutputText(c,w,0,0,"s_label"+v);x.setCSSStyle(d);x.time=v;u.push(x);w=this._timeAxis.getNextDate(this._timeAxis.adjustDate(v)).getTime();
k.addChild(x);var y=x.getDimensions();k.removeChild(x);this._isVertical?(x=y.h,y=y.w):(x=y.w,y=y.h);x=Math.max(e,x+2*DvtTimeComponentAxis.DEFAULT_INTERVAL_PADDING);v=(w-v)/x;v<m&&(m=v);y>n&&(n=y);v=w;t.push(v)}this._timeAxis.setContentSize(n+2*DvtTimeComponentAxis.DEFAULT_INTERVAL_PADDING);this._dates.push(t);this._labels.push(u);k=(b-a)/m;this._zoomLevelLengths.push(k);h==this._scale&&(this._zoomLevelOrder=g,this._setLength&&(this.setContentLength(k),this._setLength=!1,null==this._viewStartTime?
null!=this._viewEndTime?(this._viewStartTime=this._viewEndTime-this._canvasLength/k*(b-a),this._viewStartTime<this._start&&(this._viewStartTime=this._start),h=this._viewEndTime-this._viewStartTime,h=this._canvasLength/h,this.setContentLength(h*(this._end-this._start)),this._startPos=h*(this._start-this._viewStartTime),this.isRTL()&&!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos)):(this._viewStartTime=this._start,this._startPos=0,this.isRTL()&&!this._isVertical&&
(this._startPos=this._backgroundWidth-this._contentLength-this._startPos),this._viewEndTime=this._canvasLength/k*(b-a)+this._viewStartTime,this._viewEndTime>this._end&&(this._viewEndTime=this._end)):(this._viewEndTime=this._canvasLength/k*(b-a)+this._viewStartTime,this._viewEndTime>this._end&&(this._viewEndTime=this._end),h=this._viewEndTime-this._viewStartTime,h=this._canvasLength/h,this.setContentLength(h*(this._end-this._start)),this._startPos=h*(this._start-this._viewStartTime),this.isRTL()&&
!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos))));0==g&&(this._maxContentLength=u.length*this._canvasLength)}this._timeAxis.setScale(this._scale)};
DvtTimeline.prototype._populateSeries=function(){var a=this.Options.series;if(a){var b=Math.min(a.length,2);this._seriesOptions=[];if(this._series){if(b!=this._series.length){for(var c=0;c<this._series.length;c++)this._innerCanvas.removeChild(this._series[c]);this._series=[]}}else this._series=[];for(c=0;c<b;c++){var d=a[c];d.start=this._start;d.end=this._end;d.inverted=this._defaultInversions[c];d.orientation=this.Options.orientation;d.referenceObjects=this._referenceObjects;d.timeline=this;d.index=
c;d.animationOnDisplay=this.Options.animationOnDisplay;d.animationOnDataChange=this.Options.animationOnDataChange;this.Options.majorAxis&&(d.scale=this.Options.majorAxis.scale,d.timeAxis=this._seriesTimeAxis);if(d.styleDefaults=this.Options.styleDefaults)d.seriesStyleDefaults=this._seriesStyleDefaults,d.axisStyleDefaults=this._majorAxisStyleDefaults;this._seriesOptions.push(d);null==this._series[c]&&(d=new DvtTimelineSeries(this.getCtx(),this.HandleEvent,this),this._series.push(d))}}else this._series=
[]};DvtTimeline.prototype.onAnimationEnd=function(){DvtAgent.isEnvironmentBrowser()&&this.showThenHideHotspots(0)};
DvtTimeline.prototype._getOverviewObject=function(){var a=this._isVertical?"vertical":"horizontal",b=this._isVertical?this._resources.overviewHandleVert+'" _hw\x3d"15" _hh\x3d"3"':this._resources.overviewHandleHor+'" _hw\x3d"3" _hh\x3d"15"',c=this._referenceObjects&&0<this._referenceObjects.length&&this._referenceObjects[0],d=this._isVertical?"":'_ds\x3d"square" _dsx\x3d"1.3d" _dsy\x3d"0.9d" ',e=DvtTimelineStyleUtils.getOverviewBackgroundColor(this.Options),g=DvtTimelineStyleUtils.getOverviewLabelStyle(this.Options),
h=DvtTimelineStyleUtils.getOverviewWindowBackgroundColor(this.Options),k=DvtTimelineStyleUtils.getOverviewWindowBorderColor(this.Options),m=DvtTimelineStyleUtils.getReferenceObjectColor(this.Options);return'\x3ctimelineOverview renstart\x3d"'+this._viewStartTime+'" start\x3d"'+this._start+'" end\x3d"'+this._end+'" width\x3d"'+this._contentLength+'" orn\x3d"'+a+(c?'" ocd\x3d"'+this._referenceObjects[0].getTime():"")+'" _hbi\x3d"'+b+' ovp\x3d"below" selmode\x3d"'+this._selectionMode+'" rtl\x3d"'+this.isRTL()+
'" sid\x3d"ts1" _bts\x3d"none" _btc\x3d"#4f4f4f" _fc\x3d"#aadd77" '+d+'_do\x3d"0" _wbc\x3d"'+h+'" _wbts\x3d"solid" _wbrs\x3d"solid" _wbbs\x3d"solid" _wbls\x3d"solid" _wbtc\x3d"'+k+'" _wbrc\x3d"'+k+'" _wbbc\x3d"'+k+'" _wblc\x3d"'+k+'" _hfc\x3d"'+h+'" _obc\x3d"'+e+'" _ctic\x3d"'+m+'" _ls\x3d"'+g+'" _tic\x3d"#BCC7D2" _tabc\x3d"#D9DFE3" _tabo\x3d"0" _bs\x3d"solid" _bc\x3d"#648BAF" _bw\x3d"1px" _bof\x3d"0px" _dbs\x3d"solid" _dbc\x3d"#648BAF" _dbw\x3d"1px" _hbs\x3d"solid" _hbc\x3d"#85bbe7" _hbw\x3d"2px" _hbof\x3d"0px" _hgc\x3d"#ebeced" _hgo\x3d"1" _hdbs\x3d"solid" _hdbc\x3d"#85bbe7" _hdbw\x3d"2px" _sbs\x3d"solid" _sbc\x3d"#000000" _sbw\x3d"2px" _sbof\x3d"0px" _sbo\x3d"1" _sdbs\x3d"solid" _sdbc\x3d"#000000" _sdbw\x3d"2px" _asbs\x3d"solid" _asbc\x3d"#000000" _asbw\x3d"2px" _asbof\x3d"0px" _asbo\x3d"1" _asgc\x3d"#e4f0fa" _asgo\x3d"1" _asdbs\x3d"solid" _asdbc\x3d"#000000" _asdbw\x3d"2px" _aoc\x3d"off"\x3e'+
this._getMajorAxisXml()+this._getOverviewMarkersXml()+"\x3c/timelineOverview\x3e"};
DvtTimeline.prototype._getMajorAxisXml=function(){var a="\x3cticks\x3e";if(this._seriesTimeAxis)for(var b=this._start,c=this._end,d=this._isVertical?this.Height:this.Width,e=DvtTimeUtils.getPositionDate(b,c,this._fetchStartPos,d),g=this._seriesTimeAxis.adjustDate(e),e=new Date(g),g=DvtTimeUtils.getDatePosition(b,c,g,d);g<this._fetchEndPos;)var g=this._seriesTimeAxis.formatDate(this._seriesTimeAxis.adjustDate(e)),h=this._seriesTimeAxis.getNextDate(this._seriesTimeAxis.adjustDate(e)),k=DvtTimeUtils.getDatePosition(b,
c,h,d),a=a+('\x3ctick time\x3d"'+e.getTime()+'" label\x3d"'+g+'"/\x3e'),e=h,g=k;return a+"\x3c/ticks\x3e"};
DvtTimeline.prototype._getOverviewMarkersXml=function(){if(this._series){for(var a="\x3cmarkers\x3e",b=this._series.length,c=0;c<b;c++)for(var d=this._series[c]._items,e=0;e<d.length;e++){var g=d[e],a=a+('\x3cti rk\x3d"'+e),a=a+('" tid\x3d"'+g.getId()),a=a+('" t\x3d"'+g.getStartTime()),h=g.getEndTime();h&&(a+='" et\x3d"'+h,(g=g.getDurationFillColor())&&(a+='" dfc\x3d"'+g));a+='" _sd\x3d"true"/\x3e'}return a+"\x3c/markers\x3e"}};
DvtTimeline.prototype.HandleTouchStart=function(a){if(1==a.touches.length){if(this._dragPanSeries=this._findSeries(a.target))var b=this._series[0]==this._dragPanSeries?0:1;this.showThenHideHotspots(0,b)}};
DvtTimeline.prototype.beginPinchZoom=function(a,b,c,d){this._initialPinchZoomLoc=this._isVertical?Math.sqrt((b-d)*(b-d))+(b<d?b:d):Math.sqrt((a-c)*(a-c))+(a<c?a:c);this._initialPinchZoomTime=(this._end-this._start)/this._contentLength*this._initialPinchZoomLoc+this._viewStartTime;this._initialPinchZoomDist=Math.sqrt((a-c)*(a-c)+(b-d)*(b-d));this._initialPinchZoomLength=this._contentLength};
DvtTimeline.prototype.HandleMouseWheel=function(a){DvtEventManager.consumeEvent(a);var b=a.wheelDelta;if(this.hasValidOptions()&&b){var c=this.getCtx().getStageAbsolutePosition();a=this._isVertical?a.pageY-c.y:a.pageX-c.x;c=(this._end-this._start)/this._contentLength*a+this._viewStartTime;b=.02*b+1;this.handleZoomWheel(this.getContentLength()*b,c,a,!0)}};
DvtTimeline.prototype.handleZoomWheel=function(a,b,c,d){a>this._maxContentLength?(a=this._maxContentLength,this.disableZoomButton(!0)):this.enableZoomButton(!0);this._canvasLength>a?(a=this._canvasLength,this.disableZoomButton(!1)):this.enableZoomButton(!1);var e=this._contentLength<=a,g=(this._viewEndTime-this._viewStartTime)/(this._end-this._start)*this._contentLength;this.setContentLength(a);a=g/this._contentLength*(this._end-this._start);b?(g=(this._end-this._start)/this._contentLength,this._viewStartTime=
b-c*g,this._viewStartTime<this._start&&(this._viewStartTime=this._start),this._viewEndTime=this._viewStartTime+a,this._viewEndTime>this._end&&(this._viewEndTime=this._end,this._viewStartTime=this._viewEndTime-a,this._viewStartTime<this._start&&(this._viewStartTime=this._start)),this._startPos=1/g*(this._start-this._viewStartTime)):(this._viewStartTime=this._start,this._viewEndTime=this._viewStartTime+a,this._viewStartTime<this._start&&(this._viewStartTime=this._start),this._startPos=0);this.isRTL()&&
!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos);this._hasOverview&&this._overview.setViewportRange(this._viewStartTime,this._viewEndTime,this._isVertical?this._overview.Height:this._overview.Width);if(e)for(;0<this._zoomLevelOrder;)if(b=this._zoomLevelLengths[this._zoomLevelOrder-1],this._contentLength>=b)this._zoomLevelOrder--,this._timeAxis.decreaseScale(),this._scale=this._timeAxis._scale;else break;else for(;this._zoomLevelOrder<this._zoomLevelLengths.length-
1;)if(b=this._zoomLevelLengths[this._zoomLevelOrder],this._contentLength<b)this._zoomLevelOrder++,this._timeAxis.increaseScale(),this._scale=this._timeAxis._scale;else break;this.applyAxisStyleValues();DvtTimelineRenderer._renderAxis(this,this._innerCanvas);this.updateSeries();this._isVertical?this._innerCanvas.setTranslateY(this._startY+this._startPos):this._innerCanvas.setTranslateX(this._startX+this._startPos);d&&this.__dispatchEvent(new DvtTimelineViewportChangeEvent(DvtTimelineViewportChangeEvent.TYPE,
this._viewStartTime,this._viewEndTime,this._scale))};DvtTimeline.prototype.handleZoom=function(a){a?this.zoomBy(1/DvtTimeline.ZOOM_BY_VALUE):this.zoomBy(DvtTimeline.ZOOM_BY_VALUE)};DvtTimeline.prototype.zoomBy=function(a){a=(1/a-1)/2+1;var b=this._isVertical?this.Height/2:this.Width/2,c=(this._end-this._start)/this._contentLength*b+this._viewStartTime;this.handleZoomWheel(this.getContentLength()*a,c,b,!0)};
DvtTimeline.prototype.updateSeries=function(){if(this._series){var a=this._series.length,b=this.getTimeAxisVisibleSize(a);this._seriesSize=(this._canvasSize-b)/a;for(var c=0;c<a;c++){var d=this._series[c];d.setClipPath(null);var e=new DvtClipPath;if(this._isVertical){var g=this.isRTL()?Math.abs(c-1):c;this.isRTL()&&1==this._series.length?(e.addRect(b,0,this._seriesSize,this._contentLength),g=new DvtMatrix(1,0,0,1,b,0)):(e.addRect(g*(this._seriesSize+b),0,this._seriesSize,this._contentLength),g=new DvtMatrix(1,
0,0,1,g*(this._seriesSize+b),0));var h=this._seriesSize,k=this._contentLength}else e.addRect(0,c*(this._seriesSize+b),this._contentLength,this._seriesSize),g=new DvtMatrix(1,0,0,1,0,c*(this._seriesSize+b)),h=this._contentLength,k=this._seriesSize;d.setClipPath(e);d.setMatrix(g);d.reRender(h,k)}}};
DvtTimeline.prototype._handleResize=function(a,b){this.Width=a;this.Height=b;this.applyStyleValues();this._fetchStartPos=0;this._fetchEndPos=this._isVertical?b:a;this.prepareViewportLength();DvtTimelineRenderer._renderBackground(this);if(this.hasValidOptions()){if(DvtTimelineRenderer._renderInnerCanvas(this,this._canvas),this.applyAxisStyleValues(),this.updateSeries(),DvtTimelineRenderer._renderAxis(this,this._innerCanvas),DvtTimelineRenderer._renderSeriesLabels(this),DvtTimelineRenderer._renderScrollHotspots(this),
DvtTimelineRenderer._renderZoomControls(this),this._hasOverview&&(DvtTimelineRenderer._renderOverview(this),this.SelectionHandler)){var c=this.SelectionHandler.getSelectedIds();if(c&&0!=c.length)for(var d=0;d<c.length;d++)this._overview.selSelectItem(c[d])}}else DvtTimelineRenderer._renderEmptyText(this)};
DvtTimeline.prototype.HandleKeyDown=function(a){DvtKeyboardEvent.RIGHT_ARROW!=a.keyCode&&DvtKeyboardEvent.LEFT_ARROW!=a.keyCode&&DvtKeyboardEvent.DOWN_ARROW!=a.keyCode&&DvtKeyboardEvent.UP_ARROW!=a.keyCode||this.updateScrollForItemNavigation(this.EventManager.getFocus())};DvtTimeline.prototype.HandleMouseDown=function(a){this._dragPanSeries=this._findSeries(a.target)};DvtTimeline.prototype.beginDragPan=function(a,b){this._currentX=a;this._currentY=b};
DvtTimeline.prototype.HandleTouchEnd=function(a){"none"!=this._selectionMode&&this.handleShapeClick(a,"multiple"==this._selectionMode)};DvtTimeline.prototype.HandleMouseClick=function(a){this.handleShapeClick(a,a.ctrlKey&&"multiple"==this._selectionMode)};DvtTimeline.prototype.endDragPan=function(){this._dragPanSeries=null;this.endPan()};
DvtTimeline.prototype.endPan=function(){this._triggerViewportChange&&(this._triggerViewportChange=!1,this.__dispatchEvent(new DvtTimelineViewportChangeEvent(DvtTimelineViewportChangeEvent.TYPE,this._viewStartTime,this._viewEndTime,this._scale)))};
DvtTimeline.prototype.endPinchZoom=function(){this._initialPinchZoomTime=this._initialPinchZoomLength=this._initialPinchZoomLoc=this._initialPinchZoomDist=null;this._triggerViewportChange&&(this._triggerViewportChange=!1,this.__dispatchEvent(new DvtTimelineViewportChangeEvent(DvtTimelineViewportChangeEvent.TYPE,this._viewStartTime,this._viewEndTime,this._scale)))};
DvtTimeline.prototype.contPinchZoom=function(a,b,c,d){a=Math.sqrt((a-c)*(a-c)+(b-d)*(b-d));a!=this._initialPinchZoomDist&&(this._triggerViewportChange=!0);this.handleZoomWheel(a/this._initialPinchZoomDist*this._initialPinchZoomLength,this._initialPinchZoomTime,this._initialPinchZoomLoc,!1)};
DvtTimeline.prototype.contDragPan=function(a,b){if(this._currentX&&this._currentY){var c=this._currentX-a,d=this._currentY-b;if(0==c&&0==d)return!1;this._triggerViewportChange=!0;this._currentX=a;this._currentY=b;this.panBy(c,d);return!0}return!1};
DvtTimeline.prototype.panBy=function(a,b){var c=this.getTimeAxisVisibleSize(this._series.length);if(this._isVertical){var d,e;if(this._dragPanSeries){var g=this._dragPanSeries.getTranslateX()-a;1<this._series.length&&(!this.isRTL()&&this._dragPanSeries._isInverted||this.isRTL()&&!this._dragPanSeries._isInverted)?(d=c+2*this._dragPanSeries.Width-this._dragPanSeries._maxOverflowValue,e=this._dragPanSeries.Width+c):this.isRTL()&&!this._dragPanSeries._isInverted?(d=this._dragPanSeries.Width-this._dragPanSeries._maxOverflowValue+
c,e=c):(d=0,e=this._dragPanSeries._maxOverflowValue-this._dragPanSeries.Width);g<d?g=d:g>e&&(g=e);this._dragPanSeries.setTranslateX(g)}d=this._innerCanvas.getTranslateY()-b;e=-(this._contentLength-this._canvasLength-this._startY);c=this._startY;d<e?d=e:d>c&&(d=c);this._innerCanvas.setTranslateY(d);this._startPos=d-this._startY;d=this.getContentLength()/(this._end-this._start);e=this._viewEndTime-this._viewStartTime;this._viewStartTime=this._start-this._startPos/d;this._viewEndTime=this._viewStartTime+
e;this._hasOverview&&(d=this._overview.Height,this._overview.setViewportRange(this._viewStartTime,this._viewEndTime,d))}else g=this._innerCanvas.getTranslateX()-a,d=-(this._contentLength-this._canvasLength-this._startX),e=this._startX,g<d?g=d:g>e&&(g=e),this._innerCanvas.setTranslateX(g),this._startPos=g-this._startX,this.isRTL()&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos),d=this.getContentLength()/(this._end-this._start),e=this._viewEndTime-this._viewStartTime,this._viewStartTime=
this._start-this._startPos/d,this._viewEndTime=this._viewStartTime+e,this.isRTL()&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos),this._hasOverview&&(d=this._overview.Width,this._overview.setViewportRange(this._viewStartTime,this._viewEndTime,d)),this._dragPanSeries&&(d=this._dragPanSeries.getTranslateY()-b,this._dragPanSeries._isInverted?(e=c+2*this._dragPanSeries.Height-this._dragPanSeries._maxOverflowValue,c=this._dragPanSeries.Height+c):(e=0,c=this._dragPanSeries._maxOverflowValue-
this._dragPanSeries.Height),d<e?d=e:d>c&&(d=c),this._dragPanSeries.setTranslateY(d))};
DvtTimeline.prototype.HandleEvent=function(a,b){var c=a.getType();if("selection"==c||"dvtAct"==c)DvtEventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,a);else if("overview"==c){c=a.getSubType();if("rangeChanging"==c||"rangeChange"==c){var d=this._viewEndTime-this._viewStartTime;this._viewStartTime=a.getNewStartTime();this._viewEndTime=a.getNewEndTime();var e=this._viewEndTime-this._viewStartTime;if(0<e){var g=this._canvasLength/e;this.setContentLength(g*(this._end-this._start));this._startPos=
g*(this._start-this._viewStartTime);this.isRTL()&&!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos);if(d>e){d=this._zoomLevelLengths.length;for(e=this._zoomLevelLengths[d-1];this._contentLength>=e&&0<d;)d--,e=this._zoomLevelLengths[d-1];d==this._zoomLevelLengths.length&&d--}else for(d=0,e=this._zoomLevelLengths[d];this._contentLength<e&&d<this._zoomLevelLengths.length-1;)d++,e=this._zoomLevelLengths[d];this._zoomLevelOrder=d;this._timeAxis.setScale(this._timeAxis._zoomOrder[d]);
this._scale=this._timeAxis._scale;this.applyAxisStyleValues();DvtTimelineRenderer._renderAxis(this,this._innerCanvas);this.updateSeries();this._isVertical?this._innerCanvas.setTranslateY(this._startY+this._startPos):this._innerCanvas.setTranslateX(this._startX+this._startPos)}"rangeChange"==c&&this.__dispatchEvent(new DvtTimelineViewportChangeEvent(DvtTimelineViewportChangeEvent.TYPE,this._viewStartTime,this._viewEndTime,this._scale))}if("scrollPos"==c||"scrollTime"==c)this._viewStartTime=a.getNewStartTime(),
this._viewEndTime=a.getNewEndTime(),g=this.getContentLength()/(this._end-this._start),this._startPos=g*(this._start-this._viewStartTime),this.isRTL()&&!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-this._startPos),this._isVertical?this._innerCanvas.setTranslateY(this._startY+this._startPos):this._innerCanvas.setTranslateX(this._startX+this._startPos),this.__dispatchEvent(new DvtTimelineViewportChangeEvent(DvtTimelineViewportChangeEvent.TYPE,this._viewStartTime,this._viewEndTime,
this._scale))}else if(c=a.getSubType(),"selection"==c)for(var h=a.getItemId(),k=a.isMultiSelect()&&"multiple"==this._selectionMode,c=0;c<this._series.length;c++)for(d=this._series[c],e=0;e<d._items.length;e++){if(g=d._items[e],g.getId()==h){this.SelectionHandler._addToSelection(g,k);this.EventManager.setFocusObj(g);this.updateScrollForItemSelection(g);break}}else if("highlight"==c)for(h=a.getItemId(),c=0;c<this._series.length;c++)for(d=this._series[c],e=0;e<d._items.length;e++){if(g=d._items[e],g.getId()==
h){g.showHoverEffect(!0);break}}else if("unhighlight"==c)for(h=a.getItemId(),c=0;c<this._series.length;c++)for(d=this._series[c],e=0;e<d._items.length;e++)if(g=d._items[e],g.getId()==h){g.hideHoverEffect(!0);break}};DvtTimeline.prototype.enableZoomButton=function(a){a?(this.zoomin.setEnabled(!0),this.zoomin.drawUpState()):(this.zoomout.setEnabled(!0),this.zoomout.drawUpState())};
DvtTimeline.prototype.disableZoomButton=function(a){a?(this.zoomin.setEnabled(!1),this.zoomin.drawDisabledState(),this.zoomin.setCursor(null)):(this.zoomout.setEnabled(!1),this.zoomout.drawDisabledState(),this.zoomout.setCursor(null))};
DvtTimeline.prototype.updateScrollForItemSelection=function(a){var b=this._viewEndTime-this._viewStartTime;this._viewStartTime=a.getStartTime()-b/2;this._viewStartTime<this._start?this._viewStartTime=this._start:this._viewStartTime+b>this._end&&(this._viewStartTime=this._end-b);this._viewEndTime=this._viewStartTime+b;this._startPos=this.getContentLength()/(this._end-this._start)*(this._start-this._viewStartTime);this.isRTL()&&!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-
this._startPos);this._isVertical?this._innerCanvas.setTranslateY(this._startY+this._startPos):this._innerCanvas.setTranslateX(this._startX+this._startPos);this.__dispatchEvent(new DvtTimelineViewportChangeEvent(DvtTimelineViewportChangeEvent.TYPE,this._viewStartTime,this._viewEndTime,this._scale))};
DvtTimeline.prototype.updateScrollForItemNavigation=function(a){var b=this._isVertical?a.getHeight():a.getWidth(),c=DvtTimelineStyleUtils.getItemHoverStrokeWidth();a=a.getLoc()-(this._isVertical?b/2+c:DvtTimelineStyleUtils.getBubbleOffset()+c);this.isRTL()&&!this._isVertical&&(a-=c,this._startPos=this._backgroundWidth-this._contentLength-this._startPos);b=a+b+2*c;c=this._startPos-this._canvasLength;-a>this._startPos?this._startPos=-a:-b<c&&(this._startPos=-b+this._canvasLength);a=this.getContentLength()/
(this._end-this._start);b=this._viewEndTime-this._viewStartTime;this._viewStartTime=this._start-this._startPos/a;this._viewStartTime<this._start&&(this._viewStartTime=this._start,this._startPos=(this._start-this._viewStartTime)*a);this._viewEndTime=this._viewStartTime+b;this._viewEndTime>this._end&&(this._viewEndTime=this._end,this._viewStartTime=this._viewEndTime-b,this._startPos=(this._start-this._viewStartTime)*a);this.isRTL()&&!this._isVertical&&(this._startPos=this._backgroundWidth-this._contentLength-
this._startPos);this._isVertical?this._innerCanvas.setTranslateY(this._startY+this._startPos):this._innerCanvas.setTranslateX(this._startX+this._startPos);this._hasOverview&&this._overview.setViewportRange(this._viewStartTime,this._viewEndTime,this._isVertical?this._overview.Height:this._overview.Width);this.__dispatchEvent(new DvtTimelineViewportChangeEvent(DvtTimelineViewportChangeEvent.TYPE,this._viewStartTime,this._viewEndTime,this._scale))};
DvtTimeline.prototype.handleShapeClick=function(a){if(a&&(a=this._findDrawable(a.target))){var b=this._findSeries(a);a._node&&(b=this._findSeries(a),b.HandleItemAction(a._node))}};DvtTimeline.prototype.applyInitialSelections=function(){if(this.Options.selection)for(var a=[],b=0;b<this._series.length;b++)for(var c=this._series[b],d=0;d<c._items.length;d++)a.push(c._items[d]);this.SelectionHandler.processInitialSelections(this.Options.selection,a)};
DvtTimeline.prototype.processEvent=function(a){a&&this.__dispatchEvent(a)};DvtTimeline.prototype._findSeries=function(a){if(this.hasValidOptions()&&a&&a!=this){var b=a.getId();return a==this._series[0]||1<this._series.length&&a==this._series[1]?a:b&&"_s0"==b.substring(b.length-3,b.length)?this._series[0]:b&&"_s1"==b.substring(b.length-3,b.length)?this._series[1]:this._findSeries(a.getParent())}return null};
DvtTimeline.prototype._findDrawable=function(a){if(a){var b=a.getId();if(b&&"_duration_"==b.substring(0,10)&&a._node)return a;var c=a.getParent();if(c){if(b&&"zoom"==b.substring(0,4))return a;if(b&&"_bubble_"==b.substring(0,8)&&c._node)return c;if(a=c.getParent()){if(b&&"_bubble_"==b.substring(0,8)&&a._node)return a;if((b=a.getId())&&"_bubble_"==b.substring(0,8)&&a.getParent())return a.getParent()}}}return null};
DvtTimeline.prototype.getAutomation=function(){this.Automation||(this.Automation=new DvtTimelineAutomation(this));return this.Automation};DvtTimeline.prototype.__getEventManager=function(){return this.EventManager};DvtTimeline.prototype.clearTimeline=function(){this._canvas&&this._canvas.removeChildren();this.clearOverview()};DvtTimeline.prototype.clearOverview=function(){this._overviewCanvas&&(this.removeChild(this._overviewCanvas),this._overviewCanvas=null)};
var DvtTimelineAutomation=function(a){this._timeline=a};DvtObj.createSubclass(DvtTimelineAutomation,DvtAutomation,"DvtTimelineAutomation");DvtTimelineAutomation.TIMELINE_ITEM_STRING="timelineItem";
DvtTimelineAutomation.prototype.GetSubIdForDomElement=function(a){if((a=this._timeline.EventManager.GetLogicalObject(a))&&a instanceof DvtTimelineSeriesNode)for(var b=0;b<this._timeline._series.length;b++){var c=this._timeline._series[b]._items.indexOf(a);if(-1!=c)return DvtTimelineAutomation.TIMELINE_ITEM_STRING+"["+b+"]["+c+"]"}return null};
DvtTimelineAutomation.prototype.getDomElementForSubId=function(a){if(a){var b=a.indexOf("[");if(0<b&&a.substring(0,b)===DvtTimelineAutomation.TIMELINE_ITEM_STRING){var c=a.indexOf("]");if(0<c&&(b=parseInt(a.substring(b+1,c)),a=parseInt(a.substring(c+2,a.length-1)),c=this._timeline._series[b])&&(a=c._items[a]))return a.getDisplayables()[0].getElem()}}return null};var DvtTimelineDefaults=function(){this.Init({alta:DvtTimelineDefaults.VERSION_1})};
DvtObj.createSubclass(DvtTimelineDefaults,DvtBaseComponentDefaults,"DvtTimelineDefaults");
DvtTimelineDefaults.VERSION_1={animationOnDataChange:"none",animationOnDisplay:"none",orientation:"horizontal",overview:{rendered:"off"},selectionMode:"none",styleDefaults:{animationDuration:500,borderColor:"#d9dfe3",item:{backgroundColor:"#ffffff",borderColor:"#648baf",descriptionStyle:new DvtCSSStyle("font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 12px; color: #084B8A; white-space: nowrap;"),hoverBorderColor:"#85bbe7",selectedBorderColor:"#000000",titleStyle:new DvtCSSStyle("font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 12px; font-weight: bold; color: #000000; white-space: nowrap;")},
majorAxis:{labelStyle:new DvtCSSStyle("font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: bold; color: #4f4f4f; background-color: rgba(249,249,249,0.8); white-space: nowrap;"),separatorColor:"#bcc7d2"},minorAxis:{backgroundColor:"#f9f9f9",borderColor:"#d9dfe3",labelStyle:new DvtCSSStyle("font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 12px; color: #333333;"),separatorColor:"#bcc7d2"},overview:{backgroundColor:"#e6ecf3",labelStyle:new DvtCSSStyle("font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 12px; font-weight: bold; color: #4f4f4f;"),
window:{backgroundColor:"#ffffff",borderColor:"#4f4f4f"}},referenceObject:{color:"#ff591f"},series:{backgroundColor:"#f9f9f9",colors:DvtCSSStyle.COLORS_ALTA,emptyTextStyle:new DvtCSSStyle("font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 12px; font-weight: normal; color: #333333; white-space: nowrap;"),labelStyle:new DvtCSSStyle("font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 13px; font-weight: bold; color: #252525; background-color: rgba(249,249,249,0.8); white-space: nowrap;")}}};
var DvtTimelineParser=function(){};DvtObj.createSubclass(DvtTimelineParser,DvtObj,"DvtTimelineParser");
DvtTimelineParser.prototype.parse=function(a){this._itemSelection=a.selectionMode;a.viewportStart&&(this._viewStartTime=new Date(a.viewportStart));a.viewportEnd&&(this._viewEndTime=new Date(a.viewportEnd));this._startTime=new Date(a.start);this._endTime=new Date(a.end);var b=this.ParseRootAttributes();b.inlineStyle=a.style;var c=a.minorAxis;if(c){var d=c.scale;b.scale=d;var e=c.zoomOrder;null==e?e=[d]:e.reverse();b.zoomOrder=e;b.converter=c.converter;b.axisStyle=c.style}if(c=a.majorAxis)b.seriesScale=
c.scale,b.seriesConverter=c.converter;b.shortDesc=a.shortDesc;b.id=a.id;b.orientation=a.orientation;if((c=a.referenceObjects)&&0<c.length){d=[];for(e=0;e<c.length;e++)d.push(new Date(c[e].value));b.referenceObjects=d}a=a.overview;b.hasOverview=null!=a&&"on"==a.rendered?!0:!1;return b};
DvtTimelineParser.prototype.ParseRootAttributes=function(){var a={};a.origStart=this._startTime;a.origEnd=this._endTime;a.orientation="horizontal";a.start=this._startTime.getTime();a.end=this._endTime.getTime();this._viewStartTime&&(a.viewStart=this._viewStartTime.getTime());this._viewEndTime&&(a.viewEnd=this._viewEndTime.getTime());a.selectionMode="none";null!=this._itemSelection&&(a.selectionMode=this._itemSelection);return a};var DvtTimelineRenderer={};
DvtObj.createSubclass(DvtTimelineRenderer,DvtObj,"DvtTimelineRenderer");
DvtTimelineRenderer.renderTimeline=function(a){DvtTimelineRenderer._renderBackground(a);DvtTimelineRenderer._renderScrollableCanvas(a);if(a.hasValidOptions()){DvtTimelineRenderer._renderInnerCanvas(a,a._canvas);DvtTimelineRenderer._renderSeries(a,a._innerCanvas);DvtTimelineRenderer._renderSeriesLabels(a);DvtTimelineRenderer._renderAxis(a,a._innerCanvas);a._hasOverview?DvtTimelineRenderer._renderOverview(a):a.clearOverview();if(a._keyboardHandler)for(var b=0;b<a._series.length;b++){var c=a._series[b];
if(c._items&&0<c._items.length){a.EventManager.setFocusObj(c._items[0]);break}}DvtTimelineRenderer._renderScrollHotspots(a);DvtTimelineRenderer._renderZoomControls(a);a.SelectionHandler&&a.applyInitialSelections();DvtTimeUtils.supportsTouch()&&a._setAriaProperty("flowto",a._series[0].getId());for(b=0;b<a._series.length;b++)c=a._series[b],c.triggerAnimations();DvtAgent.isEnvironmentBrowser()&&!a.isAnimating()&&a.showThenHideHotspots(0)}else DvtTimelineRenderer._renderEmptyText(a)};
DvtTimelineRenderer._renderBackground=function(a){a._background?(a._background.setClipPath(null),a._background.setWidth(a._backgroundWidth),a._background.setHeight(a._backgroundHeight)):a._background=new DvtRect(a.getCtx(),0,0,a._backgroundWidth,a._backgroundHeight,"bg");a._background.setCSSStyle(a._style);a._background.setPixelHinting(!0);var b=new DvtClipPath;b.addRect(0,0,a._backgroundWidth,a._backgroundHeight);a._background.setClipPath(b);a._background.getParent()!=a&&a.addChild(a._background)};
DvtTimelineRenderer._renderScrollableCanvas=function(a){a._canvas||(a._canvas=new DvtContainer(a.getCtx(),"canvas"),a.addChild(a._canvas))};
DvtTimelineRenderer._renderInnerCanvas=function(a,b){a._innerCanvas?a._innerCanvas.setClipPath(null):a._innerCanvas=new DvtContainer(a.getCtx(),"iCanvas");var c=new DvtClipPath;a.isVertical()?(c.addRect(a._startX,a._startY,a._canvasSize,a._canvasLength),a._innerCanvas.setTranslateX(a._startX),a._innerCanvas.setTranslateY(a._startY+a._startPos)):(c.addRect(a._startX,a._startY,a._canvasLength,a._canvasSize),a._innerCanvas.setTranslateX(a._startX+a._startPos),a._innerCanvas.setTranslateY(a._startY));
b.setClipPath(c);a._innerCanvas.getParent()!=b&&b.addChild(a._innerCanvas)};
DvtTimelineRenderer._renderSeries=function(a,b){if(a._series){var c=a.getCtx(),c=DvtAgent.isRightToLeft(c),d=a._series.length,e=a.getTimeAxisVisibleSize(d);!a.isVertical()&&1<d&&a._canvasSize%2!=e%2&&(a._timeAxis.setContentSize(a._timeAxis.getContentSize()+1),e=a.getTimeAxisVisibleSize(d));a._seriesSize=(a._canvasSize-e)/d;for(var g=0;g<d;g++){var h=a._series[g];h.setClipPath(null);var k=new DvtClipPath;if(a.isVertical()){var m=c?Math.abs(g-1):g;c&&1==a._series.length?(k.addRect(e,0,a._seriesSize,
a._contentLength),m=new DvtMatrix(1,0,0,1,e,0)):(k.addRect(m*(a._seriesSize+e),0,a._seriesSize,a._contentLength),m=new DvtMatrix(1,0,0,1,m*(a._seriesSize+e),0));var n=a._seriesSize,t=a._contentLength}else k.addRect(0,g*(a._seriesSize+e),a._contentLength,a._seriesSize),m=new DvtMatrix(1,0,0,1,0,g*(a._seriesSize+e)),n=a._contentLength,t=a._seriesSize;h.setClipPath(k);h.setMatrix(m);h.getParent()!=b&&b.addChild(h);h.render(a._seriesOptions[g],n,t)}}};
DvtTimelineRenderer._renderSeriesLabels=function(a){if(a._series){var b=a.getCtx(),c=DvtAgent.isRightToLeft(b);if(a._seriesLabels)for(var d=0;d<a._seriesLabels.length;d++)a.removeChild(a._seriesLabels[d]);a._seriesLabels=[];for(var e=a._series.length,g=DvtTimelineStyleUtils.getSeriesLabelSpacing(),h=2*DvtTransientButton._DEFAULT_RADIUS+6,k=2*g,d=0;d<e;d++){var m=a._series[d],n=m.getLabel();if(null!=n){var t=DvtTimelineStyleUtils.getSeriesLabelStyle(a.Options),n=new DvtOutputText(b,n,0,0,"sl_s"+d);
n.setCSSStyle(t);a.addChild(n);var u=n.getDimensions();a.removeChild(n);var v=a.isVertical()?a._seriesSize:a._canvasLength,v=Math.min(u.w,v-(d-1)*-h-k),w=DvtTimelineStyleUtils.getSeriesLabelPadding(),x=new DvtRect(b,0,0,v+2*w,u.h+2*w,"slb_s"+d);x.setCSSStyle(t);x.setCornerRadius(3);if(a.isVertical())t=c?Math.abs(d-1)*(a._canvasSize-v-k)+g+a._startX+(d-1)*h:d*(a._canvasSize-v-k)+g+a._startX+(d-1)*-h,y=a._startY+g;else var t=c?a._canvasLength-v-g-(d-1)*-h:a._startX+g+(d-1)*-h,y=d*(a._canvasSize-u.h-
k)+g+a._startY;u=new DvtMatrix(1,0,0,1,t,y);n.setMatrix(u);u=new DvtMatrix(1,0,0,1,t-w,y-w);x.setMatrix(u);a.addChild(x);DvtTextUtils.fitText(n,v,Infinity,a);a._seriesLabels.push(x);a._seriesLabels.push(n)}m._isEmpty&&(m=m.getEmptyText(),null!=m&&(m=new DvtOutputText(b,m,0,0,"et_s"+d),m.setCSSStyle(DvtTimelineStyleUtils.getEmptyTextStyle(a.Options)),a.addChild(m),u=m.getDimensions(),a.removeChild(m),u=new DvtMatrix(1,0,0,1,(a._canvasLength-u.w)/2+a._startX,d*(a._seriesSize+a.getTimeAxisVisibleSize(e))+
(a._seriesSize-u.h)/2+a._startY),m.setMatrix(u),a.addChild(m),a._seriesLabels.push(m)))}}};
DvtTimelineRenderer._renderAxis=function(a,b){var c=a.getCtx(),d=DvtAgent.isRightToLeft(c),e=a._series.length,g=a.getTimeAxisSize(),h=a.getTimeAxisVisibleSize(e),e=1==e?a._canvasSize-h:a._canvasSize/e-h/2;d&&a.isVertical()&&1==a._series.length&&(e=0);null==a._axis?(d=new DvtClipPath,a.isVertical()?(a._axis=new DvtRect(c,e,-a._axisBorderWidth,g,a._axisLength,"axis"),d.addRect(e,0,g,a._contentLength)):(a._axis=new DvtRect(c,-a._axisBorderWidth,e,a._axisLength,g,"axis"),d.addRect(0,e,a._contentLength,
g)),a._axis.setCSSStyle(a._axisStyle),a._axis.setPixelHinting(!0),a._axis.setClipPath(d),b.addChild(a._axis)):(a._axis.setClipPath(null),d=new DvtClipPath,a.isVertical()?(a._axis.setX(e),a._axis.setY(-a._axisBorderWidth),a._axis.setWidth(g),a._axis.setHeight(a._axisLength),d.addRect(e,0,g,a._contentLength)):(a._axis.setX(-a._axisBorderWidth),a._axis.setY(e),a._axis.setWidth(a._axisLength),a._axis.setHeight(g),d.addRect(0,e,a._contentLength,g)),a._axis.setClipPath(d));DvtTimelineRenderer._renderSeriesTicks(a,
e)};
DvtTimelineRenderer._renderSeriesTicks=function(a,b){a._axis.removeChildren();var c=new DvtCSSStyle(DvtTimelineStyleUtils.getAxisSeparatorStyle());if(a._axisStyleDefaults){var d=a._axisStyleDefaults.separatorColor;d&&c.parseInlineStyle("color:"+d+";")}a._separatorStroke=new DvtSolidStroke(c.getStyle(DvtCSSStyle.COLOR));c=a._timeAxis.getContentSize();d=b+a._timeAxis._borderWidth;DvtTimelineRenderer._renderTimeAxis(a,a._fetchStartPos,a._fetchEndPos,a._axis,a._contentLength,d+c,d,d);DvtTimelineRenderer._renderSeriesTimeAxis(a,a._fetchStartPos,
a._fetchEndPos,a._innerCanvas,a._contentLength)};
DvtTimelineRenderer._renderTimeAxis=function(a,b,c,d,e,g,h,k){var m=a.getCtx(),n=DvtAgent.isRightToLeft(m),m=new DvtContainer(m,"block_"+b+"_"+c);m.startPos=b;m.endPos=c;d.addChild(m);b=a._dates[a._zoomLevelOrder];c=a._labels[a._zoomLevelOrder];for(d=0;d<b.length-1;d++){var t=b[d],u=b[d+1],v=DvtTimeUtils.getDatePosition(a._start,a._end,t,e),u=DvtTimeUtils.getDatePosition(a._start,a._end,u,e),w=u-v;0!=v&&((a.isVertical()?a.addTick(m,g,h,v,v,a._separatorStroke,"s_tick"+t):n?a.addTick(m,e-v,e-v,g,h,
a._separatorStroke,"s_tick"+t):a.addTick(m,v,v,g,h,a._separatorStroke,"s_tick"+t)).time=t);a.isVertical()?a.addAxisLabel(m,c[d],k+(g-k)/2,v+(u-v)/2-7,g-k):n?a.addAxisLabel(m,c[d],e-(v+(u-v)/2),k+2,w):a.addAxisLabel(m,c[d],v+(u-v)/2,k+2,w)}};
DvtTimelineRenderer._renderSeriesTimeAxis=function(a,b,c,d,e){var g=a.getCtx(),g=DvtAgent.isRightToLeft(g);if(a._majorAxisLabels)for(var h=0;h<a._majorAxisLabels.length;h++)d.removeChild(a._majorAxisLabels[h]);a._majorAxisLabels=[];if(a._seriesScale){var h=a._start,k=a._end;b=DvtTimeUtils.getPositionDate(h,k,b,e);var m=a._seriesTimeAxis.adjustDate(b);b=new Date(m);for(m=DvtTimeUtils.getDatePosition(h,k,m,e);m<c;){var n=a._seriesTimeAxis.formatDate(a._seriesTimeAxis.adjustDate(b)),t=a._seriesTimeAxis.getNextDate(a._seriesTimeAxis.adjustDate(b)),
u=DvtTimeUtils.getDatePosition(h,k,t,e),v=u-m,w=m;(g?a.isVertical()?a.addLabel(d,a._canvasSize-5,n,v,w+18,DvtTimelineStyleUtils.getSeriesAxisLabelStyle(a.Options),"o_label"+m+"_s0",!0,DvtTimelineStyleUtils.getSeriesAxisLabelPadding(),a._majorAxisLabels,g):a.addLabel(d,e-(w+5),n,v,a._seriesSize-2,DvtTimelineStyleUtils.getSeriesAxisLabelStyle(a.Options),"o_label"+m+"_s0",!0,DvtTimelineStyleUtils.getSeriesAxisLabelPadding(),a._majorAxisLabels,g):a.isVertical()?a.addLabel(d,5,n,v,w+18,DvtTimelineStyleUtils.getSeriesAxisLabelStyle(a.Options),
"o_label"+m+"_s0",!0,DvtTimelineStyleUtils.getSeriesAxisLabelPadding(),a._majorAxisLabels,g):a.addLabel(d,w+5,n,v,a._seriesSize-2,DvtTimelineStyleUtils.getSeriesAxisLabelStyle(a.Options),"o_label"+m+"_s0",!0,DvtTimelineStyleUtils.getSeriesAxisLabelPadding(),a._majorAxisLabels,g)).time=b.getTime();b=t;m=u}}};
DvtTimelineRenderer._renderOverview=function(a){var b=a.getCtx(),c=DvtAgent.isRightToLeft(b);if(null==a._overviewCanvas){var d=!0;a._overviewCanvas=new DvtContainer(b,"oCanvas")}else a._overviewCanvas.removeChildren();var e=a._style.getBorderWidth(),g=e/2;if(a.isVertical()){var h=a._overviewSize,e=a.Height-e;c?a._overviewCanvas.setTranslateX(g):a._overviewCanvas.setTranslateX(a.Width-a._overviewSize-g);a._overviewCanvas.setTranslateY(g)}else h=a.Width-e,e=a._overviewSize,a._overviewCanvas.setTranslateY(a.Height-
a._overviewSize-g),a._overviewCanvas.setTranslateX(g);d&&a.addChild(a._overviewCanvas);a._overview=new DvtTimelineOverview(b,a.HandleEvent,a);a._overviewCanvas.addChild(a._overview);b=a._getOverviewObject();a._overview.render(b,h,e)};
DvtTimelineRenderer._renderScrollHotspots=function(a){if(a._series){var b=a.getCtx(),c=DvtAgent.isRightToLeft(b),d=a._series.length,e=a.getTimeAxisVisibleSize(d);if(a._scrollHotspotsContainers)for(var g=0;g<a._scrollHotspotsContainers.length;g++)a._scrollHotspotsContainers[g].removeChildren();else{var h=!0;a._scrollHotspotsContainers=[]}a._scrollHotspots=[];for(var k=DvtTimelineStyleUtils.getHotspotPadding(),m=DvtTimelineStyleUtils.getHotspotWidth(),n=DvtTimelineStyleUtils.getHotspotHeight(),t=DvtTimelineStyleUtils.getHotspotArrowWidth(),
u=DvtTimelineStyleUtils.getHotspotArrowHeight(),v=DvtTimelineStyleUtils.getHotspotBackgroundColor(),w=DvtTimelineStyleUtils.getHotspotBorderRadius(),g=0;g<d;g++){if(h){var x=new DvtContainer(b,"hotspots_s"+g);a.addChild(x);a._scrollHotspotsContainers.push(x)}else x=a._scrollHotspotsContainers[g];if(a.isVertical())var y=c?Math.abs(g-1):g,z=E=a._startX+y*(a._seriesSize+e)+(a._seriesSize-m)/2,A=a._startY+k,B=a._startY+a._canvasLength-n-k,y=I=E+t/2,D=A+u/2,C=B+u/2,G=a._resources.scrollUp,F=a._resources.scrollDown;
else var E=a._startX+k,z=a._startX+a._canvasLength-m-k,A=a._startY+g*(a._seriesSize+e)+(a._seriesSize-n)/2,B=A,I=E+t/2,y=z+t/2,D=A+u/2,C=D,G=a._resources.scrollLeft,F=a._resources.scrollRight;E=new DvtRect(b,E,A,m,n,"lhs");E.setSolidFill(v,1);E.setCornerRadius(w);E.hotspot="left";E.setAlpha(0);E.setMouseEnabled(!1);I=new DvtImage(b,G,I,D,t,u,"lhs_arr");I.hotspot="left";E.addChild(I);z=new DvtRect(b,z,B,m,n,"rhs");z.setSolidFill(v,1);z.setCornerRadius(w);z.hotspot="right";z.setAlpha(0);z.setMouseEnabled(!1);
y=new DvtImage(b,F,y,C,t,u,"rhs_arr");y.hotspot="right";z.addChild(y);x.addChild(E);a._scrollHotspots.push(E);x.addChild(z);a._scrollHotspots.push(z);a.isVertical()?(y=c?Math.abs(g-1):g,E=a._startX+y*(a._seriesSize+e)+k,z=a._startX+(y+1)*a._seriesSize+y*e-m-k,B=A=a._startY+(a._canvasLength-n)/2,I=E+t/2,y=z+t/2,C=D=A+u/2,G=a._resources.scrollLeft,F=a._resources.scrollRight):(z=E=a._startX+(a._canvasLength-m)/2,A=a._startY+g*(a._seriesSize+e)+k,B=a._startY+(g+1)*a._seriesSize+g*e-n-k,y=I=E+t/2,D=A+
u/2,C=B+u/2,G=a._resources.scrollUp,F=a._resources.scrollDown);E=new DvtRect(b,E,A,m,n,"ths");E.setSolidFill(v,1);E.setCornerRadius(w);E.hotspot="top";E.setAlpha(0);E.setMouseEnabled(!1);I=new DvtImage(b,G,I,D,t,u,"ths_arr");I.hotspot="top";E.addChild(I);z=new DvtRect(b,z,B,m,n,"bhs");z.setSolidFill(v,1);z.setCornerRadius(w);z.hotspot="bottom";z.setAlpha(0);z.setMouseEnabled(!1);y=new DvtImage(b,F,y,C,t,u,"bhs_arr");y.hotspot="bottom";z.addChild(y);x.addChild(E);a._scrollHotspots.push(E);x.addChild(z);
a._scrollHotspots.push(z)}}};
DvtTimelineRenderer._renderZoomControls=function(a){var b=a.getCtx(),c=DvtAgent.isRightToLeft(b),d=DvtTransientButton.getStateFromURL(b,a._resources.zoomIn),e=DvtTransientButton.getStateFromURL(b,a._resources.zoomIn_h),g=DvtTransientButton.getStateFromURL(b,a._resources.zoomIn_a),h=DvtTransientButton.getStateFromURL(b,a._resources.zoomIn_d);null==a.zoomin?(a.zoomin=new DvtTransientButton(b,d,e,g,h,a.EventManager,a.EventManager.HandleZoomInClick),a.EventManager.associate(a.zoomin,a.zoomin)):(a.zoomin.setUpState(d),
a.zoomin.setOverState(e),a.zoomin.setDownState(g),a.zoomin.setDisabledState(h));d=DvtTransientButton.getStateFromURL(b,a._resources.zoomOut);e=DvtTransientButton.getStateFromURL(b,a._resources.zoomOut_h);g=DvtTransientButton.getStateFromURL(b,a._resources.zoomOut_a);h=DvtTransientButton.getStateFromURL(b,a._resources.zoomOut_d);null==a.zoomout?(a.zoomout=new DvtTransientButton(b,d,e,g,h,a.EventManager,a.EventManager.HandleZoomOutClick),a.EventManager.associate(a.zoomout,a.zoomout)):(a.zoomout.setUpState(d),
a.zoomout.setOverState(e),a.zoomout.setDownState(g),a.zoomout.setDisabledState(h));a.zoomin.setTooltip(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"ZOOM_IN",null));a.zoomout.setTooltip(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"ZOOM_OUT",null));a.zoomin.hide();a.zoomout.hide();DvtTimeUtils.supportsTouch()&&(DvtToolkitUtils.setAttrNullNS(a.zoomin.getElem(),"role","button"),DvtToolkitUtils.setAttrNullNS(a.zoomin.getElem(),"aria-label",DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,
"ZOOM_IN",null)),DvtToolkitUtils.setAttrNullNS(a.zoomout.getElem(),"role","button"),DvtToolkitUtils.setAttrNullNS(a.zoomout.getElem(),"aria-label",DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"ZOOM_OUT",null)));c?(a.zoomin.setTranslateX(a._backgroundWidth-44),a.zoomout.setTranslateX(a._backgroundWidth-44)):(a.zoomin.setTranslateX(a._startX+11),a.zoomout.setTranslateX(a._startX+11));a.zoomin.setTranslateY(a._startY+11);a.zoomout.setTranslateY(a._startY+48);a.zoomin.getParent()!=a._canvas&&a._canvas.addChild(a.zoomin);
a.zoomout.getParent()!=a._canvas&&a._canvas.addChild(a.zoomout);b=a.getContentLength();b>=a._maxContentLength&&a.disableZoomButton(!0);a._canvasLength>=b&&a.disableZoomButton(!1)};
DvtTimelineRenderer._renderEmptyText=function(a){var b=a.Options.series?DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"INVALID_DATA",null):DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"NO_DATA",null);a.clearTimeline();DvtTextUtils.renderEmptyText(a._canvas,b,new DvtRectangle(0,0,a._backgroundWidth,a._backgroundHeight),a.EventManager,DvtTimelineStyleUtils.getEmptyTextStyle(a.Options))};var DvtTimelineStyleUtils={};DvtObj.createSubclass(DvtTimelineStyleUtils,DvtObj,"DvtTimelineStyleUtils");
DvtTimelineStyleUtils._DEFAULT_TIMELINE_STYLE="border:1px #d9dfe3;background-color:#f9f9f9;";DvtTimelineStyleUtils._DEFAULT_AXIS_STYLE="background-color:#f9f9f9;border:1px #d9dfe3;";DvtTimelineStyleUtils._DEFAULT_AXIS_SEPARATOR_STYLE="color:#bcc7d2;";DvtTimelineStyleUtils._DEFAULT_SERIES_STYLE="background-color:#f9f9f9;";DvtTimelineStyleUtils._DEFAULT_SERIES_LABEL_SPACING=20;DvtTimelineStyleUtils._DEFAULT_SERIES_LABEL_PADDING=2;DvtTimelineStyleUtils._DEFAULT_SERIES_AXIS_SEPARATOR_STYLE="color:#bcc7d2";
DvtTimelineStyleUtils._DEFAULT_SERIES_AXIS_LABEL_PADDING=1;DvtTimelineStyleUtils._DEFAULT_OVERVIEW_WIDTH=60;DvtTimelineStyleUtils._DEFAULT_OVERVIEW_HEIGHT=100;DvtTimelineStyleUtils._DEFAULT_HOTSPOT_BACKGROUND_COLOR="#000000";DvtTimelineStyleUtils._DEFAULT_HOTSPOT_BORDER_RADIUS=2;DvtTimelineStyleUtils._DEFAULT_HOTSPOT_OPACITY=.6;DvtTimelineStyleUtils._DEFAULT_HOTSPOT_WIDTH=28;DvtTimelineStyleUtils._DEFAULT_HOTSPOT_HEIGHT=28;DvtTimelineStyleUtils._DEFAULT_HOTSPOT_PADDING=3;
DvtTimelineStyleUtils._DEFAULT_HOTSPOT_ARROW_WIDTH=14;DvtTimelineStyleUtils._DEFAULT_HOTSPOT_ARROW_HEIGHT=14;DvtTimelineStyleUtils._DEFAULT_HOTSPOT_ANIMATION_DURATION=.3;DvtTimelineStyleUtils._DEFAULT_ITEM_ENABLED_STROKE_WIDTH=1;DvtTimelineStyleUtils._DEFAULT_ITEM_HOVER_STROKE_WIDTH=2;DvtTimelineStyleUtils._DEFAULT_ITEM_SELECTED_STROKE_WIDTH=2;DvtTimelineStyleUtils._DEFAULT_ITEM_INNER_FILL_COLOR="rgba(249,249,249,0)";DvtTimelineStyleUtils._DEFAULT_ITEM_ACTIVE_INNER_STROKE_COLOR="#e4f0fa";
DvtTimelineStyleUtils._DEFAULT_ITEM_ENABLED_INNER_STROKE_COLOR="rgba(249,249,249,0)";DvtTimelineStyleUtils._DEFAULT_ITEM_INNER_STROKE_WIDTH=2;DvtTimelineStyleUtils._DEFAULT_BUBBLE_OFFSET=20;DvtTimelineStyleUtils._DEFAULT_BUBBLE_SPACING=15;DvtTimelineStyleUtils._DEFAULT_DURATION_FEELER_OFFSET=10;DvtTimelineStyleUtils._DEFAULT_THUMBNAIL_WIDTH=32;DvtTimelineStyleUtils._DEFAULT_THUMBNAIL_HEIGHT=32;
DvtTimelineStyleUtils.getItemDescriptionStyle=function(a){var b=a._series.getOptions().styleDefaults.item.descriptionStyle;if(a=a.getStyle())a=new DvtCSSStyle(a),b.parseInlineStyle(a);return b};DvtTimelineStyleUtils.getItemTitleStyle=function(a){var b=a._series.getOptions().styleDefaults.item.titleStyle;if(a=a.getStyle())a=new DvtCSSStyle(a),b.parseInlineStyle(a);return b};DvtTimelineStyleUtils.getReferenceObjectColor=function(a){return a.styleDefaults.referenceObject.color};
DvtTimelineStyleUtils.getSeriesLabelStyle=function(a){return a.styleDefaults.series.labelStyle};DvtTimelineStyleUtils.getSeriesLabelPadding=function(){return DvtTimelineStyleUtils._DEFAULT_SERIES_LABEL_PADDING};DvtTimelineStyleUtils.getSeriesLabelSpacing=function(){return DvtTimelineStyleUtils._DEFAULT_SERIES_LABEL_SPACING};DvtTimelineStyleUtils.getEmptyTextStyle=function(a){return a.styleDefaults.series.emptyTextStyle};DvtTimelineStyleUtils.getBubbleOffset=function(){return DvtTimelineStyleUtils._DEFAULT_BUBBLE_OFFSET};
DvtTimelineStyleUtils.getBubbleSpacing=function(){return DvtTimelineStyleUtils._DEFAULT_BUBBLE_SPACING};DvtTimelineStyleUtils.getItemFillColor=function(a){var b=a.getStyle();return b&&(b=(new DvtCSSStyle(b)).getStyle(DvtCSSStyle.BACKGROUND_COLOR))?b:a._series.getOptions().styleDefaults.item.backgroundColor};DvtTimelineStyleUtils.getItemStrokeColor=function(a){var b=a.getStyle();return b&&(b=(new DvtCSSStyle(b)).getStyle(DvtCSSStyle.BORDER_COLOR))?b:a._series.getOptions().styleDefaults.item.borderColor};
DvtTimelineStyleUtils.getItemStrokeWidth=function(){return DvtTimelineStyleUtils._DEFAULT_ITEM_ENABLED_STROKE_WIDTH};DvtTimelineStyleUtils.getItemHoverFillColor=function(a){var b=a._series.getOptions().styleDefaults.item.hoverBackgroundColor;return b?b:DvtTimelineStyleUtils.getItemFillColor(a)};DvtTimelineStyleUtils.getItemHoverStrokeColor=function(a){var b=a._series.getOptions().styleDefaults.item.hoverBorderColor;return b?b:DvtTimelineStyleUtils.getItemStrokeColor(a)};
DvtTimelineStyleUtils.getItemHoverStrokeWidth=function(){return DvtTimelineStyleUtils._DEFAULT_ITEM_HOVER_STROKE_WIDTH};DvtTimelineStyleUtils.getItemSelectedFillColor=function(a){var b=a._series.getOptions().styleDefaults.item.selectedBackgroundColor;return b?b:DvtTimelineStyleUtils.getItemFillColor(a)};DvtTimelineStyleUtils.getItemSelectedStrokeColor=function(a){var b=a._series.getOptions().styleDefaults.item.selectedBorderColor;return b?b:DvtTimelineStyleUtils.getItemStrokeColor(a)};
DvtTimelineStyleUtils.getItemSelectedStrokeWidth=function(){return DvtTimelineStyleUtils._DEFAULT_ITEM_SELECTED_STROKE_WIDTH};DvtTimelineStyleUtils.getSeriesStyle=function(){return DvtTimelineStyleUtils._DEFAULT_SERIES_STYLE};DvtTimelineStyleUtils.getColorsArray=function(a){return a.styleDefaults.series.colors};DvtTimelineStyleUtils.getDurationFeelerOffset=function(){return DvtTimelineStyleUtils._DEFAULT_DURATION_FEELER_OFFSET};DvtTimelineStyleUtils.getThumbnailWidth=function(){return DvtTimelineStyleUtils._DEFAULT_THUMBNAIL_WIDTH};
DvtTimelineStyleUtils.getThumbnailHeight=function(){return DvtTimelineStyleUtils._DEFAULT_THUMBNAIL_HEIGHT};DvtTimelineStyleUtils.getSeriesAxisSeparatorStyle=function(){return DvtTimelineStyleUtils._DEFAULT_SERIES_AXIS_SEPARATOR_STYLE};DvtTimelineStyleUtils.getItemInnerActiveStrokeColor=function(){return DvtTimelineStyleUtils._DEFAULT_ITEM_ACTIVE_INNER_STROKE_COLOR};DvtTimelineStyleUtils.getItemInnerFillColor=function(){return DvtTimelineStyleUtils._DEFAULT_ITEM_INNER_FILL_COLOR};
DvtTimelineStyleUtils.getItemInnerStrokeColor=function(){return DvtTimelineStyleUtils._DEFAULT_ITEM_ENABLED_INNER_STROKE_COLOR};DvtTimelineStyleUtils.getItemInnerStrokeWidth=function(){return DvtTimelineStyleUtils._DEFAULT_ITEM_INNER_STROKE_WIDTH};DvtTimelineStyleUtils.getHotspotAnimationDuration=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_ANIMATION_DURATION};DvtTimelineStyleUtils.getHotspotOpacity=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_OPACITY};
DvtTimelineStyleUtils.getTimelineStyle=function(){return DvtTimelineStyleUtils._DEFAULT_TIMELINE_STYLE};DvtTimelineStyleUtils.getOverviewWidth=function(){return DvtTimelineStyleUtils._DEFAULT_OVERVIEW_WIDTH};DvtTimelineStyleUtils.getOverviewHeight=function(){return DvtTimelineStyleUtils._DEFAULT_OVERVIEW_HEIGHT};DvtTimelineStyleUtils.getAxisStyle=function(){return DvtTimelineStyleUtils._DEFAULT_AXIS_STYLE};DvtTimelineStyleUtils.getAxisLabelStyle=function(a){return a.styleDefaults.minorAxis.labelStyle};
DvtTimelineStyleUtils.getOverviewWindowBackgroundColor=function(a){return a.styleDefaults.overview.window.backgroundColor};DvtTimelineStyleUtils.getOverviewWindowBorderColor=function(a){return a.styleDefaults.overview.window.borderColor};DvtTimelineStyleUtils.getOverviewBackgroundColor=function(a){return a.styleDefaults.overview.backgroundColor};DvtTimelineStyleUtils.getOverviewLabelStyle=function(a){return a.styleDefaults.overview.labelStyle};DvtTimelineStyleUtils.getSeriesAxisLabelStyle=function(a){return a.styleDefaults.majorAxis.labelStyle};
DvtTimelineStyleUtils.getAxisSeparatorStyle=function(){return DvtTimelineStyleUtils._DEFAULT_AXIS_SEPARATOR_STYLE};DvtTimelineStyleUtils.getSeriesAxisLabelPadding=function(){return DvtTimelineStyleUtils._DEFAULT_SERIES_AXIS_LABEL_PADDING};DvtTimelineStyleUtils.getHotspotPadding=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_PADDING};DvtTimelineStyleUtils.getHotspotWidth=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_WIDTH};DvtTimelineStyleUtils.getHotspotHeight=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_HEIGHT};
DvtTimelineStyleUtils.getHotspotArrowWidth=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_ARROW_WIDTH};DvtTimelineStyleUtils.getHotspotArrowHeight=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_ARROW_HEIGHT};DvtTimelineStyleUtils.getHotspotBackgroundColor=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_BACKGROUND_COLOR};DvtTimelineStyleUtils.getHotspotBorderRadius=function(){return DvtTimelineStyleUtils._DEFAULT_HOTSPOT_BORDER_RADIUS};
DvtTimelineStyleUtils.getAnimationDuration=function(a){return DvtStyleUtils.getTimeMilliseconds(a.styleDefaults.animationDuration)/1E3};var DvtTimelineSeries=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtTimelineSeries,DvtTimeComponent,"DvtTimelineSeries");DvtTimelineSeries.prototype.Init=function(a,b,c){DvtTimelineSeries.superclass.Init.call(this,a,b,c);this._blocks=[];this._renderedReferenceObjects=[];this._seriesTicksArray=[];this._itemListeners=[]};
DvtTimelineSeries.prototype.triggerAnimations=function(){var a=this.getCtx();this._rmAnimationElems&&0!=this._rmAnimationElems.length?(this._isAnimating=!0,a=new DvtParallelPlayable(a,new DvtAnimFadeOut(a,this._rmAnimationElems,DvtTimelineStyleUtils.getAnimationDuration(this.Options))),a.play(),DvtPlayable.appendOnEnd(a,this._onRmAnimationEnd,this)):this._mvAnimator?(this._isAnimating=!0,this._mvAnimator.play(),DvtPlayable.appendOnEnd(this._mvAnimator,this._onMvAnimationEnd,this)):this._frAnimationElems&&
0!=this._frAnimationElems.length&&(this._isAnimating=!0,a=new DvtParallelPlayable(a,new DvtAnimFadeIn(a,this._frAnimationElems,DvtTimelineStyleUtils.getAnimationDuration(this.Options),0)),a.play(),DvtPlayable.appendOnEnd(a,this._onAnimationEnd,this))};
DvtTimelineSeries.prototype._onRmAnimationEnd=function(){for(var a=0;a<this._rmAnimationElems.length;a++){var b=this._rmAnimationElems[a];b.getParent().removeChild(b)}this._mvAnimator&&this._hasMvAnimations?(this._mvAnimator.play(),DvtPlayable.appendOnEnd(this._mvAnimator,this._onMvAnimationEnd,this)):this._onMvAnimationEnd()};
DvtTimelineSeries.prototype._onMvAnimationEnd=function(){if(this._frAnimationElems&&0!=this._frAnimationElems.length){var a=new DvtParallelPlayable(this.getCtx(),new DvtAnimFadeIn(this.getCtx(),this._frAnimationElems,DvtTimelineStyleUtils.getAnimationDuration(this.Options),0));a.play();DvtPlayable.appendOnEnd(a,this._onAnimationEnd,this)}else this._onAnimationEnd()};DvtTimelineSeries.prototype._onAnimationEnd=function(){this._isAnimating=!1;this._callbackObj.onAnimationEnd()};
DvtTimelineSeries.prototype.render=function(a,b,c){a&&this.SetOptions(a);this._isInitialRender=this.Width?!1:!0;this.Width=b;this.Height=c;(a=this.Options.orientation)&&a==DvtTimeline.ORIENTATION_VERTICAL?(this._allowUpdates=0==this._isVertical?!1:!0,this._isVertical=!0):(this._allowUpdates=this._isVertical?!1:!0,this._isVertical=!1);this.Options&&(a=this.Parse(this.Options),this._applyParsedProperties(a));this._fetchStartPos=0;this._isVertical?(this._fetchEndPos=c,this._maxOverflowValue=b,this._length=
c,this._size=b):(this._fetchEndPos=b,this._maxOverflowValue=c,this._length=b,this._size=c);this._isInverted=this.Options.inverted;this._maxDurationSize=this._colorCount=0;DvtTimelineSeriesRenderer.renderSeries(this,b,c);DvtTimeUtils.supportsTouch()&&0<this._items.length&&this._setAriaProperty("flowto","_bt_"+this._items[0].getId());if(b=this.GetComponentDescription())DvtToolkitUtils.setAttrNullNS(this.getElem(),"role","group"),DvtToolkitUtils.setAttrNullNS(this.getElem(),"aria-label",DvtStringUtils.processAriaLabel(b))};
DvtTimelineSeries.prototype.GetComponentDescription=function(){var a=[DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"TIMELINE_SERIES")];this._label?a.push(this._label):a.push(this.Options.index+1);return DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",a)};
DvtTimelineSeries.prototype.reRender=function(a,b){this._canvas.setTranslateY(0);this._canvas.setTranslateX(0);this.Width=a;this.Height=b;this._fetchStartPos=0;this._isVertical?(this._fetchEndPos=b,this._maxOverflowValue=a,this._length=b,this._size=a):(this._fetchEndPos=a,this._maxOverflowValue=b,this._length=a,this._size=b);this._background.setWidth(a);this._background.setHeight(b);DvtTimelineSeriesRenderer.updateSeriesForZoom(this)};
DvtTimelineSeries.prototype.applyStyleValues=function(){this._style=new DvtCSSStyle(DvtTimelineStyleUtils.getSeriesStyle());this._seriesStyleDefaults=this.Options.seriesStyleDefaults;this._axisStyleDefaults=this.Options.axisStyleDefaults;this._colors=DvtTimelineStyleUtils.getColorsArray(this.Options);this._referenceObjects=this.Options.referenceObjects;if(this._seriesStyleDefaults){var a=this._seriesStyleDefaults.backgroundColor;a&&this._style.parseInlineStyle("background-color:"+a+";")}DvtTimeline.superclass.applyStyleValues.call(this)};
DvtTimelineSeries.prototype.SetOptions=function(a){this.Options=a};DvtTimelineSeries.prototype.Parse=function(a){this._parser=new DvtTimelineSeriesParser;return this._parser.parse(a,this._items)};
DvtTimelineSeries.prototype._applyParsedProperties=function(a){this._items&&(this._oldItems=this._items);this._isEmpty=(this._items=a.items)&&0<this._items.length?!1:!0;this._isIRAnimationEnabled=a.isIRAnimationEnabled;this._isDCAnimationEnabled=a.isDCAnimationEnabled;this._label=a.label;this._timeAxis=a.timeAxis;this._emptyText=a.emptyText;null==this._emptyText&&(this._emptyText=DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"NO_DATA",null));DvtTimelineSeries.superclass._applyParsedProperties.call(this,
a)};
DvtTimelineSeries.prototype.calculateSpacing=function(a,b){if(null!=this._layoutItems&&0!=this._layoutItems.length){var c=a.getLoc(),d=a.getSpacing();null==d&&(d=this._initialSpacing);var e=this._maxOverflowValue;if(this._isVertical)for(h=0;h<b;h++)k=this._layoutItems[h],m=k.getWidth()+10,e<d+m&&(e=d+m);else for(var g=DvtTimelineStyleUtils.getBubbleSpacing(),h=0;h<b;h++){var k=this._layoutItems[h],m=k.getWidth()+10,n=k.getHeight();if(null!=k.getLoc()&&k!=a){var t=k.getLoc();null==t&&(t=0);k=k.getSpacing();null==
k&&(k=this._initialSpacing);c>=t&&c<=t+m&&d>=k&&d<=k+n&&(d=k+n+g,a.setSpacing(d),d=this.calculateSpacing(a,b))}e<d+n&&(e=d+n)}e>this._maxOverflowValue&&(this._maxOverflowValue=e+DvtTimelineStyleUtils.getBubbleSpacing());return d}};
DvtTimelineSeries.prototype.calculateDurationSize=function(a,b){if(null!=this._items&&0!=this._items.length){var c=a.getStartTime(),d=a.getEndTime();if(d&&d!=c){d=a.getDurationLevel();null==d&&(d=1);for(var e=0;e<b;e++){var g=this._items[e];if(g!=a){var h=g.getStartTime(),k=g.getEndTime();k&&k!=h&&(g=g.getDurationLevel(),null==g&&(g=1),c>=h&&c<=k&&d==g&&(d=g+1,a.setDurationLevel(d),d=this.calculateDurationSize(a,b)))}}d>this._maxDurationSize&&(this._maxDurationSize=d);return d}}};
DvtTimelineSeries.prototype.prepareDurations=function(a){for(a=0;a<this._items.length;a++){var b=this._items[a],c=b.getStartTime(),d=b.getEndTime();d&&d!=c&&(b.setDurationLevel(this.calculateDurationSize(b,this._items.length)),b.setDurationSize(22+10*b.getDurationLevel()-5),null==b.getDurationFillColor()&&(b.setDurationFillColor(this._colors[this._colorCount]),this._colorCount++,this._colorCount==this._colors.length&&(this._colorCount=0)))}};
DvtTimelineSeries.prototype.prepareItems=function(a){this.isVertical()?this._initialSpacing=20*(0<this._maxDurationSize?1:0)+DvtTimelineStyleUtils.getBubbleSpacing()+10*this._maxDurationSize:this._initialSpacing=20+DvtTimelineStyleUtils.getBubbleSpacing()+10*this._maxDurationSize;this._layoutItems=[];for(var b=0;b<a.length;b++){var c=a[b],d=DvtTimeUtils.getDatePosition(this._start,this._end,c.getStartTime(),this._length),e=c.getEndTime();e&&e!=c.getStartTime()&&(e=DvtTimeUtils.getDatePosition(this._start,
this._end,e,this._length)-d,d+=Math.min(DvtTimelineStyleUtils.getDurationFeelerOffset(),e/2));c.setLoc(d);for(var e=!0,g=0;g<this._layoutItems.length;g++)if(d<this._layoutItems[g].getLoc()){this._layoutItems.splice(g,0,c);e=!1;break}e&&this._layoutItems.push(c)}for(b=0;b<this._layoutItems.length;b++)c=this._layoutItems[b],d=DvtTimeUtils.getDatePosition(this._start,this._end,c.getStartTime(),this._length),d<this._fetchStartPos||d>this._fetchEndPos||DvtTimelineSeriesItemRenderer.initializeItem(c,this)};
DvtTimelineSeries.prototype.getLabel=function(){return this._label};DvtTimelineSeries.prototype.getEmptyText=function(){return this._emptyText};DvtTimelineSeries.prototype.findItem=function(a){if(null!=this._items)for(var b=0;b<this._items.length;b++){var c=this._items[b];if(c.getId()==a)return c}return null};
DvtTimelineSeries.prototype.HandleItemAction=function(a){var b=a.getAction();b&&(a=new DvtTimelineSeriesActionEvent(b,a.getId()),DvtEventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,a))};var DvtTimelineSeriesActionEvent=function(a,b){DvtTimelineSeriesActionEvent.superclass.constructor.call(this,DvtActionEvent.SUBTYPE_ACTION,a,b)};DvtObj.createSubclass(DvtTimelineSeriesActionEvent,DvtActionEvent,"DvtTimelineSeriesActionEvent");DvtTimelineSeries.prototype.isInverted=function(){return this._isInverted};
var DvtTimelineSeriesItem=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtTimelineSeriesItem,DvtContainer,"DvtTimelineSeriesItem");DvtTimelineSeriesItem.ENABLED_STATE_KEY="en";DvtTimelineSeriesItem.SELECTED_STATE_KEY="sel";DvtTimelineSeriesItem.ACTIVE_SELECTED_STATE_KEY="asel";DvtTimelineSeriesItem.HOVER_STATE_KEY="hl";DvtTimelineSeriesItem.prototype.Init=function(a,b){DvtTimelineSeriesItem.superclass.Init.call(this,a,"g",b)};
DvtTimelineSeriesItem.prototype.setSelected=function(a){this._isSelected!=a&&((this._isSelected=a)?this._isShowingHoverEffect?this.applyState(DvtTimelineSeriesItem.ACTIVE_SELECTED_STATE_KEY):this.applyState(DvtTimelineSeriesItem.SELECTED_STATE_KEY):this.applyState(DvtTimelineSeriesItem.ENABLED_STATE_KEY))};
DvtTimelineSeriesItem.prototype.showHoverEffect=function(a){this._isShowingHoverEffect||(this._isShowingHoverEffect=!0,this._isSelected&&a?this.applyState(DvtTimelineSeriesItem.ACTIVE_SELECTED_STATE_KEY):this._isSelected?this.applyState(DvtTimelineSeriesItem.SELECTED_STATE_KEY):this.applyState(DvtTimelineSeriesItem.HOVER_STATE_KEY))};
DvtTimelineSeriesItem.prototype.hideHoverEffect=function(a){this._isSelected&&a?this.applyState(DvtTimelineSeriesItem.ACTIVE_SELECTED_STATE_KEY):this._isSelected?this.applyState(DvtTimelineSeriesItem.SELECTED_STATE_KEY):this.applyState(DvtTimelineSeriesItem.ENABLED_STATE_KEY);this._isShowingHoverEffect=!1};
DvtTimelineSeriesItem.prototype.applyState=function(a){var b=this._node,c=b.getBubble();if(null!=c){var d=c.getChildAt(0),e=d.getChildAt(0),c=b.getDurationBar();if(a==DvtTimelineSeriesItem.ACTIVE_SELECTED_STATE_KEY){a=DvtTimelineStyleUtils.getItemSelectedFillColor(b);var g=DvtTimelineStyleUtils.getItemSelectedStrokeColor(b),h=DvtTimelineStyleUtils.getItemSelectedStrokeWidth(),k=DvtTimelineStyleUtils.getItemInnerActiveStrokeColor()}else a==DvtTimelineSeriesItem.SELECTED_STATE_KEY?(a=DvtTimelineStyleUtils.getItemSelectedFillColor(b),
g=DvtTimelineStyleUtils.getItemSelectedStrokeColor(b),h=DvtTimelineStyleUtils.getItemSelectedStrokeWidth(),k=DvtTimelineStyleUtils.getItemInnerStrokeColor()):a==DvtTimelineSeriesItem.HOVER_STATE_KEY?(a=DvtTimelineStyleUtils.getItemHoverFillColor(b),g=DvtTimelineStyleUtils.getItemHoverStrokeColor(b),h=DvtTimelineStyleUtils.getItemHoverStrokeWidth(),k=DvtTimelineStyleUtils.getItemInnerActiveStrokeColor()):(a=DvtTimelineStyleUtils.getItemFillColor(b),g=DvtTimelineStyleUtils.getItemStrokeColor(b),h=DvtTimelineStyleUtils.getItemStrokeWidth(),
k=DvtTimelineStyleUtils.getItemInnerStrokeColor());var m=DvtTimelineStyleUtils.getItemInnerStrokeWidth(),g=new DvtSolidStroke(g,1,h),k=new DvtSolidStroke(k,1,m);d.setSolidFill(a);d.setStroke(g);e.setStroke(k);(b=b.getFeeler())&&b.setStroke(g);c&&c.setStroke(g)}};var DvtTimelineSeriesItemRenderer={};DvtObj.createSubclass(DvtTimelineSeriesItemRenderer,DvtObj,"DvtTimelineSeriesItemRenderer");
DvtTimelineSeriesItemRenderer.renderItem=function(a,b,c,d,e,g){a._content?(DvtTimelineSeriesItemRenderer._renderBubble(a,b,c,e),DvtTimelineSeriesItemRenderer._displayBubble(a,b,d,null)):(b._hasMvAnimations=!0,DvtTimelineSeriesItemRenderer._displayBubble(a,b,d,g));b.isVertical()||(a.getFeeler()&&b._allowUpdates?DvtTimelineSeriesItemRenderer._updateFeeler(a,b,d,g):DvtTimelineSeriesItemRenderer._renderFeeler(a,b,c.feelers,d,e))};
DvtTimelineSeriesItemRenderer.initializeItem=function(a,b){a.getBubble()&&b._allowUpdates?DvtTimelineSeriesItemRenderer._updateBubble(a,b):DvtTimelineSeriesItemRenderer._createBubble(a,b)};DvtTimelineSeriesItemRenderer._createBubble=function(a,b){var c=b.calculateSpacing(a,b._items.length);a.setSpacing(c);c=DvtTimelineSeriesItemRenderer._getBubbleContent(a,b);b.addChild(c);var d=c.getDimensions();b.removeChild(c);a.setWidth(d.w+10);a.setHeight(d.h+10);a._content=c};
DvtTimelineSeriesItemRenderer._renderBubble=function(a,b,c,d){var e=b.getCtx(),g=DvtAgent.isRightToLeft(e),h=a.getId(),k=a._content;a._content=null;var m=a.getWidth(),n=a.getHeight(),t="_bubble_"+h;if(b.isVertical()){var u=n/2,v=u-6,w=u+6;!g&&b.isInverted()||g&&!b.isInverted()?(g=[0,0,0,v,-6,u,0,w,0,n,m,n,m,0,0,0],n=[2,2,2,v,-4,u,2,w,2,n-2,m-2,n-2,m-2,2,2,2]):(g=[0,0,0,n,m,n,m,w,m+6,u,m,v,m,0,0,0],n=[2,2,2,n-2,m-2,n-2,m-2,w,m+4,u,m-2,v,m-2,2,2,2])}else u=g?m-DvtTimelineStyleUtils.getBubbleOffset():
DvtTimelineStyleUtils.getBubbleOffset(),v=u-6,w=u+6,b.isInverted()?(g=[0,0,v,0,u,-6,w,0,m,0,m,n,0,n,0,0],n=[2,2,v,2,u,-4,w,2,m-2,2,m-2,n-2,2,n-2,2,2]):(g=[0,0,0,n,v,n,u,n+6,w,n,m,n,m,0,0,0],n=[2,2,2,n-2,v,n-2,u,n+4,w,n-2,m-2,n-2,m-2,2,2,2]);m=new DvtPolygon(e,g,t);t=new DvtPolygon(e,n,t+"_i");t.setSolidFill(DvtTimelineStyleUtils.getItemInnerFillColor());k.setTranslate(5,5);m.addChild(t);m.addChild(k);e=new DvtTimelineSeriesItem(e,"_bt_"+h);d&&(e.setAlpha(0),d.push(e));e.addChild(m);DvtTimeUtils.supportsTouch()&&
DvtToolkitUtils.setAttrNullNS(e._elem,"id",e._id);e._node=a;a.setBubble(e);e.applyState(DvtTimelineSeriesItem.ENABLED_STATE_KEY);0<=a.getLoc()&&c.addChild(e);e.setAriaRole("group");a._updateAriaLabel();b._callbackObj.EventManager.associate(e,a)};
DvtTimelineSeriesItemRenderer._displayBubble=function(a,b,c,d){var e=b.getCtx(),e=DvtAgent.isRightToLeft(e),g=a.getLoc(),h=a.getWidth(),k=a.getHeight(),m=a.getSpacing();a=a.getBubble();b.isVertical()?(k=g-k/2,e&&b.isInverted()||!e&&!b.isInverted()?e=b._size-(h+b._initialSpacing)+c:(e=b._initialSpacing,c=0)):(e=e?b._length-g-h+DvtTimelineStyleUtils.getBubbleOffset():g-DvtTimelineStyleUtils.getBubbleOffset(),b.isInverted()?(c=0,k=m):k=b.Height-m-k+c);d?(b.isVertical()?a.setTranslateX(a.getTranslateX()+
b._canvasOffsetX+c):a.setTranslateY(a.getTranslateY()+b._canvasOffsetY+c),d.addProp(DvtAnimator.TYPE_NUMBER,a,a.getTranslateX,a.setTranslateX,e),d.addProp(DvtAnimator.TYPE_NUMBER,a,a.getTranslateY,a.setTranslateY,k)):a.setTranslate(e,k)};
DvtTimelineSeriesItemRenderer._getBubbleContent=function(a,b){var c=b.getCtx(),d=DvtAgent.isRightToLeft(c),e=a.getTitle(),g=a.getDescription(),h=a.getThumbnail(),k=new DvtContainer(c),m=0,n=0;if(d)e&&(t=new DvtOutputText(c,e,0,n),t.setCSSStyle(DvtTimelineStyleUtils.getItemTitleStyle(a)),m=t.measureDimensions().w+2,n=15,k.addChild(t)),g&&(g=new DvtOutputText(c,g,0,n),g.setCSSStyle(DvtTimelineStyleUtils.getItemDescriptionStyle(a)),e=g.measureDimensions().w+2,0!=m&&e!=m?e>m?(t.setX(e-m),m=e):g.setX(m-
e):m=e,k.addChild(g)),h&&(h=new DvtImage(c,h,m,0,DvtTimelineStyleUtils.getThumbnailWidth(),DvtTimelineStyleUtils.getThumbnailHeight(),"_tn"),h.setMouseEnabled(!1),k.addChild(h));else{h&&(h=new DvtImage(c,h,0,0,DvtTimelineStyleUtils.getThumbnailWidth(),DvtTimelineStyleUtils.getThumbnailHeight(),"_tn"),h.setMouseEnabled(!1),k.addChild(h),m=DvtTimelineStyleUtils.getThumbnailWidth()+2);if(e){var t=new DvtOutputText(c,e,m,n);t.setCSSStyle(DvtTimelineStyleUtils.getItemTitleStyle(a));n=15;k.addChild(t)}g&&
(g=new DvtOutputText(c,g,m,n),g.setCSSStyle(DvtTimelineStyleUtils.getItemDescriptionStyle(a)),k.addChild(g))}return k};DvtTimelineSeriesItemRenderer._updateBubble=function(a,b){var c=b.calculateSpacing(a,b._items.length);a.setSpacing(c)};
DvtTimelineSeriesItemRenderer._renderFeeler=function(a,b,c,d,e){var g=b.getCtx(),h=DvtAgent.isRightToLeft(g),k=a.getId(),m=a.getLoc(),n=a.getSpacing(),k="_feeler_"+k;if(b.isInverted())t=a.getDurationSize(),d=n;else{var t=b.Height+d-a.getDurationSize();d=b.Height-n+d}b=h?b._length-m:m;g=new DvtLine(g,b,t,b,d,k);e&&(g.setAlpha(0),e.push(g));c.addChild(g);c=DvtTimelineStyleUtils.getItemStrokeWidth();e=DvtTimelineStyleUtils.getItemStrokeColor(a);c=new DvtSolidStroke(e,1,c);g.setStroke(c);g._node=a;a.setFeeler(g)};
DvtTimelineSeriesItemRenderer._updateFeeler=function(a,b,c,d){if(b.isVertical())a.setFeeler(null);else{var e=b.getCtx(),g=DvtAgent.isRightToLeft(e),e=a.getFeeler();if(b.isInverted())c=0,h=a.getDurationSize(),k=a.getSpacing();else var h=b.Height+c-a.getDurationSize(),k=b.Height-a.getSpacing()+c;a=g?b._length-a.getLoc():a.getLoc();d?(e.setY1(e.getY1()+b._canvasOffsetY+c),e.setY2(e.getY2()+b._canvasOffsetY+c),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getX1,e.setX1,a),d.addProp(DvtAnimator.TYPE_NUMBER,e,
e.getY1,e.setY1,h),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getX2,e.setX2,a),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getY2,e.setY2,k)):(e.setX1(a),e.setY1(h),e.setX2(a),e.setY2(k))}};DvtTimelineSeriesItemRenderer.renderDuration=function(a,b,c,d,e,g){a.getDurationBar()?DvtTimelineSeriesItemRenderer._updateDuration(a,b,d,g):DvtTimelineSeriesItemRenderer._renderDuration(a,b,c,d,e)};
DvtTimelineSeriesItemRenderer._renderDuration=function(a,b,c,d,e){var g=b.getCtx(),h=DvtAgent.isRightToLeft(g),k=a.getStartTime(),m=a.getEndTime(),n=DvtTimeUtils.getDatePosition(b._start,b._end,k,b._length),t="_duration_"+a.getId(),k=22+10*a.getDurationLevel(),m=DvtTimeUtils.getDatePosition(b._start,b._end,m,b._length);b.isVertical()?(!h&&!b.isInverted()||h&&b.isInverted()?g=new DvtRect(g,b._size-k+5,n,k,m-n,t):(g=new DvtRect(g,-5,n,k,m-n,t),d=0),g.setTranslateX(d),g.setY(n),g.setWidth(k),g.setHeight(m-
n)):(m-=n,h=h?b._length-n-m:n,b.isInverted()?(g=new DvtRect(g,h,-5,m,k,t),g.setTranslateY(0)):(g=new DvtRect(g,h,b._size-k+5,m,k,t),g.setTranslateY(d)));e&&(g.setAlpha(0),e.push(g));g.setCornerRadius(5);g.setSolidFill(a.getDurationFillColor());d=DvtTimelineStyleUtils.getItemStrokeWidth();e=DvtTimelineStyleUtils.getItemStrokeColor(a);d=new DvtSolidStroke(e,1,d);g.setStroke(d);g._node=a;b._callbackObj.EventManager.associate(g,a);c.addChild(g);a.setDurationBar(g)};
DvtTimelineSeriesItemRenderer._updateDuration=function(a,b,c,d){var e=b.getCtx(),g=DvtAgent.isRightToLeft(e),e=a.getDurationBar();if(null!=e){var h=DvtTimeUtils.getDatePosition(b._start,b._end,a.getStartTime(),b._length),k=22+10*a.getDurationLevel(),m=DvtTimeUtils.getDatePosition(b._start,b._end,a.getEndTime(),b._length);if(b.isVertical()){a=0;!g&&!b.isInverted()||g&&b.isInverted()?g=b._size-k+5:(g=-5,c=0);var n=c,t=h,u=k,h=m-h}else n=0,m-=h,g=g?b._length-h-m:h,b.isInverted()?(a=c=0,t=-5):(a=c,t=
b._size-k+5),u=m,h=k;d?(b.isVertical()?e.setTranslateX(e.getTranslateX()+b._canvasOffsetX+c):e.setTranslateY(e.getTranslateY()+b._canvasOffsetY+c),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getTranslateX,e.setTranslateX,n),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getTranslateY,e.setTranslateY,a),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getX,e.setX,g),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getY,e.setY,t),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getWidth,e.setWidth,u),d.addProp(DvtAnimator.TYPE_NUMBER,e,e.getHeight,
e.setHeight,h)):(e.setTranslateX(n),e.setTranslateY(a),e.setX(g),e.setY(t),e.setWidth(u),e.setHeight(h))}};var DvtTimelineSeriesNode=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtTimelineSeriesNode,DvtObj,"DvtTimelineSeriesNode");
DvtTimelineSeriesNode.prototype.Init=function(a,b,c){this._timeline=a;this._seriesIndex=b;this._series=a._series[b];this._id=c.id;this._rowKey=c.rowKey;this._startTime=parseInt(c.startTime);c.endTime&&(this._endTime=parseInt(c.endTime));this._title=c.title;this._desc=c.desc;this._thumbnail=c.thumbnail;this._style=c.style;this._data=c.data;this._action=c.action;this._durationFillColor=c.durationFillColor;this._durationSize=0};DvtTimelineSeriesNode.prototype.getId=function(){return this._id};
DvtTimelineSeriesNode.prototype.getSeries=function(){return this._series};DvtTimelineSeriesNode.prototype.getSeriesIndex=function(){return this._seriesIndex};DvtTimelineSeriesNode.prototype.getRowKey=function(){return this._rowKey};DvtTimelineSeriesNode.prototype.getStartTime=function(){return this._startTime};DvtTimelineSeriesNode.prototype.setStartTime=function(a){this._startTime=a};DvtTimelineSeriesNode.prototype.getEndTime=function(){return this._endTime};
DvtTimelineSeriesNode.prototype.setEndTime=function(a){this._endTime=a};DvtTimelineSeriesNode.prototype.getTitle=function(){return this._title};DvtTimelineSeriesNode.prototype.getDescription=function(){return this._desc};DvtTimelineSeriesNode.prototype.getThumbnail=function(){return this._thumbnail};DvtTimelineSeriesNode.prototype.getStyle=function(){return this._style};DvtTimelineSeriesNode.prototype.getData=function(){return this._data};DvtTimelineSeriesNode.prototype.getBubble=function(){return this._displayable};
DvtTimelineSeriesNode.prototype.setBubble=function(a){this._displayable=a};DvtTimelineSeriesNode.prototype.getFeeler=function(){return this._feeler};DvtTimelineSeriesNode.prototype.setFeeler=function(a){this._feeler=a};DvtTimelineSeriesNode.prototype.getDurationBar=function(){return this._durationBar};DvtTimelineSeriesNode.prototype.setDurationBar=function(a){this._durationBar=a};DvtTimelineSeriesNode.prototype.getLoc=function(){return this._loc};
DvtTimelineSeriesNode.prototype.setLoc=function(a){this._loc=a};DvtTimelineSeriesNode.prototype.getSpacing=function(){return this._spacing};DvtTimelineSeriesNode.prototype.setSpacing=function(a){this._spacing=a};DvtTimelineSeriesNode.prototype.getDurationLevel=function(){return this._durationLevel};DvtTimelineSeriesNode.prototype.setDurationLevel=function(a){this._durationLevel=a};DvtTimelineSeriesNode.prototype.getDurationSize=function(){return this._durationSize};
DvtTimelineSeriesNode.prototype.setDurationSize=function(a){this._durationSize=a};DvtTimelineSeriesNode.prototype.getDurationFillColor=function(){return this._durationFillColor};DvtTimelineSeriesNode.prototype.setDurationFillColor=function(a){this._durationFillColor=a};
DvtTimelineSeriesNode.prototype.getLabel=function(){return null!=this.getEndTime()?"Start Time: "+(new Date(this.getStartTime())).toLocaleString()+"; End Time: "+(new Date(this.getEndTime())).toLocaleString()+"; Title: "+this.getTitle()+"; Description: "+this.getDescription():"Time: "+(new Date(this.getStartTime())).toLocaleString()+"; Title: "+this.getTitle()+"; Description: "+this.getDescription()};DvtTimelineSeriesNode.prototype.getWidth=function(){return this._w};
DvtTimelineSeriesNode.prototype.setWidth=function(a){this._w=a};DvtTimelineSeriesNode.prototype.getHeight=function(){return this._h};DvtTimelineSeriesNode.prototype.setHeight=function(a){this._h=a};DvtTimelineSeriesNode.prototype.getAction=function(){return this._action};
DvtTimelineSeriesNode.prototype.getNextNavigable=function(a){var b=this._timeline.EventManager.getKeyboardHandler();if(a.type==DvtMouseEvent.CLICK||b.isMultiSelectEvent(a))return this;if(b.isNavigationEvent(a)){for(var b=[],c=0;c<this._timeline._series.length;c++)b.push(this._timeline._series[c]._items);return DvtTimelineKeyboardHandler.getNextNavigable(this,a,b)}return null};DvtTimelineSeriesNode.prototype.getTargetElem=function(){return this._displayable.getElem()};
DvtTimelineSeriesNode.prototype.getKeyboardBoundingBox=function(a){return this._displayable.getDimensions(a)};DvtTimelineSeriesNode.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;this.showHoverEffect();this._timeline.updateScrollForItemNavigation(this)};DvtTimelineSeriesNode.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;this.hideHoverEffect()};DvtTimelineSeriesNode.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};
DvtTimelineSeriesNode.prototype.getDisplayables=function(){return[this._displayable]};DvtTimelineSeriesNode.prototype.getAriaLabel=function(){var a=[];this.isSelectable()&&a.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED"));return DvtDisplayable.generateAriaLabel(this.getLabel(),a)};DvtTimelineSeriesNode.prototype.setSelectable=function(a){this._isSelectable=a};DvtTimelineSeriesNode.prototype.isSelectable=function(){return this._isSelectable};
DvtTimelineSeriesNode.prototype.isSelected=function(){return this._isSelected};DvtTimelineSeriesNode.prototype.setSelected=function(a){this._isSelected=a;this._displayable.setSelected(a);this._updateAriaLabel();this._timeline._hasOverview&&this._timeline._overview&&(a?this._timeline._overview.selSelectItem(this.getId()):this._timeline._overview.selUnselectItem(this.getId()))};
DvtTimelineSeriesNode.prototype.showHoverEffect=function(a){var b=this._timeline.EventManager.getFocus()==this;this._displayable.showHoverEffect(b);!a&&this._timeline._hasOverview&&this._timeline._overview.highlightItem(this.getId());this._timeline._isVertical&&(this._index||(this._index=this._series._blocks[0].getChildIndex(this.getBubble())),this._series._blocks[0].addChild(this.getBubble()))};
DvtTimelineSeriesNode.prototype.hideHoverEffect=function(a){var b=this._timeline.EventManager.getFocus()==this;this._displayable.hideHoverEffect(b);!a&&this._timeline._hasOverview&&this._timeline._overview.unhighlightItem(this.getId());this._timeline._isVertical&&this._index&&!this._isSelected&&this._series._blocks[0].addChildAt(this.getBubble(),this._index)};DvtTimelineSeriesNode.prototype._updateAriaLabel=function(){DvtAgent.deferAriaCreation()||this._displayable.setAriaProperty("label",this.getAriaLabel())};
var DvtTimelineSeriesParser=function(){};DvtObj.createSubclass(DvtTimelineSeriesParser,DvtObj,"DvtTimelineSeriesParser");
DvtTimelineSeriesParser.prototype.parse=function(a,b){var c=this.buildData(a);this._startTime=new Date(a.start);this._endTime=new Date(a.end);var d=this.ParseRootAttributes();d.inlineStyle=a.style;d.scale=a.scale;d.timeAxis=a.timeAxis;d.label=a.label;d.emptyText=a.emptyText;d.isIRAnimationEnabled="auto"==a.animationOnDisplay;d.isDCAnimationEnabled="auto"==a.animationOnDataChange;d.items=this._parseDataNode(a.timeline,a.index,c.data,b);d.rtl="false";return d};
DvtTimelineSeriesParser.prototype.buildData=function(a){var b={},c=[];if(a=a.items)for(var d=0;d<a.length;d++)c.push(a[d]);b.data=c;return b};DvtTimelineSeriesParser.prototype.ParseRootAttributes=function(){var a={};a.origStart=this._startTime;a.origEnd=this._endTime;a.orientation="horizontal";a.start=this._startTime.getTime();a.end=this._endTime.getTime();return a};
DvtTimelineSeriesParser.prototype._parseDataNode=function(a,b,c,d){var e=[],g=a._series[b];if(c)for(var h=0;h<c.length;h++){var k=this.ParseNodeAttributes(c[h]);if(k){if(g._allowUpdates){var m=this._findExistingItem(k,d);if(m){var n=d.indexOf(m);d.splice(n,1);m.setSpacing(null);m.setDurationLevel(null);m.setLoc(null);m.setSelected(!1);m.setStartTime(k.startTime);m.setEndTime(k.endTime)}else m=new DvtTimelineSeriesNode(a,b,k),m.setSelectable(!0)}else m=new DvtTimelineSeriesNode(a,b,k),m.setSelectable(!0);
for(var k=m.getStartTime(),n=!0,t=0;t<e.length;t++)if(k<e[t].getStartTime()){e.splice(t,0,m);n=!1;break}n&&e.push(m)}}return e};DvtTimelineSeriesParser.prototype._findExistingItem=function(a,b){if(b)for(var c=0;c<b.length;c++){var d=b[c];if(a.id==d.getId()&&a.title==d.getTitle()&&a.desc==d.getDescription()&&a.thumbnail==d.getThumbnail())return d}};DvtTimelineSeriesParser.prototype.getDate=function(a){return null==a?null:a.getTime?a.getTime():isNaN(a)?(new Date(a)).getTime()+0:a};
DvtTimelineSeriesParser.prototype.ParseNodeAttributes=function(a){var b={};b.id=a.id;b.rowKey=b.id;b.startTime=this.getDate(a.start);b.endTime=this.getDate(a.end);if((b.endTime?b.endTime:b.startTime)<this._startTime.getTime()||b.startTime>this._endTime.getTime())return null;b.title=a.title;b.desc=a.description;b.thumbnail=a.thumbnail;b.data=a;b.style=a.style;b.action=a.action;b.durationFillColor=a.durationFillColor;return b};var DvtTimelineSeriesRenderer={};
DvtObj.createSubclass(DvtTimelineSeriesRenderer,DvtObj,"DvtTimelineSeriesRenderer");
DvtTimelineSeriesRenderer.renderSeries=function(a,b,c){DvtTimelineSeriesRenderer._renderBackground(a,b,c);DvtTimelineSeriesRenderer._renderScrollableCanvas(a);DvtTimelineSeriesRenderer._renderReferenceObjects(a,a._canvas);DvtTimelineSeriesRenderer._renderSeriesTicks(a);if(null!=a._items&&0!=a._items.length){if(0==a._blocks.length){c=a.getCtx();b=new DvtContainer(c,"itemBlock_"+a._fetchStartPos+"_"+a._fetchEndPos);b.startPos=a._fetchStartPos;b.endPos=a._fetchEndPos;var d=new DvtContainer(c,"feelers");
b.addChild(d);b.feelers=d;c=new DvtContainer(c,"durations");b.addChild(c);b.durations=c;a._canvas.addChild(b);a._blocks.push(b)}else b=a._blocks[0];a.prepareDurations(a._items);a.prepareItems(a._items);a._isInitialRender?(a._frAnimationElems=a._isIRAnimationEnabled?[]:null,a._mvAnimator=null,a._rmAnimationElems=null):a._allowUpdates&&a._isDCAnimationEnabled?(a._frAnimationElems=[],a._mvAnimator=new DvtAnimator(a.getCtx(),DvtTimelineStyleUtils.getAnimationDuration(a.Options),0,DvtEasing.cubicInOut),
a._rmAnimationElems=[]):(a._frAnimationElems=null,a._mvAnimator=null,a._rmAnimationElems=null);a._hasMvAnimations=!1;c=Math.max(0,a._maxOverflowValue-a._size);a._overflowOffset=c;DvtTimelineSeriesRenderer._adjustBackground(a,c);a._oldItems&&DvtTimelineSeriesRenderer._removeItems(a._oldItems,a,b,a._rmAnimationElems);a._oldItems=null;a.isVertical()&&b.feelers.removeChildren();DvtTimelineSeriesRenderer._renderItems(a._items,a,b,a._fetchStartPos,a._fetchEndPos,c,a._frAnimationElems,a._mvAnimator);DvtTimelineSeriesRenderer._updateReferenceObjects(a);
DvtTimelineSeriesRenderer._updateSeriesTicks(a)}};DvtTimelineSeriesRenderer.updateSeriesForZoom=function(a){DvtTimelineSeriesRenderer._updateItemsForZoom(a._items,a);DvtTimelineSeriesRenderer._updateReferenceObjects(a);DvtTimelineSeriesRenderer._updateSeriesTicks(a)};
DvtTimelineSeriesRenderer._renderBackground=function(a,b,c){if(a._background){var d=!1;a._background.setWidth(b);a._background.setHeight(c)}else d=!0,a._background=new DvtRect(a.getCtx(),0,0,b,c,"bg");a._background.setCSSStyle(a._style);a._background.setPixelHinting(!0);a._background.setCursor("move");d&&a.addChild(a._background)};
DvtTimelineSeriesRenderer._adjustBackground=function(a,b){var c=a.getCtx(),c=DvtAgent.isRightToLeft(c);0<b&&(a.isVertical()?a._background.setWidth(a._maxOverflowValue):a._background.setHeight(a._maxOverflowValue));if(a.isVertical()){if(!a.isInverted()&&!c||a.isInverted()&&c)a._background.setTranslateX(-b),a.setHScrollPos(b)}else a.isInverted()||(a._background.setTranslateY(-b),a.setVScrollPos(b))};
DvtTimelineSeriesRenderer._renderScrollableCanvas=function(a){a._canvas?(a._canvasOffsetX=a._canvas.getTranslateX(),a._canvasOffsetY=a._canvas.getTranslateY(),a._canvas.setTranslateX(0),a._canvas.setTranslateY(0)):(a._canvas=new DvtContainer(a.getCtx(),"canvas"),a.addChild(a._canvas))};
DvtTimelineSeriesRenderer._renderItems=function(a,b,c,d,e,g,h,k){for(var m=0;m<b._layoutItems.length;m++){var n=b._layoutItems[m],t=DvtTimeUtils.getDatePosition(b._start,b._end,n.getStartTime(),b._length);t<d||t>e||DvtTimelineSeriesItemRenderer.renderItem(n,b,c,g,h,k)}if(DvtTimeUtils.supportsTouch())for(m=0;m<b._layoutItems.length-1;m++)n=b._layoutItems[m],d=b._layoutItems[m+1],n.getBubble()._setAriaProperty("flowto","_bt_"+d.getId());DvtTimelineSeriesRenderer._renderDurations(a,b,c,g,h,k)};
DvtTimelineSeriesRenderer._updateItemsForZoom=function(a,b){if(null!=a&&0!=a.length){var c=b._fetchEndPos,d=b._blocks[0];d.startPos=b._fetchStartPos;d.endPos=c;b.prepareDurations(a);b.isVertical()?b._initialSpacing=20*(0<b._maxDurationSize?1:0)+DvtTimelineStyleUtils.getBubbleSpacing()+10*b._maxDurationSize:b._initialSpacing=20+DvtTimelineStyleUtils.getBubbleSpacing()+10*b._maxDurationSize;for(c=0;c<a.length;c++){var d=a[c],e=d.getStartTime(),g=DvtTimeUtils.getDatePosition(b._start,b._end,e,b._length),
h=d.getEndTime();h&&h!=e&&(e=DvtTimeUtils.getDatePosition(b._start,b._end,h,b._length)-g,g+=Math.min(DvtTimelineStyleUtils.getDurationFeelerOffset(),e/2));d.setLoc(g);d.setSpacing(null)}for(c=0;c<a.length;c++)d=a[c],g=d.getStartTime(),g<b._start||g>b._end||DvtTimelineSeriesItemRenderer._updateBubble(d,b);g=Math.max(0,b._maxOverflowValue-b._size);DvtTimelineSeriesRenderer._adjustBackground(b,g);for(c=0;c<a.length;c++)d=a[c],DvtTimelineSeriesItemRenderer._displayBubble(d,b,g,null),DvtTimelineSeriesItemRenderer._updateFeeler(d,
b,g,null),DvtTimelineSeriesItemRenderer._updateDuration(d,b,g,null)}};DvtTimelineSeriesRenderer._renderDurations=function(a,b,c,d,e,g){c=c.durations;for(var h=b._maxDurationSize;0<h;h--)for(var k=0;k<a.length;k++){var m=a[k],n=m.getStartTime(),t=m.getEndTime();t&&t!=n&&h==m.getDurationLevel()&&DvtTimelineSeriesItemRenderer.renderDuration(m,b,c,d,e,g)}};
DvtTimelineSeriesRenderer._renderSeriesTicks=function(a){null==a._seriesTicks?(a._seriesTicks=new DvtContainer(a.getCtx()),a._canvas.addChild(a._seriesTicks)):(a._seriesTicks.removeChildren(),a._seriesTicksArray=[]);if(a._scale&&a._timeAxis){var b=new DvtCSSStyle(DvtTimelineStyleUtils.getSeriesAxisSeparatorStyle());if(a._axisStyleDefaults){var c=a._axisStyleDefaults.separatorColor;c&&b.parseInlineStyle("color:"+c+";")}a._separatorStroke=new DvtSolidStroke(b.getStyle(DvtCSSStyle.COLOR));a._separatorStroke.setStyle(DvtStroke.DASHED,
3);DvtTimelineSeriesRenderer._renderSeriesTimeAxis(a,a._fetchStartPos,a._fetchEndPos,a._seriesTicks)}};
DvtTimelineSeriesRenderer._updateSeriesTicks=function(a){for(var b=a.getCtx(),b=DvtAgent.isRightToLeft(b),c=0;c<a._seriesTicksArray.length;c++){var d=a._seriesTicksArray[c],e=!a.isVertical()&&b?a._length-DvtTimeUtils.getDatePosition(a._start,a._end,d.time,a._length):DvtTimeUtils.getDatePosition(a._start,a._end,d.time,a._length);a.isVertical()?(d.setX1(0),d.setY1(e),d.setX2(a._maxOverflowValue),d.setY2(e)):(d.setX1(e),d.setY1(0),d.setX2(e),d.setY2(a._maxOverflowValue))}};
DvtTimelineSeriesRenderer._renderSeriesTimeAxis=function(a,b,c,d){var e=a.getCtx(),e=DvtAgent.isRightToLeft(e),g=a._start,h=a._end;b=DvtTimeUtils.getPositionDate(g,h,b,a._length);var k=a._timeAxis.adjustDate(b);b=new Date(b);for(var m=DvtTimeUtils.getDatePosition(g,h,k,a._length);m<c;){var k=a._timeAxis.getNextDate(a._timeAxis.adjustDate(b)),n=DvtTimeUtils.getDatePosition(g,h,k,a._length),t=!a.isVertical()&&e?a._length-m:m;if(a.isVertical())var u=0,v=t,w=a._maxOverflowValue;else u=t,v=0,w=t,t=a._maxOverflowValue;
m=a.addTick(d,u,w,v,t,a._separatorStroke,"o_tick"+m);m.time=b.getTime();a._seriesTicksArray.push(m);b=k;m=n}};
DvtTimelineSeriesRenderer._renderReferenceObjects=function(a,b){var c=a.getCtx(),d=DvtAgent.isRightToLeft(c);null==a._refObjectsContainer&&(a._refObjectsContainer=new DvtContainer(c),b.addChild(a._refObjectsContainer));var e=a._referenceObjects;if(e)for(var g=Math.min(1,e.length),h=0;h<g;h++){var k=e[h];if(k){var m=DvtTimeUtils.getDatePosition(a._start,a._end,k,a._length);if(0==a._renderedReferenceObjects.length){a.isVertical()?m=new DvtLine(c,0,m,a._maxOverflowValue,m,"zoomOrder[i]"):(d&&(m=a._length-
m),m=new DvtLine(c,m,0,m,a._maxOverflowValue,"zoomOrder[i]"));var n=new DvtSolidStroke(DvtTimelineStyleUtils.getReferenceObjectColor(a.Options));m.setStroke(n);m.setPixelHinting(!0);m.date=k;a._refObjectsContainer.addChild(m);a._renderedReferenceObjects[h]=m}}}else a._refObjectsContainer.removeChildren(),a._renderedReferenceObjects=[]};
DvtTimelineSeriesRenderer._updateReferenceObjects=function(a){for(var b=a.getCtx(),b=DvtAgent.isRightToLeft(b),c=0;c<a._renderedReferenceObjects.length;c++){var d=a._renderedReferenceObjects[c],e=DvtTimeUtils.getDatePosition(a._start,a._end,d.date,a._length);a.isVertical()?(d.setX1(0),d.setY1(e),d.setX2(a._maxOverflowValue),d.setY2(e)):(b&&(e=a._length-e),d.setX1(e),d.setY1(0),d.setX2(e),d.setY2(a._maxOverflowValue))}};
DvtTimelineSeriesRenderer._removeItems=function(a,b,c,d){if(d)DvtTimelineSeriesRenderer._animateItemRemoval(a,b,d);else for(d=0;d<a.length;d++){var e=a[d],g=e.getBubble();c.removeChild(g);if(!b.isVertical()){var g=c.feelers,h=e.getFeeler();g.removeChild(h)}g=e.getStartTime();(h=e.getEndTime())&&h!=g&&(g=c.durations,e=e.getDurationBar(),g.removeChild(e))}};
DvtTimelineSeriesRenderer._animateItemRemoval=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],g=e.getBubble();b.isVertical()?g.setTranslateX(g.getTranslateX()+b._canvasOffsetX+b._overflowOffset):g.setTranslateY(g.getTranslateY()+b._canvasOffsetY+b._overflowOffset);c.push(g);b.isVertical()||(g=e.getFeeler(),g.setTranslateY(g.getTranslateY()+b._canvasOffsetY+b._overflowOffset),c.push(g));var g=e.getStartTime(),h=e.getEndTime();h&&h!=g&&(e=e.getDurationBar(),b.isVertical()?e.setTranslateX(e.getTranslateX()+
b._canvasOffsetX+b._overflowOffset):e.setTranslateY(e.getTranslateY()+b._canvasOffsetY+b._overflowOffset),c.push(e))}};var DvtTimelineViewportChangeEvent=function(a,b,c,d){DvtTimelineViewportChangeEvent.superclass.Init.call(this,a);this._viewportStart=b;this._viewportEnd=c;this._minorAxisScale=d};DvtObj.createSubclass(DvtTimelineViewportChangeEvent,DvtBaseComponentEvent,"DvtTimelineViewportChangeEvent");DvtTimelineViewportChangeEvent.TYPE="viewportChange";
DvtTimelineViewportChangeEvent.prototype.getViewportStart=function(){return this._viewportStart};DvtTimelineViewportChangeEvent.prototype.getViewportEnd=function(){return this._viewportEnd};DvtTimelineViewportChangeEvent.prototype.getMinorAxisScale=function(){return this._minorAxisScale};