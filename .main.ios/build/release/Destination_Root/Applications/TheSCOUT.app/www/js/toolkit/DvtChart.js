var DvtSelectableWedge=function(a,b,c,d,e,g,h,k,m,n){this.Init(a,null,n);this.setWedgeParams(b,c,d,e,g,h,k,m)};DvtObj.createSubclass(DvtSelectableWedge,DvtPath,"DvtSelectableWedge");DvtSelectableWedge._OUTER_BORDER_WIDTH=2;DvtSelectableWedge._OUTER_BORDER_WIDTH_HOVER=1.25;DvtSelectableWedge._INNER_BORDER_WIDTH=1;DvtSelectableWedge.prototype.Init=function(a,b,c){DvtSelectableWedge.superclass.Init.call(this,a,b,c)};
DvtSelectableWedge.prototype.setWedgeParams=function(a,b,c,d,e,g,h,k){this._cx=a;this._cy=b;this._rx=c;this._ry=d;this._sa=e;this._ae=g;this._gap=h;this._ir=k;a=this._makeWedgePath(0);this.setCmds(a)};
DvtSelectableWedge.prototype._makeWedgePath=function(a){var b=Math.max(this._rx-a,0),c=Math.max(this._ry-a,0),d=360==this._ae||b<a?0:this._gap+2*a;a=this._ir?this._ir+a:0;var e=360==this._ae?DvtMath.degreesToRads(359.99):DvtMath.degreesToRads(this._ae),g=DvtMath.degreesToRads(this._sa),h=d/2,k=h<b?Math.asin(h/b):0,d=-e/2-g,m=Math.min(5*h,0<e?Math.abs(h/Math.sin(e/2)):0),n=0==b?m:m*c/b,t=this._cx+Math.cos(d)*m,u=this._cy+Math.sin(d)*n,d=this._cx+Math.cos(-k-g)*b,n=this._cy+Math.sin(-k-g)*c,m=this._cx+
Math.cos(-g-e+k)*b,k=this._cy+Math.sin(-g-e+k)*c;if(0<a){var v=h<a?Math.asin(h/a):0,h=this._cx+Math.cos(-v-g)*a,t=this._cy+Math.sin(-v-g)*a,u=this._cx+Math.cos(-g-e+v)*a,v=this._cy+Math.sin(-g-e+v)*a;360==this._ae?(g=DvtPathUtils.moveTo(m,k),g+=DvtPathUtils.arcTo(b,c,e,1,d,n),g+=DvtPathUtils.lineTo(m,k),g+=DvtPathUtils.moveTo(h,t)):(g=DvtPathUtils.moveTo(u,v),g+=DvtPathUtils.lineTo(m,k),g+=DvtPathUtils.arcTo(b,c,e,1,d,n),g+=DvtPathUtils.lineTo(h,t));g+=DvtPathUtils.arcTo(a,a,e,0,u,v)}else 360==this._ae?
(g=DvtPathUtils.moveTo(m,k),g+=DvtPathUtils.arcTo(b,c,e,1,d,n)):(g=DvtPathUtils.moveTo(t,u),g+=DvtPathUtils.lineTo(m,k),g+=DvtPathUtils.arcTo(b,c,e,1,d,n),g+=DvtPathUtils.lineTo(t,u));return g+=DvtPathUtils.closePath()};
DvtSelectableWedge.prototype._initializeSelectionEffects=function(){var a=this.isSelected()?DvtSelectableWedge._OUTER_BORDER_WIDTH:DvtSelectableWedge._OUTER_BORDER_WIDTH_HOVER,b=this._makeWedgePath(a),a=this._makeWedgePath(a+DvtSelectableWedge._INNER_BORDER_WIDTH);this.OuterChild?(this.OuterChild.setCmds(b),this.InnerChild.setCmds(a)):(this.OuterChild=new DvtPath(this.getCtx(),b),this.OuterChild.setInvisibleFill(),this.OuterChild.setMouseEnabled(!0),this.addChild(this.OuterChild),this.InnerChild=
new DvtPath(this.getCtx(),a),this.InnerChild.setInvisibleFill(),this.InnerChild.setMouseEnabled(!0),this.addChild(this.InnerChild))};
DvtSelectableWedge.prototype._showNestedBorders=function(a,b){this._initializeSelectionEffects();b?(this.setSolidFill(a),this.setStroke(null),this.OuterChild.setSolidFill(b),this.InnerChild.setFill(this._fill)):(a?(this.setSolidFill(a),this.setStroke(null),this.OuterChild.setFill(this._fill)):(this.setFill(this._fill),this.setStroke(this._shapeStroke),this.OuterChild.setInvisibleFill()),this.InnerChild.setInvisibleFill())};
DvtSelectableWedge.prototype.setStyleProperties=function(a,b,c,d,e){this._fill=a;this._shapeStroke=b;this._hoverColor=DvtSelectionEffectUtils.getHoverBorderColor(c);this._innerColor=d;this._outerColor=e;this.setFill(a);b&&this.setStroke(b)};DvtSelectableWedge.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0;this._showNestedBorders(this._hoverColor,this._innerColor)};
DvtSelectableWedge.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1;this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders()};DvtSelectableWedge.prototype.setSelected=function(a){this.IsSelected!=a&&(this.IsSelected=a,this.isHoverEffectShown()?this._showNestedBorders(this._hoverColor,this._innerColor):this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())};
DvtSelectableWedge.prototype.UpdateSelectionEffect=function(){};var DvtSelectableRectangularPolygon=function(a,b,c){this._x1=Math.min(b[0],b[4]);this._x2=Math.max(b[0],b[4]);this._y1=Math.min(b[1],b[5]);this._y2=Math.max(b[1],b[5]);this.Init(a,[this._x1,this._y1,this._x2,this._y1,this._x2,this._y2,this._x1,this._y2],c)};DvtObj.createSubclass(DvtSelectableRectangularPolygon,DvtPolygon,"DvtSelectableRectangularPolygon");DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH=2;
DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH_HOVER=1.25;DvtSelectableRectangularPolygon.INNER_BORDER_WIDTH=1;DvtSelectableRectangularPolygon.SHAPE_EXPAND_SELECTION=1;DvtSelectableRectangularPolygon.prototype.setStyleProperties=function(a,b,c,d,e){this._fill=a;this._borderStroke=b;this._hoverColor=DvtSelectionEffectUtils.getHoverBorderColor(c);this._innerColor=d;this._outerColor=e;this.setFill(a);b&&this.setStroke(b)};
DvtSelectableRectangularPolygon.prototype.setAnimationParams=function(a){this._x1=Math.min(a[0],a[4]);this._x2=Math.max(a[0],a[4]);this._y1=Math.min(a[1],a[5]);this._y2=Math.max(a[1],a[5]);this.setPoints(a);this._initializeSelectionEffects()};DvtSelectableRectangularPolygon.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0;this._showNestedBorders(this._hoverColor,this._innerColor)};
DvtSelectableRectangularPolygon.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1;this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders()};DvtSelectableRectangularPolygon.prototype.setSelected=function(a){this.IsSelected!=a&&(this.IsSelected=a,this.isHoverEffectShown()?this._showNestedBorders(this._hoverColor,this._innerColor):this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())};
DvtSelectableRectangularPolygon.prototype.UpdateSelectionEffect=function(){};DvtSelectableRectangularPolygon.prototype.getPrimaryFill=function(){return this._fill};
DvtSelectableRectangularPolygon.prototype._initializeSelectionEffects=function(){this.setPoints(this._createPointsArray(this.isSelected()?-DvtSelectableRectangularPolygon.SHAPE_EXPAND_SELECTION:0));var a=this.isSelected()?DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH-DvtSelectableRectangularPolygon.SHAPE_EXPAND_SELECTION:DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH_HOVER,b=this._createPointsArray(a),a=this._createPointsArray(a+DvtSelectableRectangularPolygon.INNER_BORDER_WIDTH);this.OuterChild?
(this.OuterChild.setPoints(b),this.InnerChild.setPoints(a)):(this.OuterChild=new DvtPolygon(this.getCtx(),b),this.OuterChild.setInvisibleFill(),this.OuterChild.setMouseEnabled(!0),this.addChild(this.OuterChild),this.InnerChild=new DvtPolygon(this.getCtx(),a),this.InnerChild.setInvisibleFill(),this.InnerChild.setMouseEnabled(!0),this.addChild(this.InnerChild))};
DvtSelectableRectangularPolygon.prototype._showNestedBorders=function(a,b){this._initializeSelectionEffects();b?(this.setSolidFill(a),this.setStroke(null),this.OuterChild.setSolidFill(b),this.InnerChild.setFill(this._fill)):(a?(this.setSolidFill(a),this.setStroke(null),this.OuterChild.setFill(this._fill)):(this.setFill(this._fill),this.setStroke(this._borderStroke),this.OuterChild.setInvisibleFill()),this.InnerChild.setInvisibleFill())};
DvtSelectableRectangularPolygon.prototype._createPointsArray=function(a){var b=this._x1+a,c=this._x2-a,d=this._y1+a;a=this._y2-a;return[b,d,c,d,c,a,b,a]};var DvtChartAxis=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtChartAxis,DvtAxis,"DvtChartAxis");DvtChartAxis.prototype.axisToPlotArea=function(a){if("tangential"==this.getOptions().position)return a;if(null==a)return null;a-=this.getLeftOverflow();return Math.round(10*a)/10};
DvtChartAxis.prototype.plotAreaToAxis=function(a,b){if("tangential"==this.getOptions().position)return a;if(null==a)return null;var c=a+this.getLeftOverflow();return!1===b?c:Math.round(c)};DvtChartAxis.prototype.linearToActual=function(a){return this.Info.linearToActual(a)};DvtChartAxis.prototype.actualToLinear=function(a){return this.Info.actualToLinear(a)};DvtChartAxis.prototype.getValueAt=function(a){return this.Info.getValueAt(this.plotAreaToAxis(a))};DvtChartAxis.prototype.getCoordAt=function(a){return this.axisToPlotArea(this.Info.getCoordAt(a))};
DvtChartAxis.prototype.getBoundedValueAt=function(a){return this.Info.getBoundedValueAt(this.plotAreaToAxis(a))};DvtChartAxis.prototype.getBoundedCoordAt=function(a){return this.axisToPlotArea(this.Info.getBoundedCoordAt(a))};DvtChartAxis.prototype.getUnboundedValueAt=function(a){return this.Info.getUnboundedValueAt(this.plotAreaToAxis(a))};DvtChartAxis.prototype.getUnboundedCoordAt=function(a){return this.axisToPlotArea(this.Info.getUnboundedCoordAt(a))};DvtChartAxis.prototype.getBaselineCoord=function(){return this.axisToPlotArea(this.Info.getBaselineCoord())};
DvtChartAxis.prototype.getPosition=function(){return this.getOptions().position};DvtChartAxis.prototype.isGroupAxis=function(){return this.Info instanceof DvtGroupAxisInfo};DvtChartAxis.prototype.isTimeAxis=function(){return this.Info instanceof DvtTimeAxisInfo};DvtChartAxis.prototype.isDataAxis=function(){return this.Info instanceof DvtDataAxisInfo};
DvtChartAxis.prototype.getMajorTickCoords=function(){for(var a=this.Info?this.Info.getMajorTickCoords():[],b=0;b<a.length;b++)a[b]=this.axisToPlotArea(a[b]);return a};DvtChartAxis.prototype.getMinorTickCoords=function(){for(var a=this.Info?this.Info.getMinorTickCoords():[],b=0;b<a.length;b++)a[b]=this.axisToPlotArea(a[b]);return a};DvtChartAxis.prototype.getBaselineCoord=function(){return this.axisToPlotArea(this.Info.getBaselineCoord())};DvtChartAxis.prototype.getLinearGlobalMin=function(){return this.actualToLinear(this.Info.getGlobalMin())};
DvtChartAxis.prototype.getLinearGlobalMax=function(){return this.actualToLinear(this.Info.getGlobalMax())};DvtChartAxis.prototype.getLinearViewportMin=function(){return this.actualToLinear(this.Info.getViewportMin())};DvtChartAxis.prototype.getLinearViewportMax=function(){return this.actualToLinear(this.Info.getViewportMax())};DvtChartAxis.prototype.getUnboundedLinearValueAt=function(a){return this.Info.actualToLinear(this.getUnboundedValueAt(a))};
DvtChartAxis.prototype.isFullViewport=function(){return this.Info.getViewportMin()==this.Info.getGlobalMin()&&this.Info.getViewportMax()==this.Info.getGlobalMax()};DvtChartAxis.prototype.getLeftOverflow=function(){return DvtAgent.isRightToLeft(this.getCtx())?this.Info.getEndOverflow():this.Info.getStartOverflow()};DvtChartAxis.prototype.getRightOverflow=function(){return DvtAgent.isRightToLeft(this.getCtx())?this.Info.getStartOverflow():this.Info.getEndOverflow()};
DvtChartAxis.prototype.getLength=function(){return Math.abs(this.Info.getStartCoord()-this.Info.getEndCoord())};DvtChartAxis.prototype.getMinCoord=function(){return this.axisToPlotArea(Math.min(this.Info.getStartCoord(),this.Info.getEndCoord()))};DvtChartAxis.prototype.getMaxCoord=function(){return this.axisToPlotArea(Math.max(this.Info.getStartCoord(),this.Info.getEndCoord()))};
var DvtChartBar=function(a,b,c,d,e,g){this.Init(a.getCtx());this._bHoriz=DvtChartTypeUtils.isHorizontal(a);this._bStacked=DvtChartTypeUtils.isStacked(a);this._barGapRatio=DvtChartStyleUtils.getBarGapRatio(a);this._dataItemGaps=DvtChartStyleUtils.getDataItemGaps(a);this._axisCoord=b;this._setBarCoords(c,d,e,g,!0)};DvtObj.createSubclass(DvtChartBar,DvtSelectableRectangularPolygon,"DvtChartBar");DvtChartBar._INDICATOR_OFFSET=8;DvtChartBar._MIN_BAR_WIDTH_FOR_GAPS=5;
DvtChartBar._MIN_BAR_WIDTH_FOR_GAPS_PIXEL_HINTING=15;DvtChartBar._MIN_BAR_LENGTH_FOR_GAPS=5;DvtChartBar._MAX_GAP_SIZE=2;
DvtChartBar.prototype.setSelected=function(a){this.IsSelected!=a&&(this.IsSelected=a,this.isSelected()?(this._tempX1=this._x1,this._tempX2=this._x2,this._tempBaselineCoord=this._baselineCoord,this._x1=this._origX1,this._x2=this._origX2,this._baselineCoord=this._origBaselineCoord,this.setPoints(this._createPointsArray()),this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:this._outerColor,this._innerColor)):(this._x1=this._tempX1,this._x2=this._tempX2,this._baselineCoord=this._tempBaselineCoord,
this.setPoints(this._createPointsArray()),this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:null)))};DvtChartBar.prototype.getAnimationParams=function(a){return a?this._bHoriz?[this._x2,this._x1,this._baselineCoord,this._endCoord]:[this._x1,this._x2,this._endCoord,this._baselineCoord]:[this._baselineCoord,this._endCoord,this._x1,this._x2]};
DvtChartBar.prototype.setAnimationParams=function(a,b){this._setBarCoords(a[0],a[1],a[2],a[3],!1);if(b){var c=this.getIndicatorPosition();b.setTranslate(c.x,c.y);b.setAlpha(1);b.getParent().addChild(b)}};
DvtChartBar.prototype.getDisplayAnimation=function(a){var b=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,this._x1,this._x2]);a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);return a};
DvtChartBar.prototype.getDeleteAnimation=function(a){var b=[this._baselineCoord,this._baselineCoord,this._x1,this._x2];a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0);return a};
DvtChartBar.prototype.getInsertAnimation=function(a){this.setAlpha(0);a=this.getDisplayAnimation(a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1);return a};
DvtChartBar.prototype.getIndicatorPosition=function(){var a=(this._x1+this._x2)/2,b,c=this._bStacked?(this._endCoord+this._baselineCoord)/2:this._endCoord>=this._baselineCoord?this._endCoord+DvtChartBar._INDICATOR_OFFSET:this._endCoord-DvtChartBar._INDICATOR_OFFSET;b=this._bHoriz?c:a;a=this._bHoriz?a:c;return new DvtPoint(b,a)};
DvtChartBar.prototype._setBarCoords=function(a,b,c,d,e){this._baselineCoord=a;this._endCoord=b;this._x1=c;this._x2=d;this._origX1=this._x1;this._origX2=this._x2;this._origBaselineCoord=this._baselineCoord;0<this._dataItemGaps&&e&&!this.isSelected()&&(a=Math.ceil(DvtChartBar._MAX_GAP_SIZE*this._dataItemGaps),b=Math.abs(this._baselineCoord-this._endCoord),c=this._x2-this._x1,d=this._axisCoord==this._baselineCoord,b>=DvtChartBar._MIN_BAR_LENGTH_FOR_GAPS&&this._bStacked&&!d&&(this._baselineCoord+=this._endCoord>
this._baselineCoord?a:-a),c>=DvtChartBar._MIN_BAR_WIDTH_FOR_GAPS&&(1==DvtAgent.getDevicePixelRatio()&&0<this._barGapRatio&&c>DvtChartBar._MIN_BAR_WIDTH_FOR_GAPS_PIXEL_HINTING?(DvtAgent.isPlatformGecko()||this.setPixelHinting(!0),this._x1=Math.round(this._x1),this._x2=Math.round(this._x2),this._origX1=this._x1,this._origX2=this._x2,this._x2-=a):(this._x1+=a/2,this._x2-=a/2)));a=this._createPointsArray();this.setPoints(a);this.OuterChild&&this.OuterChild.setPoints(this._createPointsArray(DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH));
this.InnerChild&&this.InnerChild.setPoints(this._createPointsArray(DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH+DvtSelectableRectangularPolygon.INNER_BORDER_WIDTH))};DvtChartBar.prototype._createPointsArray=function(a){var b=this._baselineCoord,c=this._endCoord,d=this._x1,e=this._x2;if(0<a){if(Math.abs(d-e)<2*a||Math.abs(b-c)<2*a)return[];d+=a;e-=a;c<b?(b-=a,c+=a):(b+=a,c-=a)}return this._bHoriz?[c,d,c,e,b,e,b,d]:[d,c,e,c,e,b,d,b]};
DvtChartBar.prototype._initializeSelectionEffects=function(){var a=this.isSelected()?DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH:DvtSelectableRectangularPolygon.OUTER_BORDER_WIDTH_HOVER,b=this._createPointsArray(a),a=this._createPointsArray(a+DvtSelectableRectangularPolygon.INNER_BORDER_WIDTH);this.OuterChild?(this.OuterChild.setPoints(b),this.InnerChild.setPoints(a)):(this.OuterChild=new DvtPolygon(this.getCtx(),b),this.OuterChild.setInvisibleFill(),this.OuterChild.setMouseEnabled(!0),this.addChild(this.OuterChild),
this.InnerChild=new DvtPolygon(this.getCtx(),a),this.InnerChild.setInvisibleFill(),this.InnerChild.setMouseEnabled(!0),this.addChild(this.InnerChild))};DvtChartBar.prototype.getBoundingBox=function(){var a=Math.min(this._x2,this._x1),b=Math.min(this._endCoord,this._baselineCoord),c=Math.abs(this._x2-this._x1),d=Math.abs(this._endCoord-this._baselineCoord);return this._bHoriz?new DvtRectangle(b,a,d,c):new DvtRectangle(a,b,c,d)};
DvtChartBar.prototype.getDimensionsSelf=function(a){return this.ConvertCoordSpaceRect(this.getBoundingBox(),a)};
var DvtChartCandlestick=function(a,b,c,d,e,g,h){this.Init(a);c=Math.max(2*Math.round(c/2),1);var k=Math.min(2*Math.ceil(DvtChartCandlestick._BAR_WIDTH*c/2),c),m=Math.round(b)-c/2;c=m+c;null!=g&&null!=h&&(b=Math.round(b)-k/2,k=b+k,this._rangeShape=new DvtSelectableRectangularPolygon(a,[b,g,k,g,k,h,b,h]),this.addChild(this._rangeShape));this._changeShape=new DvtSelectableRectangularPolygon(a,[m,d,c,d,c,e,m,e]);this.addChild(this._changeShape);this.setPixelHinting(!0)};
DvtObj.createSubclass(DvtChartCandlestick,DvtContainer,"DvtChartCandlestick");DvtChartCandlestick._BAR_WIDTH=.3;DvtChartCandlestick.prototype.setChangeStyle=function(a,b,c,d,e){this._changeShape.setStyleProperties(a,b,c,d,e)};DvtChartCandlestick.prototype.setRangeStyle=function(a,b,c,d){this._rangeShape&&this._rangeShape.setStyleProperties(a,b,c,null,d)};DvtChartCandlestick.prototype.setSelected=function(a){this._changeShape.setSelected(a);this._rangeShape&&this._rangeShape.setSelected(a)};
DvtChartCandlestick.prototype.showHoverEffect=function(){this._changeShape.showHoverEffect();this._rangeShape&&this._rangeShape.showHoverEffect()};DvtChartCandlestick.prototype.hideHoverEffect=function(){this._changeShape.hideHoverEffect();this._rangeShape&&this._rangeShape.hideHoverEffect()};
DvtChartCandlestick.prototype.getDisplayAnimation=function(a){a=new DvtCustomAnimation(this.getCtx(),this,a);var b=this._changeShape.getPoints();this._changeShape.setPoints(DvtChartCandlestick._getInitialPoints(b));a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,b);this._rangeShape&&(b=this._rangeShape.getPoints(),this._rangeShape.setPoints(DvtChartCandlestick._getInitialPoints(b)),a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,
this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,b));return a};
DvtChartCandlestick.prototype.getDeleteAnimation=function(a){a=new DvtCustomAnimation(this.getCtx(),this,a);var b=DvtChartCandlestick._getInitialPoints(this._changeShape.getPoints());a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,b);this._rangeShape&&(b=DvtChartCandlestick._getInitialPoints(this._rangeShape.getPoints()),a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,
this._rangeShape.setAnimationParams,b));a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0);return a};DvtChartCandlestick.prototype.getInsertAnimation=function(a){this.setAlpha(0);a=this.getDisplayAnimation(a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1);return a};
DvtChartCandlestick.prototype.getUpdateAnimation=function(a,b){var c=new DvtCustomAnimation(this.getCtx(),this,a),d=this._changeShape.getPoints();this._changeShape.setPoints(b._changeShape.getPoints());c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,d);var d=b._changeShape.isSelected()||this._changeShape.isSelected(),e=b._changeShape.getPrimaryFill().clone(),g=this._changeShape.getPrimaryFill();d||(this._changeShape.setFill(e),
c.getAnimator().addProp(DvtAnimator.TYPE_FILL,this._changeShape,this._changeShape.getFill,this._changeShape.setFill,g));this._rangeShape&&b._rangeShape&&(d=this._rangeShape.getPoints(),this._rangeShape.setPoints(b._rangeShape.getPoints()),c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,d));return c};DvtChartCandlestick.prototype.UpdateSelectionEffect=function(){};
DvtChartCandlestick._getInitialPoints=function(a){var b=a[0],c=a[2];a=(a[1]+a[5])/2;return[b,a,c,a,c,a,b,a]};var DvtChartCoord=function(a,b,c,d,e,g){this.x=a;this.y1=b;this.y2=c;this.groupIndex=d;this.group=e;this.filtered=g};DvtObj.createSubclass(DvtChartCoord,DvtObj,"DvtChartCoord");DvtChartCoord.prototype.isUpstep=function(a){return Math.abs(this.y2-a)>Math.abs(this.y1-a)};DvtChartCoord.prototype.clone=function(){return new DvtChartCoord(this.x,this.y1,this.y2,this.groupIndex,this.group,this.filtered)};
var DvtChartLineArea=function(a,b,c,d,e,g,h,k,m,n){this.Init(a.getCtx());this._chart=a;this._bArea=b;this._availSpace=c;this._baseline=d;this._fill=e;this._stroke=g;this._type=h;this._baseType=m?m:h;this._indicatorMap={};this.setCoords(k,n)};DvtObj.createSubclass(DvtChartLineArea,DvtContainer,"DvtChartLineArea");DvtChartLineArea._INDICATOR_OFFSET=8;
DvtChartLineArea.prototype.setCoords=function(a,b){this._arCoord=a;b&&(this._arBaseCoord=b);this.removeChildren();this._bArea?this._renderAreas():this._renderLines();this._positionIndicators()};DvtChartLineArea.prototype.getCoords=function(){return this._arCoord};DvtChartLineArea.prototype.getBaseCoords=function(){return this._arBaseCoord};DvtChartLineArea.prototype.getBaseline=function(){return this._baseline};DvtChartLineArea.prototype.isArea=function(){return this._bArea};
DvtChartLineArea.prototype._getPointArrays=function(a,b){var c=[],d=[];c.push(d);a=DvtChartLineArea._convertToPointCoords(a);var e=DvtChartTypeUtils.isPolar(this._chart),g="centeredStepped"==b||"centeredSegmented"==b,h=g||"stepped"==b||"segmented"==b,k=DvtChartStyleUtils.getGroupWidth(this._chart),m=DvtAgent.isRightToLeft(this.getCtx())&&DvtChartTypeUtils.isVertical(this._chart)?-1:1,n;e&&(n=a[a.length-1]);for(var t,u,v,w=!1,x=0;x<a.length;x++)null==a[x]?(DvtChartAxisUtils.isMixedFrequency(this._chart)||
!h||e||!n||v||(t=g?n.x+.5*k*m:n.x+k*m,this._pushCoord(d,t,n.y)),this._chart.getSkin()!=DvtCSSStyle.SKIN_NEXT&&DvtChartAxisUtils.isMixedFrequency(this._chart)||(d=[],c.push(d),n=null)):(t=a[x],v=a[x]._isY2,u=g?t.x-k/2*m:t.x,v&&(w&&h&&(u+=k*m),w=!w),"curved"==b&&v&&d.push(null,null),n&&h&&this._pushCoord(d,u,n.y),this._bArea||"segmented"!=b&&"centeredSegmented"!=b||(d=[],c.push(d)),this._pushCoord(d,u,t.y),n=t);h&&!e&&n&&!v&&(t=g?n.x+.5*k*m:n.x+k*m,this._pushCoord(d,t,n.y));e&&1<c.length&&(d=c.pop(),
c[0]=d.concat(c[0]));return c};DvtChartLineArea.prototype._pushCoord=function(a,b,c){b=DvtPlotAreaRenderer.convertAxisCoord(this._chart,new DvtPoint(b,c),this._availSpace);a.push(Math.round(10*b.x)/10,Math.round(10*b.y)/10)};
DvtChartLineArea.prototype._isRing=function(){if(!DvtChartTypeUtils.isPolar(this._chart)||!DvtChartAxisUtils.hasGroupAxis(this._chart)||this._arCoord.length<DvtChartDataUtils.getGroupCount(this._chart))return!1;for(var a=0;a<this._arCoord.length;a++)if(null==this._arCoord[a].x)return!1;return!0};
DvtChartLineArea.prototype._getSplineType=function(){return DvtChartTypeUtils.isScatterBubble(this._chart)?DvtPathUtils.SPLINE_TYPE_CARDINAL:DvtChartTypeUtils.isPolar(this._chart)?this._isRing()?DvtPathUtils.SPLINE_TYPE_CARDINAL_CLOSED:DvtPathUtils.SPLINE_TYPE_CARDINAL:DvtChartTypeUtils.isHorizontal(this._chart)?DvtPathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL:DvtPathUtils.SPLINE_TYPE_MONOTONE_VERTICAL};
DvtChartLineArea.prototype._renderLines=function(){for(var a=this._getPointArrays(this._arCoord,this._type),b,c=0;c<a.length;c++)(b=a[c])&&1<b.length&&("curved"==this._type?(b=DvtChartLineArea._getCurvedPathCommands(b,!1,this._getSplineType()),b=new DvtPath(this.getCtx(),b),b.setFill(null)):this._isRing()?(b=new DvtPolygon(this.getCtx(),b),b.setFill(null)):b=new DvtPolyline(this.getCtx(),b),b.setStroke(this._stroke),this.addChild(b))};
DvtChartLineArea.prototype._renderAreas=function(){var a=this._arCoord,b=this._arBaseCoord;!DvtChartTypeUtils.isPolar(this._chart)&&0<a.length&&0<b.length&&(a=a.slice(0),b=b.slice(0),null!=a[0].x&&null!=b[0].x&&(DvtChartLineArea._removeAreaEdge(a,0,this._baseline),DvtChartLineArea._removeAreaEdge(b,0,this._baseline),b[0].x=a[0].x),null!=a[a.length-1].x&&null!=b[b.length-1].x&&(DvtChartLineArea._removeAreaEdge(a,a.length-1,this._baseline),DvtChartLineArea._removeAreaEdge(b,b.length-1,this._baseline),
b[b.length-1].x=a[a.length-1].x));a=this._getPointArrays(a,this._type);b=this._getPointArrays(b,this._baseType);if(a.length==b.length)for(var c,d=0;d<a.length;d++){var e=a[d],g=b[d];if(!(2>e.length)){var h="curved"==this._type;c="curved"==this._baseType;this._isRing()&&(h||e.push(e[0],e[1]),2<=g.length&&!c&&g.push(g[0],g[1]));for(var k=[],m=0;m<g.length;m+=2)k.unshift(g[m],g[m+1]);h||c?(g=this._getSplineType(),e=h?DvtChartLineArea._getCurvedPathCommands(e,!1,g):DvtPathUtils.polyline(e,!1),e+=c?DvtChartLineArea._getCurvedPathCommands(k,
!0,g):DvtPathUtils.polyline(k,!0),e+=DvtPathUtils.closePath(),c=new DvtPath(this.getCtx(),e)):(c=k.concat(e),c=new DvtPolygon(this.getCtx(),c));c.setFill(this._fill);this._stroke&&c.setStroke(this._stroke);this.addChild(c)}}};
DvtChartLineArea.prototype._positionIndicators=function(){for(var a,b,c,d=0;d<this._arCoord.length;d++)c=this._arCoord[d],(a=this._indicatorMap[c.groupIndex])&&a.indicator&&(b=(c.isUpstep(this._baseline)?c.y2:c.y1)+DvtChartLineArea._INDICATOR_OFFSET*(a.direction==DvtDCChartUtils.DIR_UP?-1:1),b=DvtPlotAreaRenderer.convertAxisCoord(this._chart,new DvtPoint(c.x,b),this._availSpace),a=a.indicator,a.setTranslate(b.x,b.y),a.setAlpha(1),a.getParent().addChild(a))};
DvtChartLineArea.prototype.getAnimationParams=function(a){return DvtChartLineArea._coordsToAnimationParams(this._arCoord,a?a._arCoord:null,this._baseline)};DvtChartLineArea.prototype.setAnimationParams=function(a){a=DvtChartLineArea._animationParamsToCoords(a);this.setCoords(a)};DvtChartLineArea.prototype.getBaseAnimationParams=function(a){return DvtChartLineArea._coordsToAnimationParams(this._arBaseCoord,a?a._arBaseCoord:null,this._baseline)};
DvtChartLineArea.prototype.setBaseAnimationParams=function(a){this._arBaseCoord=DvtChartLineArea._animationParamsToCoords(a)};DvtChartLineArea.prototype.getCommonGroupIndices=function(a){for(var b=[],c=0;c<this._arCoord.length;c++)if(!this._arCoord[c].filtered&&null!=this._arCoord[c].x)for(var d=0;d<a._arCoord.length;d++)if(!a._arCoord[d].filtered&&null!=a._arCoord[d].x&&this._arCoord[c].group==a._arCoord[d].group){b.push(this._arCoord[c].groupIndex);break}return b};
DvtChartLineArea.prototype.addIndicator=function(a,b,c){c.setAlpha(0);this._indicatorMap[a]={direction:b,indicator:c}};DvtChartLineArea.prototype.removeIndicators=function(){for(var a in this._indicatorMap){var b=this._indicatorMap[a].indicator;b&&b.getParent().removeChild(b)}this._indicatorMap={}};
DvtChartLineArea._convertToPointCoords=function(a){for(var b=[],c=0;c<a.length;c++)if(!a[c].filtered)if(null==a[c].x)b.push(null);else if(b.push(new DvtPoint(a[c].x,a[c].y1)),a[c].y1!=a[c].y2){var d=new DvtPoint(a[c].x,a[c].y2);d._isY2=!0;b.push(d)}return b};
DvtChartLineArea._coordsToAnimationParams=function(a,b,c){if(b&&0<b.length)if(a&&0<a.length){a=a.slice(0);b=DvtChartLineArea._coordsToGroups(b);for(var d=DvtChartLineArea._coordsToGroups(a),e=a.length,g,h=b.length-1;0<=h;h--)g=b[h],g=d.indexOf(g),-1==g?(0==e?(g=a[0].clone(),a[0]=a[0].clone(),DvtChartLineArea._removeCoordJump(g,a[0],c)):(g=a[e-1].clone(),a[e-1]=a[e-1].clone(),DvtChartLineArea._removeCoordJump(a[e-1],g,c)),g.groupIndex=-1,a.splice(e,0,g)):e=g}else for(a=[],h=0;h<b.length;h++)a.push(new DvtChartCoord(b[h].x,
c,c));c=[];for(h=0;h<a.length;h++)a[h].filtered||(null==a[h].x?(c.push(Infinity),c.push(Infinity),c.push(Infinity)):(c.push(a[h].x),c.push(a[h].y1),c.push(a[h].y2)),c.push(a[h].groupIndex));return c};DvtChartLineArea._animationParamsToCoords=function(a){for(var b=[],c=0;c<a.length;c+=4)Infinity==a[c]||isNaN(a[c])?b.push(new DvtChartCoord(null,null,null,a[c+3])):b.push(new DvtChartCoord(a[c],a[c+1],a[c+2],a[c+3]));return b};
DvtChartLineArea._coordsToGroups=function(a){for(var b=[],c=0;c<a.length;c++)a[c].filtered||b.push(a[c].group);return b};DvtChartLineArea._removeCoordJump=function(a,b,c){a.isUpstep(c)?b.y1=b.y2:a.y2=a.y1};
DvtChartLineArea._getCurvedPathCommands=function(a,b,c){var d=[],e=[];d.push(e);for(var g=0;g<a.length;g+=2)null==a[g]?(e=[],d.push(e)):e.push(a[g],a[g+1]);c==DvtPathUtils.SPLINE_TYPE_CARDINAL_CLOSED&&1<d.length&&(c=d.pop(),d[0]=c.concat(d[0]),c=DvtPathUtils.SPLINE_TYPE_CARDINAL);a="";for(g=0;g<d.length;g++)e=d[g],a+=DvtPathUtils.curveThroughPoints(e,b,c),b=!0;return a};DvtChartLineArea._removeAreaEdge=function(a,b,c){var d=a[b].clone();d.isUpstep(c)?d.y1=d.y2:d.y2=d.y1;a[b]=d};
var DvtChartLineMarker=function(a,b,c,d,e,g){this.Init(a,b,null,c,d,e,e);g&&this.setStroke(DvtChartLineMarker.DEFAULT_STROKE)};DvtObj.createSubclass(DvtChartLineMarker,DvtSimpleMarker,"DvtChartLineMarker");DvtChartLineMarker.DEFAULT_STROKE=new DvtSolidStroke("none");DvtChartLineMarker.SELECTED_FILL=new DvtSolidFill("#FFFFFF");DvtChartLineMarker.SELECTED_STROKE=new DvtSolidStroke("#5A5A5A",1,1.5);
DvtChartLineMarker.prototype.setDataColor=function(a){this._dataColor=a;this._hoverStroke=new DvtSolidStroke(a,1,1.5)};DvtChartLineMarker.prototype.getDataColor=function(){return this._dataColor};DvtChartLineMarker.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0;this.setStroke(this._hoverStroke)};DvtChartLineMarker.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1;this.setStroke(this.isSelected()?DvtChartLineMarker.SELECTED_STROKE:DvtChartLineMarker.DEFAULT_STROKE)};
DvtChartLineMarker.prototype.setSelected=function(a){this.IsSelected!=a&&(this.IsSelected=a,this.isSelected()?(this.setFill(DvtChartLineMarker.SELECTED_FILL),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:DvtChartLineMarker.SELECTED_STROKE)):(this.setInvisibleFill(),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:DvtChartLineMarker.DEFAULT_STROKE)))};DvtChartLineMarker.prototype.UpdateSelectionEffect=function(){};
var DvtChartOverview=function(a){this.Init(a.getCtx(),a.processEvent,a);this._parentChart=a;this._chart=a.overview?a.overview.getBackgroundChart():null;this._id=a.getId()+"_overview"};DvtObj.createSubclass(DvtChartOverview,DvtOverview,"DvtChartOverview");
DvtChartOverview.prototype._renderChart=function(a,b,c){this._chartContainer=new DvtContainer(this.getCtx());this.addChild(this._chartContainer);a=DvtJSONUtils.merge({zoomAndScroll:"off",legend:{rendered:"off",size:null},xAxis:{viewportMin:null,viewportMax:null,viewportStartGroup:null,viewportEndGroup:null,axisLine:{rendered:"off"},size:null,maxSize:.5,title:null},yAxis:{rendered:"off",size:null},y2Axis:{rendered:"off",size:null},splitDualY:"off",title:{text:null},subtitle:{text:null},footnote:{text:null},
titleSeparator:{rendered:"off"},styleDefaults:{animationIndicators:"none"},layout:{outerGapWidth:0,outerGapHeight:0},_isOverview:!0},a);DvtChartAxisUtils.hasGroupAxis(this._parentChart)&&(a.xAxis.tickLabel.rendered="off");DvtChartTypeUtils.isStock(this._parentChart)&&a.series&&a.series[0]&&(a.series=[a.series[0]],a.series[0].type="lineWithArea");this._chart||(this._chart=DvtChart.newInstance(this.getCtx()),this._chart.setId(this._id));this._chartContainer.addChild(this._chart);this._chart.render(a,
b,c);a=new DvtRect(this.getCtx(),0,0,b,c);a.setInvisibleFill();this._chartContainer.addChild(a);this._chart.__getEventManager().setKeyboardHandler(null);return this._chart.__getPlotAreaSpace().h};DvtChartOverview.prototype.createBackground=function(a,b){};
DvtChartOverview.prototype.render=function(a,b,c){a.style={overviewBackgroundColor:"rgba(0,0,0,0)",windowBackgroundColor:"rgba(0,0,0,0)",windowBorderTopColor:"#333333",windowBorderRightColor:"#333333",windowBorderBottomColor:"#333333",windowBorderLeftColor:"#333333",leftFilterPanelColor:"rgba(5,65,135,0.1)",rightFilterPanelColor:"rgba(5,65,135,0.1)",handleBackgroundImage:a.chart._resources.overviewGrippy,handleWidth:3,handleHeight:15,handleFillColor:"rgba(0,0,0,0)"};a.animationOnClick="off";c=this._renderChart(a.chart,
b,c);DvtChartOverview.superclass.render.call(this,a,b,c)};DvtChartOverview.prototype.destroy=function(){DvtChartOverview.superclass.destroy.call(this);this._chart=this._parentChart=null};DvtChartOverview.prototype.getBackgroundChart=function(){return this._chart};DvtChartOverview.prototype.isLeftAndRightFilterRendered=function(){return!0};DvtChartOverview.prototype.HandleKeyDown=function(a){};DvtChartOverview.prototype.HandleKeyUp=function(a){};
var DvtChartPolarBar=function(a,b,c,d,e,g,h){this.Init(a.getCtx());this._axisCoord=b;this._availSpace=h.clone();this._bbox=null;this._dataItemGaps=DvtChartStyleUtils.getDataItemGaps(a)*DvtChartPolarBar._MAX_DATA_ITEM_GAP;this._setBarCoords(c,d,e,g)};DvtObj.createSubclass(DvtChartPolarBar,DvtSelectableWedge,"DvtChartPolarBar");DvtChartPolarBar._MIN_BAR_LENGTH_FOR_GAPS=4;DvtChartPolarBar._MAX_DATA_ITEM_GAP=3;
DvtChartPolarBar.prototype.getAnimationParams=function(){return[this._baselineCoord,this._endCoord,this._x1,this._x2]};DvtChartPolarBar.prototype.setAnimationParams=function(a,b){this._setBarCoords(a[0],a[1],a[2],a[3])};DvtChartPolarBar.prototype.getPrimaryFill=function(){return this.getFill()};
DvtChartPolarBar.prototype.getDisplayAnimation=function(a){var b=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,0,0]);a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);return a};
DvtChartPolarBar.prototype.getDeleteAnimation=function(a){var b=[this._baselineCoord,this._baselineCoord,this._x1,this._x2];a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0);return a};
DvtChartPolarBar.prototype.getInsertAnimation=function(a){this.setAlpha(0);var b=this.getAnimationParams();this.setAnimationParams([this._baselineCoord,this._baselineCoord,this._x1,this._x2]);a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1);return a};
DvtChartPolarBar.prototype._setBarCoords=function(a,b,c,d){var e=this._availSpace.x+this._availSpace.w/2,g=this._availSpace.y+this._availSpace.h/2,h=Math.max(b,a),k=Math.abs(b-a)>=DvtChartPolarBar._MIN_BAR_LENGTH_FOR_GAPS&&this._axisCoord!=a?Math.min(b,a)+this._dataItemGaps:Math.min(b,a),m=360-DvtMath.radsToDegrees(Math.max(c,d))+90,n=DvtMath.radsToDegrees(Math.abs(d-c));this.setWedgeParams(e,g,h,h,m,n,this._dataItemGaps,k);var k=DvtPlotAreaRenderer.polarToCartesian(a,c,this._availSpace),m=DvtPlotAreaRenderer.polarToCartesian(a,
d,this._availSpace),n=DvtPlotAreaRenderer.polarToCartesian(b,c,this._availSpace),t=DvtPlotAreaRenderer.polarToCartesian(b,d,this._availSpace),e=Math.min(k.x,m.x,n.x,t.x),g=Math.max(k.x,m.x,n.x,t.x),h=Math.min(k.y,m.y,n.y,t.y),k=Math.max(k.y,m.y,n.y,t.y);this._bbox=new DvtRectangle(e,h,g-e,k-h);this._baselineCoord=a;this._endCoord=b;this._x1=c;this._x2=d};DvtChartPolarBar.prototype.getBoundingBox=function(){return this._bbox};
var DvtChartRangeMarker=function(a,b,c,d,e,g,h){this.Init(a);this._markerSize=g;this._isInvisible=h;this._drawPath(b,c,d,e)};DvtObj.createSubclass(DvtChartRangeMarker,DvtPath,"DvtChartRangeMarker");
DvtChartRangeMarker.prototype._drawPath=function(a,b,c,d){var e=Math.atan2(d-b,c-a),g=this._markerSize/2,h=Math.PI/8,e=DvtPathUtils.moveTo(a+g*Math.cos(e+h),b+g*Math.sin(e+h))+DvtPathUtils.arcTo(g,g,2*(Math.PI-h),1,a+g*Math.cos(e-h),b+g*Math.sin(e-h))+DvtPathUtils.lineTo(c-g*Math.cos(e+h),d-g*Math.sin(e+h))+DvtPathUtils.arcTo(g,g,2*(Math.PI-h),1,c-g*Math.cos(e-h),d-g*Math.sin(e-h))+DvtPathUtils.closePath();this.setCmds(e);this._x1=a;this._y1=b;this._x2=c;this._y2=d};
DvtChartRangeMarker.prototype.setStyleProperties=function(a,b,c,d,e){this._dataColor=c;c=DvtSelectionEffectUtils.getHoverBorderColor(c);this._isInvisible?(this.setInvisibleFill(),this._hoverStroke=new DvtSolidStroke(c,1,1.5)):(this.setFill(a),this.setStroke(b),this.setHoverStroke(new DvtSolidStroke(d,1,1),new DvtSolidStroke(c,1,3.5)),this.setSelectedStroke(new DvtSolidStroke(d,1,1.5),new DvtSolidStroke(e,1,4.5)),this.setSelectedHoverStroke(new DvtSolidStroke(d,1,1.5),new DvtSolidStroke(c,1,4.5)))};
DvtChartRangeMarker.prototype.getDataColor=function(){return this._dataColor};DvtChartRangeMarker.prototype.showHoverEffect=function(){this._isInvisible?(this.IsShowingHoverEffect=!0,this.setStroke(this._hoverStroke)):DvtChartRangeMarker.superclass.showHoverEffect.call(this)};DvtChartRangeMarker.prototype.hideHoverEffect=function(){this._isInvisible?(this.IsShowingHoverEffect=!1,this.setStroke(this.isSelected()?DvtChartLineMarker.SELECTED_STROKE:DvtChartLineMarker.DEFAULT_STROKE)):DvtChartRangeMarker.superclass.hideHoverEffect.call(this)};
DvtChartRangeMarker.prototype.setSelected=function(a){this._isInvisible?this.IsSelected!=a&&(this.IsSelected=a,this.isSelected()?(this.setFill(DvtChartLineMarker.SELECTED_FILL),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:DvtChartLineMarker.SELECTED_STROKE)):(this.setInvisibleFill(),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:DvtChartLineMarker.DEFAULT_STROKE))):DvtChartRangeMarker.superclass.setSelected.call(this,a)};
DvtChartRangeMarker.prototype.UpdateSelectionEffect=function(){this._isInvisible||DvtChartRangeMarker.superclass.UpdateSelectionEffect.call(this)};DvtChartRangeMarker.prototype.getAnimationParams=function(){return[this._x1,this._y1,this._x2,this._y2]};DvtChartRangeMarker.prototype.setAnimationParams=function(a){this._drawPath(a[0],a[1],a[2],a[3])};DvtChartRangeMarker.prototype.isInvisible=function(){return this._isInvisible};DvtChartRangeMarker.prototype.getBoundingBox=function(){return this.getBoundingBox1().getUnion(this.getBoundingBox2())};
DvtChartRangeMarker.prototype.getBoundingBox1=function(){return new DvtRectangle(this._x1-this._markerSize/2,this._y1-this._markerSize/2,this._markerSize,this._markerSize)};DvtChartRangeMarker.prototype.getBoundingBox2=function(){return new DvtRectangle(this._x2-this._markerSize/2,this._y2-this._markerSize/2,this._markerSize,this._markerSize)};var DvtDataCursor=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtDataCursor,DvtContainer,"DvtDataCursor");DvtDataCursor.BEHAVIOR_SNAP="SNAP";
DvtDataCursor.BEHAVIOR_SMOOTH="SMOOTH";DvtDataCursor.BEHAVIOR_AUTO="AUTO";DvtDataCursor.TOOLTIP_ID="_dvtDataCursor";
DvtDataCursor.prototype.Init=function(a,b,c){DvtDataCursor.superclass.Init.call(this,a);this._bHoriz=c;this._options=b;this.setMouseEnabled(!1);this.setVisible(!1);a=b.lineWidth;c=b.lineColor;var d=DvtStroke.convertTypeString(b.lineStyle),e=new DvtSolidStroke(c,1,a);e.setStyle(d);this._cursorLine=new DvtLine(this.getCtx(),0,0,0,0,"dcLine");this._cursorLine.setStroke(e);this.addChild(this._cursorLine);"off"!=b.markerDisplayed&&(this._marker=new DvtContainer(this._context),this._marker.setMouseEnabled(!1),
this.addChild(this._marker),b=b.markerSize,d=new DvtSimpleMarker(this._context,DvtSimpleMarker.CIRCLE,null,0,0,b+4*a,b+4*a),d.setSolidFill(c),this._marker.addChild(d),a=new DvtSimpleMarker(this._context,DvtSimpleMarker.CIRCLE,null,0,0,b+2*a,b+2*a),a.setSolidFill("white"),this._marker.addChild(a),this._markerInnerCircle=new DvtSimpleMarker(this._context,DvtSimpleMarker.CIRCLE,null,0,0,b,b),this._marker.addChild(this._markerInnerCircle))};
DvtDataCursor.prototype.render=function(a,b,c,d,e,g){var h=this.isHorizontal(),k=DvtAgent.isRightToLeft(this.getCtx()),m;if(null!=e&&""!=e){var n=this.getCtx().getStageAbsolutePosition(),t=this.getCtx().getTooltipManager(DvtDataCursor.TOOLTIP_ID);t.showDatatip(b+n.x,c+n.y,e,g,!1);m=t.getTooltipBounds();e=this._options.markerSize+4*this._options.lineWidth;var u,v;h?(u=k?a.x-.75*m.w:a.x+a.w-m.w/4,v=d-m.h/2,!k&&u-b<e?u=b+e:k&&b-(u+m.w)<e&&(u=b-e-m.w)):(u=d-m.w/2,v=a.y-.75*m.h,c-(v+m.h)<e&&(v=c-e-m.h));
t.positionTip(u+n.x,v+n.y);m=t.getTooltipBounds();m.x-=n.x;m.y-=n.y}h?(this._cursorLine.setTranslateY(d),k?(this._cursorLine.setX1(m?m.x+m.w-1:a.x),this._cursorLine.setX2(a.x+a.w)):(this._cursorLine.setX1(a.x),this._cursorLine.setX2(m?m.x+1:a.x+a.w))):(this._cursorLine.setTranslateX(d),this._cursorLine.setY1(m?m.y+m.h-1:a.y),this._cursorLine.setY2(a.y+a.h));this._marker&&(this._marker.setTranslate(b,c),a=this._options.markerColor,this._markerInnerCircle.setSolidFill(a?a:g),DvtAgent.workaroundFirefoxRepaint(this._marker))};
DvtDataCursor.prototype.isHorizontal=function(){return this._bHoriz};DvtDataCursor.prototype.getBehavior=function(){return this._behavior?this._behavior:DvtDataCursor.BEHAVIOR_AUTO};DvtDataCursor.prototype.setBehavior=function(a){this._behavior=a};var DvtFunnelSlice=function(a,b,c,d,e,g,h,k,m){this.Init(a,b,c,d,e,g,h,k,m)};DvtObj.createSubclass(DvtFunnelSlice,DvtPath,"DvtFunnelSlice");
DvtFunnelSlice.prototype.Init=function(a,b,c,d,e,g,h,k,m){DvtFunnelSlice.superclass.Init.call(this,a.getCtx());this._chart=a;a=a.getOptions().styleDefaults;this._seriesIndex=b;this._numDrawnSeries=c;this._funnelWidth=d;this._funnelHeight=e;this._startPercent=g;this._valuePercent=h;this._fillPercent=k;this._3dRatio="on"==a.threeDEffect?1:0;this._gap=m;b=this._getPath();this._dataColor=DvtChartStyleUtils.getColor(this._chart,this._seriesIndex,0);this._backgroundColor=a.backgroundColor?a.backgroundColor:
a.funnelBackgroundColor;this.setCmds(b.slice);b.bar&&(this._bar=new DvtPath(this.getCtx(),b.bar),this.addChild(this._bar),this._bar.setMouseEnabled(!1));this._setColorProperties(b.sliceBounds);this._label=this._getSliceLabel(b.sliceBounds,b.barBounds);null!=this._label&&(this._label.setMouseEnabled(!1),this.addChild(this._label))};DvtFunnelSlice._FUNNEL_3D_WIDTH_RATIO=.12;DvtFunnelSlice._FUNNEL_ANGLE_2D=31;DvtFunnelSlice._FUNNEL_RATIO=6/22;DvtFunnelSlice._BORDER_COLOR="#FFFFFF";
DvtFunnelSlice._MIN_CHARS_DATA_LABEL=3;
DvtFunnelSlice.prototype._getPath=function(){var a=DvtAgent.isRightToLeft(this.getCtx()),b=DvtChartDataUtils.getSeriesCount(this._chart),c=(this._numDrawnSeries+1)*this._gap,d=DvtMath.degreesToRads(DvtFunnelSlice._FUNNEL_ANGLE_2D-2*this._3dRatio),b=(this._funnelWidth-b*this._gap)/Math.sin(DvtMath.degreesToRads(DvtFunnelSlice._FUNNEL_ANGLE_2D)),e=this._funnelHeight/Math.sin(d),g=this._3dRatio*this._funnelWidth/this._funnelHeight*DvtFunnelSlice._FUNNEL_3D_WIDTH_RATIO;1E-5>g&&(g=0);var h=d*(1-this._startPercent),
k=d*(1-this._startPercent-this._valuePercent),m=(1+DvtFunnelSlice._FUNNEL_RATIO)/2*this._funnelHeight+e,n=(1-DvtFunnelSlice._FUNNEL_RATIO)/2*this._funnelHeight-e;a?(c=[b*Math.sin(h)+c,m-e*Math.cos(h),b*Math.sin(k)+c,m-e*Math.cos(k),b*Math.sin(k)+c,n+e*Math.cos(k),b*Math.sin(h)+c,n+e*Math.cos(h)],h=0,k=1):(c=[this._funnelWidth-c-b*Math.sin(h),m-e*Math.cos(h),this._funnelWidth-c-b*Math.sin(k),m-e*Math.cos(k),this._funnelWidth-c-b*Math.sin(k),n+e*Math.cos(k),this._funnelWidth-c-b*Math.sin(h),n+e*Math.cos(h)],
h=1,k=0);var m=DvtPathUtils.moveTo(c[0],c[1]),n=null,m=m+DvtPathUtils.arcTo(g*(c[1]-c[7])/2,(c[1]-c[7])/2,Math.PI,k,c[6],c[7]),m=m+DvtPathUtils.arcTo(g*(c[1]-c[7])/2,(c[1]-c[7])/2,Math.PI,k,c[0],c[1]),m=m+DvtPathUtils.arcTo(b,e,d,h,c[2],c[3]),m=m+DvtPathUtils.arcTo(g*(c[3]-c[5])/2,(c[3]-c[5])/2,Math.PI,k,c[4],c[5]),m=m+DvtPathUtils.arcTo(b,e,d,h,c[6],c[7]),t=new DvtRectangle(Math.min(c[0],c[2]),c[5],Math.abs(c[0]-c[2]),Math.abs(c[3]-c[5]));if(null!=this._fillPercent)var u=Math.max(Math.min(this._fillPercent,
1),0),a=a?-u*Math.PI:u*Math.PI,n=DvtPathUtils.moveTo(c[0],c[1]),n=n+DvtPathUtils.arcTo(b,e,d,h,c[2],c[3]),n=n+DvtPathUtils.arcTo(g*(c[3]-c[5])/2,(c[3]-c[5])/2,a,k,c[2]+g*(c[3]-c[5])/2*Math.sin(a),(c[5]+c[3])/2+(c[3]-c[5])/2*Math.cos(a)),n=.95<this._fillPercent?n+DvtPathUtils.arcTo(b,e,d,h,c[6],c[1]+u*(c[7]-c[1])):.05>this._fillPercent?n+DvtPathUtils.arcTo(b,e,d,k,c[6],c[1]+u*(c[7]-c[1])):n+DvtPathUtils.lineTo(c[6]+g*(c[1]-c[7])/2*Math.sin(a),(c[7]+c[1])/2+(c[1]-c[7])/2*Math.cos(a)),n=n+DvtPathUtils.arcTo(g*
(c[1]-c[7])/2,(c[1]-c[7])/2,a,h,c[0],c[1]),n=n+DvtPathUtils.closePath(),u=new DvtRectangle(Math.min(c[0],c[2]),c[5]+Math.abs(c[3]-c[5])*(1-u),Math.abs(c[0]-c[2]),Math.abs(c[3]-c[5])*u);return{slice:m,bar:n,sliceBounds:t,barBounds:n?u:t}};
DvtFunnelSlice.prototype._getSliceLabel=function(a,b){var c=DvtChartDataUtils.getDataLabel(this._chart,this._seriesIndex,0);c||(c=DvtChartDataUtils.getSeriesLabel(this._chart,this._seriesIndex));if(c&&"none"!=DvtChartStyleUtils.getDataLabelPosition(this._chart,this._seriesIndex,0)){var c=new DvtOutputText(this.getCtx(),c,0,0),d=null!=DvtChartStyleUtils.getPattern(this._chart,this._seriesIndex,0),e=[this._chart.getOptions().styleDefaults.dataLabelStyle,new DvtCSSStyle(this._chart.getOptions().styleDefaults.sliceLabelStyle),
new DvtCSSStyle(DvtChartDataUtils.getDataItem(this._chart,this._seriesIndex,0).labelStyle)],e=DvtCSSStyle.mergeStyles(e);c.setCSSStyle(e);if(DvtTextUtils.fitText(c,a.h-10,a.w,this,DvtFunnelSlice._MIN_CHARS_DATA_LABEL)){var g=c.measureDimensions(),h=this._getLabelPosition(a);if(d){var k=.15*g.h,m=DvtAgent.isRightToLeft(this.getCtx())?.5:-.5,k=DvtPathUtils.roundedRectangle(g.x-k,g.y,g.w+2*k,g.h,2,2,2,2),k=new DvtPath(this.getCtx(),k);k.setSolidFill("#FFFFFF",.9);h.translate(m*g.h,-m*g.w);k.setMatrix(h);
this.addChild(k)}d=d?"#000000":b.containsPoint(a.x,a.y+(a.h-g.w)/2)?DvtColorUtils.getContrastingTextColor(this._dataColor):DvtColorUtils.getContrastingTextColor(this._backgroundColor);e.getStyle("color")&&!DvtAgent.isHighContrast()||c.setCSSStyle(e.setStyle("color",d));c.setMatrix(this._getLabelPosition(a));c.alignCenter();c.alignMiddle();return c}}};
DvtFunnelSlice.prototype._getLabelPosition=function(a){var b=a.h*this._funnelWidth/this._funnelHeight*DvtFunnelSlice._FUNNEL_3D_WIDTH_RATIO/2*this._3dRatio,c=new DvtMatrix;DvtAgent.isRightToLeft(this.getCtx())?(c.rotate(Math.PI/2),c.translate(a.x+a.w/2-b,a.y+a.h/2)):(c.rotate(3*Math.PI/2),c.translate(a.x+a.w/2+b,a.y+a.h/2));return c};
DvtFunnelSlice.prototype._setColorProperties=function(a){var b=DvtChartSeriesEffectUtils.getFunnelSliceFill(this._chart,this._seriesIndex,this._dataColor,a),c=DvtChartStyleUtils.getBorderColor(this._chart,this._seriesIndex,0);null==c&&0<this._3dRatio&&(c=DvtFunnelSlice._BORDER_COLOR);var d=DvtChartStyleUtils.getBorderWidth(this._chart,this._seriesIndex,0);a=DvtChartSeriesEffectUtils.getFunnelSliceFill(this._chart,this._seriesIndex,this._backgroundColor,a,!0);this._bar?(this.setFill(a),this._bar.setFill(b)):
this.setFill(b);c&&this.setSolidStroke(c,null,d);this.OriginalStroke=this.getStroke();this._chart.isSelectionSupported()&&(b=DvtSelectionEffectUtils.getHoverBorderColor(this._dataColor),c=DvtChartStyleUtils.getSelectedInnerColor(this._chart),d=DvtChartStyleUtils.getSelectedOuterColor(this._chart)?DvtChartStyleUtils.getSelectedOuterColor(this._chart):this._dataColor,a=null!=this._bar?this._bar:this,a.setHoverStroke(new DvtSolidStroke(b,1,2)),a.setSelectedStroke(new DvtSolidStroke(c,1,1.5),new DvtSolidStroke(d,
1,4.5)),a.setSelectedHoverStroke(new DvtSolidStroke(c,1,1.5),new DvtSolidStroke(b,1,4.5)),this.setCursor(DvtSelectionEffectUtils.getSelectingCursor()))};DvtFunnelSlice.prototype.getAnimationParams=function(){return[this._startPercent,this._valuePercent,this._fillPercent,this.getAlpha(),this._3dRatio]};
DvtFunnelSlice.prototype.setAnimationParams=function(a){this._startPercent=a[0];this._valuePercent=a[1];this._fillPercent=null!=this._fillPercent?a[2]:null;this.setAlpha(a[3]);this._3dRatio=a[4];a=this._getPath();this.setCmds(a.slice);a.bar&&this._bar&&this._bar.setCmds(a.bar);this._label&&this._label.setMatrix(this._getLabelPosition(a.sliceBounds))};
DvtFunnelSlice.prototype.setSelected=function(a){if(null!=this._bar){if(this.IsSelected==a)return;this.IsSelected=a;this._bar.setSelected(a)}else DvtFunnelSlice.superclass.setSelected.call(this,a);var b=this.getDimensions(),c=null!=this._bar?this._bar:this,d=b.w;a?(c.setScaleX((d-3)/d),c.setTranslateX(Math.ceil(1.5)+3/d*b.x)):(c.setScaleX(1),c.setTranslateX(0))};DvtFunnelSlice.prototype.showHoverEffect=function(){null!=this._bar?this._bar.showHoverEffect():DvtFunnelSlice.superclass.showHoverEffect.call(this)};
DvtFunnelSlice.prototype.hideHoverEffect=function(){null!=this._bar?this._bar.hideHoverEffect():DvtFunnelSlice.superclass.hideHoverEffect.call(this)};DvtFunnelSlice.prototype.copyShape=function(){return new DvtFunnelSlice(this._chart,this._seriesIndex,this._numDrawnSeries,this._funnelWidth,this._funnelHeight,this._startPercent,this._valuePercent,this._fillPercent,this._gap)};var DvtPieChart=function(a,b,c,d){this.Init(a,b,c,d)};DvtPieChart._THREED_TILT=.59;DvtPieChart._THREED_DEPTH=.1;
DvtPieChart._RADIUS=.45;DvtPieChart._RADIUS_LABELS=.38;DvtObj.createSubclass(DvtPieChart,DvtContainer,"DvtPieChart");
DvtPieChart.prototype.Init=function(a,b,c,d){DvtPieChart.superclass.Init.call(this,a.getCtx());this.chart=a;this._options=a.getOptions();this._frame=b.clone();a.pieChart=this;c=this.getLabelPosition();d=DvtChartDataUtils.getSeriesCount(a);for(var e=0;e<d;e++){var g=DvtChartDataUtils.getDataItem(a,e,0);!g||"center"!=c&&"none"!=c||"outsideSlice"!=g.labelPosition||(c="outsideSlice")}this._center=new DvtPoint(b.x+Math.floor(b.w/2),b.y+Math.floor(b.h/2));a="center"==c||"none"==c?DvtPieChart._RADIUS:DvtPieChart._RADIUS_LABELS;
this._radiusY=this._radiusX=Math.floor(Math.min(b.w,b.h)*a);this._depth=0;this._anchorOffset=90;this.is3D()&&(this._depth=b.h*DvtPieChart._THREED_DEPTH,this._center.y-=Math.floor(this._depth/2),this._radiusY*=DvtPieChart._THREED_TILT);this._slices=this._createSlices();this._shapesContainer=new DvtContainer(this.getCtx());this._numSelectedObjsInFront=this._numFrontObjs=0};DvtPieChart.prototype.getOptions=function(){return this._options};
DvtPieChart.prototype.highlight=function(a){DvtCategoryRolloverHandler.highlight(a,this._slices,"any"==this.getOptions().highlightMatch)};
DvtPieChart.prototype._createSlices=function(){for(var a=[],b,c=DvtPieChartUtils.getRenderedSeriesIndices(this.chart),d=DvtPieChartUtils.getOtherValue(this.chart),e=0;e<c.length;e++)b=c[e],DvtChartStyleUtils.isDataItemRendered(this.chart,b)&&(b=new DvtPieSlice(this,b),0>=b.getValue()||a.push(b));0<d&&(c=new DvtPieSlice(this),"ascending"==this.chart.getOptions().sorting?a.unshift(c):a.push(c));DvtAgent.isRightToLeft(this.getCtx())&&a.reverse();return a};
DvtPieChart.prototype.setInitialSelection=function(){var a=this.chart.getSelectionHandler();if(a){for(var b=DvtChartDataUtils.getInitialSelection(this.chart),c=[],d=0;d<b.length;d++)for(var e=0;e<this._slices.length;e++){var g=this._slices[e].getId();g&&(b[d].id&&g.getId()==b[d].id||g.getSeries()==b[d].series&&g.getGroup()==b[d].group)&&c.push(g)}DvtPieChartUtils.isOtherSliceSelected(this.chart,b)&&(b=DvtPieChartUtils.getOtherSliceId(this.chart),c.push(b));a.processInitialSelections(c,this._slices)}};
DvtPieChart.prototype.render=function(){var a;this.contains(this._shapesContainer)||(this._shapesContainer||(this._shapesContainer=new DvtContainer(this.getCtx())),this.addChild(this._shapesContainer),this.is3D()||this.getSkin()!=DvtCSSStyle.SKIN_SKYROS||(a=DvtColorUtils.makeRGBA(78,87,101,.45),a=new DvtShadow(a,4,7,7,54,2,3,!1,!1,!1)));DvtPieChart._layoutSlices(this._slices,this._anchorOffset);for(var b=0;b<this._slices.length;b++)this._slices[b].preRender();var c=DvtPieChart._orderSlicesForRendering(this._slices);
DvtPieLabelUtils.createPieCenterLabel(this);this._duringDisplayAnim||DvtPieLabelUtils.layoutLabelsAndFeelers(this);for(b=0;b<c.length;b++)c[b].render(this._duringDisplayAnim);DvtAgent.isPlatformWebkit()||a&&this._shapesContainer.addDrawEffect(a);this.setInitialSelection();this.highlight(DvtChartStyleUtils.getHighlightedCategories(this.chart))};DvtPieChart.prototype.getTotalValue=function(){for(var a=0,b=0;b<this._slices.length;b++){var c=this._slices[b].getValue();0<=c&&(a+=c)}return a};
DvtPieChart._layoutSlices=function(a,b){var c,d,e,g=0,h=a?a.length:0;360<b&&(b-=360);0>b&&(b+=360);var k=e=0;0<h&&(k=a[0].getPieChart().getTotalValue());for(c=0;c<h;c++)d=a[c],e=d.getValue(),e=0==k?0:Math.abs(e)/k*100,g=3.6*e,e=b-g,0>e&&(e+=360),d.setAngleStart(e),d.setAngleExtent(g),b=d.getAngleStart()};
DvtPieChart._orderSlicesForRendering=function(a){var b=[],c,d=a?a.length:0,e,g=-1,h,k;for(c=0;c<d;c++)if(e=a[c],h=e.getAngleStart(),e=e.getAngleExtent(),e=h+e,360<e&&(e-=360),0>e&&(e+=360),90==e||90>h&&90<e){g=c;k=e-90;break}h=[];for(c=g;c<d;c++)h.push(a[c]);for(c=0;c<g;c++)h.push(a[c]);g=a=0;k=180+k;for(c=0;c<d;c++)if(e=h[c]){if(a+e.getAngleExtent()>k){g=c;break}b.push(e);a+=e.getAngleExtent()}for(c=d-1;c>=g;c--)(e=h[c])&&b.push(e);return b};DvtPieChart.prototype.is3D=function(){return"on"==this._options.styleDefaults.threeDEffect};
DvtPieChart.prototype.__calcMaxExplodeDistance=function(){return this._radiusX*(.5/DvtPieChart._RADIUS-1)};DvtPieChart.prototype.getAnimationDuration=function(){return DvtChartStyleUtils.getAnimationDuration(this.chart)};
DvtPieChart.prototype.getDisplayAnimation=function(){this._duringDisplayAnim=!0;var a=new DvtDataAnimationHandler(this.getCtx(),this),b=this.getAnimationDuration(),c=DvtPieSlice.createFillerSlice(this,this.getTotalValue());this._slices.push(c);var d=new DvtCustomAnimation(this.getCtx(),c,b);d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,c,c.GetAnimationParams,c.SetAnimationParams,c.getDeletedAnimationParams());d.setOnEnd(c._removeDeletedSlice,c);a.add(d,0);for(c=0;c<this._slices.length-1;c++)this._slices[c].animateInsert(a);
c=new DvtCustomAnimation(this.getCtx(),this,b);c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams());a.add(c,0);d=[];for(c=0;c<this._slices.length;c++)d=d.concat(this._slices[c].getLabelAndFeeler());b=new DvtAnimFadeIn(this._context,d,b);a.add(b,0);this._setAnimationParams();a=a.getAnimation(!0);a.setOnEnd(this._onEnd,this);return a};DvtPieChart.prototype._onEnd=function(){this._duringDisplayAnim=!1;this._setAnimationParams()};
DvtPieChart.prototype.getCenter=function(){return this._center};DvtPieChart.prototype.getInnerRadius=function(){return this.is3D()?0:this._options.styleDefaults.pieInnerRadius*Math.min(this._radiusX,this._radiusY)*.95};DvtPieChart.prototype.__getFrame=function(){return this._frame};DvtPieChart.prototype.getRadiusX=function(){return this._radiusX};DvtPieChart.prototype.getRadiusY=function(){return this._radiusY};DvtPieChart.prototype.getDepth=function(){return this._depth};
DvtPieChart.prototype.getSliceDisplayable=function(a){return 0<=a&&a<this._slices.length?this._slices[a].getTopDisplayable():null};DvtPieChart.prototype.__getShapesContainer=function(){return this._shapesContainer};DvtPieChart.prototype.__getSlices=function(){return this._slices};
DvtPieChart.prototype.animateUpdate=function(a,b){var c=new DvtDataAnimationHandler(this.getCtx(),this);c.constructAnimation(b.__getSlices(),this.__getSlices());var c=c.getAnimation(!0),d=new DvtCustomAnimation(this.getCtx(),this,this.getAnimationDuration());d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams());c=new DvtParallelPlayable(this.getCtx(),c,d);c.setOnEnd(this._setAnimationParams,this);a.add(c,0);this._setAnimationParams([b.getDepth(),
b.getRadiusY(),b.getCenter().y])};DvtPieChart.prototype.animateInsert=function(a){};DvtPieChart.prototype.animateDelete=function(a,b){};DvtPieChart.prototype._getAnimationParams=function(){return[this._depth,this._radiusY,this._center.y]};DvtPieChart.prototype._setAnimationParams=function(a){this.removeChildren();this._shapesContainer&&this._shapesContainer.destroy();this._shapesContainer=null;a&&(this._depth=a[0],this._radiusY=a[1],this._center.y=a[2]);this.render()};
DvtPieChart.prototype.bringToFrontOfSelection=function(a){var b=a.getPieChart()._shapesContainer;if(b){var c=b.getNumChildren();1<c-this._numFrontObjs&&(b.removeChild(a._topSurface[0]),b.addChildAt(a._topSurface[0],c-this._numFrontObjs-1))}};
DvtPieChart.prototype.pushToBackOfSelection=function(a){for(var b=this._slices.length,c=0,d=0;d<b;d++)this._slices[d].isSelected()&&c++;this._numSelectedObjsInFront=c;if(b=a.getPieChart()._shapesContainer)c=b.getNumChildren()-this._numFrontObjs-1-this._numSelectedObjsInFront,0<=c&&(b.removeChild(a._topSurface[0]),b.addChildAt(a._topSurface[0],c))};DvtPieChart.prototype.setNumFrontObjs=function(a){this._numFrontObjs=a};
DvtPieChart.prototype.getShapesForViewSwitcher=function(a){a={};if(this._slices)for(var b=0;b<this._slices.length;b++){var c=this._slices[b];if(c){var d=c.getId();d&&(d=d.getId())&&c._topSurface&&0<c._topSurface.length&&(a[d]=c._topSurface[0])}}return a};DvtPieChart.prototype.getLabelPosition=function(){var a=this._options.styleDefaults.sliceLabelPosition;a||(a=this._options.styleDefaults.dataLabelPosition);return DvtPieChart.parseLabelPosition(a)};
DvtPieChart.prototype.getSeriesLabelPosition=function(a){var b=this.getLabelPosition();(a=DvtChartDataUtils.getDataItem(this.chart,a,0))&&a.labelPosition&&(b=a.labelPosition);return DvtPieChart.parseLabelPosition(b)};DvtPieChart.parseLabelPosition=function(a){return"center"==a||"inside"==a?"center":"outsideSlice"==a||"outside"==a?"outsideSlice":"none"==a?"none":"auto"};DvtPieChart.prototype.getSkin=function(){return this._options.skin};var DvtPieSlice=function(a,b){this.Init(a,b)};
DvtObj.createSubclass(DvtPieSlice,DvtObj,"DvtPieSlice");
DvtPieSlice.prototype.Init=function(a,b){this._pieChart=a;this._chart=a.chart;this._angleExtent=this._angleStart=0;this._crustSurface=this._rightSurface=this._leftSurface=this._topSurface=null;this._explodeOffsetY=this._explodeOffsetX=0;this._sliceLabelString=this._sliceLabel=null;this._hasFeeler=!1;this._outsideFeelerEnd=this._outsideFeelerMid=this._outsideFeelerStart=this._feelerHoriz=this._feelerRad=null;this._selecting=this._selected=!1;this._centerX=this._pieChart.getCenter().x;this._centerY=
this._pieChart.getCenter().y;this._radiusX=this._pieChart.getRadiusX();this._radiusY=this._pieChart.getRadiusY();this._depth=this._pieChart.getDepth();var c=this._chart.getOptions();null!=b?(c=DvtChartDataUtils.getDataItem(this._chart,b,0),this._value=DvtChartDataUtils.getValue(this._chart,b,0),this._explode=DvtPieChartUtils.getSliceExplode(this._chart,b),this._fillColor=DvtChartStyleUtils.getColor(this._chart,b),this._fillPattern=DvtChartStyleUtils.getPattern(this._chart,b,0),this._strokeColor=DvtChartStyleUtils.getBorderColor(this._chart,
b),this._borderWidth=DvtChartStyleUtils.getBorderWidth(this._chart,b),this._customLabel=c.label,this._seriesLabel=DvtChartDataUtils.getSeries(this._chart,b),this._action=c.action,this._drillable=DvtChartEventUtils.isDataItemDrillable(this._chart,b,0),this._showPopupBehaviors=this._chart.getShowPopupBehaviors(c._id),this._id=DvtPieChartUtils.getSliceId(this._chart,b),this._seriesIndex=b,this._categories=c.categories?c.categories:DvtChartDataUtils.getSeriesItem(this._chart,b).categories):(this._value=
DvtPieChartUtils.getOtherValue(this._chart),this._explode=0,this._fillColor=c.styleDefaults.otherColor,this._fillPattern=null,this._strokeColor=c.styleDefaults.borderColor,this._borderWidth=c.styleDefaults.borderWidth,this._customLabel=null,this._seriesLabel=DvtBundle.getTranslatedString(DvtBundle.CHART_PREFIX,"LABEL_OTHER",null),this._action=null,this._drillable=!1,this._showPopupBehaviors=DvtPieChartUtils.getOtherSliceShowPopupBehaviors(this._chart),this._id=DvtPieChartUtils.getOtherSliceId(this._chart))};
DvtPieSlice.prototype.getPieChart=function(){return this._pieChart};
DvtPieSlice.prototype.render=function(a){for(var b=DvtPieSlice._sortPieSurfaces(this._topSurface,this._leftSurface,this._rightSurface,this._crustSurface,this._angleStart,this._angleExtent),c=b.length,d=0;d<c;d++)for(var e=b[d],g=e.length,h=0;h<g;h++)this._pieChart.__getShapesContainer().addChild(e[h]),e[h].render&&e[h].render();this._sliceLabel&&(this._pieChart.addChild(this._sliceLabel),DvtPieRenderUtils.associate(this,[this._sliceLabel]),a?(this._pieChart.addChild(this._feelerRad),this._pieChart.addChild(this._feelerHoriz)):
this._renderOutsideFeeler());this._explodeSlice();if(this._action||this._drillable)for(a=this.getDisplayables(),d=0;d<a.length;d++)a[d].setCursor(DvtSelectionEffectUtils.getSelectingCursor());if(d=this.getTopDisplayable())d.setAriaRole("img"),this._updateAriaLabel()};
DvtPieSlice.prototype._feelerFromPts=function(a,b){var c=new DvtLine(this._pieChart.getCtx(),a.x,a.y,b.x,b.y),d=this._pieChart.getOptions().styleDefaults.pieFeelerColor,d=new DvtSolidStroke(d);c.setStroke(d);this._pieChart.addChild(c);return c};DvtPieSlice.prototype._renderOutsideFeeler=function(){if(this._hasFeeler){var a=this._feelerFromPts(this._outsideFeelerStart,this._outsideFeelerMid),b=this._feelerFromPts(this._outsideFeelerMid,this._outsideFeelerEnd);this._feelerRad=a;this._feelerHoriz=b}};
DvtPieSlice.prototype.preRender=function(){var a=this._bFillerSlice?"color":DvtChartStyleUtils.getSeriesEffect(this._chart),b=this.getFillColor(),c=this.getFillPattern();if("pattern"==a||null!=c)c=new DvtPatternFill(c,b),a="pattern";else if("gradient"==a)var d=this._pieChart.getSkin(),c=d==DvtCSSStyle.SKIN_SKYROS?297:270,e=this._pieChart.is3D()?"3D":"2D",g=DvtPieRenderUtils.getGradientColors(DvtColorUtils.getRGB(b),e,d),h=DvtPieRenderUtils.getGradientAlphas(DvtColorUtils.getAlpha(b),e),d=DvtPieRenderUtils.getGradientRatios(e,
d),e=[Math.floor(this._centerX-this._radiusX),Math.floor(this._centerY-this._radiusY),Math.ceil(2*this._radiusX),Math.ceil(2*this._radiusY)],c=new DvtLinearGradientFill(c,g,h,d,e);else c=new DvtSolidFill(b);this._topSurface=DvtPieRenderUtils.createTopSurface(this,c);if(0<this._depth||this._radiusX!=this._radiusY)a="gradient"==a,c=new DvtSolidFill(DvtColorUtils.getDarker(b,.6)),b=a?DvtPieRenderUtils.generateLateralGradientFill(this,DvtPieRenderUtils.SIDE):c,a=a?DvtPieRenderUtils.generateLateralGradientFill(this,
DvtPieRenderUtils.CRUST):c,this._leftSurface=DvtPieRenderUtils.createLateralSurface(this,DvtPieRenderUtils.SURFACE_LEFT,b),this._rightSurface=DvtPieRenderUtils.createLateralSurface(this,DvtPieRenderUtils.SURFACE_RIGHT,b),this._crustSurface=DvtPieRenderUtils.createLateralSurface(this,DvtPieRenderUtils.SURFACE_CRUST,a)};
DvtPieSlice._sortPieSurfaces=function(a,b,c,d,e,g){var h=[];b&&c&&d&&(270>=e&&270<e+g?(h.push(b),h.push(c),h.push(d)):270<e||90>=e+g?(h.push(b),h.push(d),h.push(c)):(h.push(c),h.push(d),h.push(b)));h.push(a);return h};DvtPieSlice.oppositeDirection=function(a,b,c){return 0<a-b!=0<a-c};
DvtPieSlice.prototype._explodeSlice=function(){if(0!=this._explode){var a=(360-(this._angleStart+this._angleExtent/2))*DvtMath.RADS_PER_DEGREE,b=this._pieChart.is3D()?DvtPieChart._THREED_TILT:1,c=this._explode*this._pieChart.__calcMaxExplodeDistance();this._explodeOffsetX=Math.cos(a)*c;this._explodeOffsetY=Math.sin(a)*b*c;DvtAgent.isPlatformWebkit()&&(this._explodeOffsetX=Math.round(this._explodeOffsetX),this._explodeOffsetY=Math.round(this._explodeOffsetY))}else this._explodeOffsetY=this._explodeOffsetX=
0;this._topSurface&&(a=this._pieChart.is3D()&&this._topSurface[0].getSelectionOffset?this._topSurface[0].getSelectionOffset():[],DvtPieSlice._translateShapes(this._topSurface,a[0]?a[0]+this._explodeOffsetX:this._explodeOffsetX,a[1]?a[1]+this._explodeOffsetY:this._explodeOffsetY));this._rightSurface&&DvtPieSlice._translateShapes(this._rightSurface,this._explodeOffsetX,this._explodeOffsetY);this._leftSurface&&DvtPieSlice._translateShapes(this._leftSurface,this._explodeOffsetX,this._explodeOffsetY);
this._crustSurface&&DvtPieSlice._translateShapes(this._crustSurface,this._explodeOffsetX,this._explodeOffsetY);if(this._hasFeeler){var a=this._outsideFeelerStart.x,b=this._outsideFeelerStart.y,c=a+this._explodeOffsetX,d=b+this._explodeOffsetY;this._feelerRad.setX1(c);this._feelerRad.setY1(d);var e=this._outsideFeelerMid.x,g=this._outsideFeelerMid.y;DvtPieSlice.oppositeDirection(e,a,c)?(this._feelerRad.setX2(c),this._feelerHoriz.setX1(c)):(this._feelerRad.setX2(e),this._feelerHoriz.setX1(e));DvtPieSlice.oppositeDirection(g,
b,d)?(this._feelerRad.setY2(d),this._feelerHoriz.setY1(d)):(this._feelerRad.setY2(g),this._feelerHoriz.setY1(g))}this._sliceLabel&&!this._hasFeeler&&this._sliceLabel.setTranslate(this._explodeOffsetX,this._explodeOffsetY)};DvtPieSlice._translateShapes=function(a,b,c){if(a)for(var d=a.length,e=0;e<d;e++)a[e].setTranslate(b,c)};DvtPieSlice.prototype.getRadiusX=function(){return this._radiusX};DvtPieSlice.prototype.getRadiusY=function(){return this._radiusY};
DvtPieSlice.prototype.getCenter=function(){return new DvtPoint(this._centerX,this._centerY)};DvtPieSlice.prototype.getDepth=function(){return this._depth};DvtPieSlice.prototype.getAngleExtent=function(){return this._angleExtent};DvtPieSlice.prototype.setAngleExtent=function(a){this._angleExtent=a};DvtPieSlice.prototype.getAngleStart=function(){return this._angleStart};DvtPieSlice.prototype.setAngleStart=function(a){this._angleStart=a};DvtPieSlice.prototype.__getExplodeOffsetX=function(){return this._explodeOffsetX};
DvtPieSlice.prototype.__getExplodeOffsetY=function(){return this._explodeOffsetY};DvtPieSlice.prototype.setOutsideFeelerPoints=function(a,b,c){this._outsideFeelerStart=a;this._outsideFeelerMid=b;this._outsideFeelerEnd=c;this._hasFeeler=!0};DvtPieSlice.prototype.setNoOutsideFeeler=function(){this._outsideFeelerEnd=this._outsideFeelerMid=this._outsideFeelerStart=null;this._hasFeeler=!1};
DvtPieSlice.prototype.getLabelAndFeeler=function(){var a=[];this._sliceLabel&&a.push(this._sliceLabel);this._feelerRad&&a.push(this._feelerRad);this._feelerHoriz&&a.push(this._feelerHoriz);return a};DvtPieSlice.prototype.getSliceLabel=function(){return this._sliceLabel};DvtPieSlice.prototype.setSliceLabel=function(a){this._sliceLabel=a};DvtPieSlice.prototype.getSliceLabelString=function(){return this._sliceLabelString};DvtPieSlice.prototype.setSliceLabelString=function(a){this._sliceLabelString=a};
DvtPieSlice.prototype.getTopSurface=function(){return this._topSurface};DvtPieSlice.prototype.getValue=function(){return this._value};DvtPieSlice.prototype.getId=function(){return this._id};DvtPieSlice.prototype.getSeriesIndex=function(){return this._seriesIndex};DvtPieSlice.containsRect=function(a,b){return b.contains(a.x,a.y)&&b.contains(a.x+a.w,a.y)&&b.contains(a.x+a.w,a.y+a.h)&&b.contains(a.x,a.y+a.h)};DvtPieSlice._shapeIsSelectable=function(a){return a instanceof DvtSelectableWedge};
DvtPieSlice.prototype.contains=function(a,b){for(var c=this._pieChart.getInnerRadius(),d=this._pieChart.getCenter(),e=(a-d.x)/this._radiusX,g=(b-d.y)/this._radiusY,d=-Math.atan2(g,e)*(180/Math.PI);d<this._angleStart;)d+=360;for(;360<=d-this._angleStart;)d-=360;e=Math.pow(e,2)+Math.pow(g,2);c=Math.sqrt(e)>c/this._radiusX&&1>=e;d=d<=this._angleStart+this._angleExtent;return c&&d};
DvtPieSlice.prototype.GetAnimationParams=function(){var a=DvtColorUtils.getRed(this._fillColor),b=DvtColorUtils.getGreen(this._fillColor),c=DvtColorUtils.getBlue(this._fillColor),d=DvtColorUtils.getAlpha(this._fillColor);return[this._value,this._radiusX,this._radiusY,this._explode,this._centerX,this._centerY,this._depth,a,b,c,d]};
DvtPieSlice.prototype.SetAnimationParams=function(a){this._value=a[0];this._radiusX=a[1];this._radiusY=a[2];this._explode=a[3];this._centerX=a[4];this._centerY=a[5];this._depth=a[6];var b=Math.round(a[7]),c=Math.round(a[8]),d=Math.round(a[9]);a=Math.round(a[10]);this._fillColor=DvtColorUtils.makeRGBA(b,c,d,a)};DvtPieSlice.prototype.getDeletedAnimationParams=function(){var a=this.GetAnimationParams();a[0]=0;a[1]=this.getInnerRadius();a[2]=this.getInnerRadius();a[3]=0;return a};
DvtPieSlice.prototype.animateUpdate=function(a,b){var c=b.GetAnimationParams(),d=this.GetAnimationParams();if(!DvtArrayUtils.equals(c,d)){var e=new DvtCustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());e.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,d);a.add(e,0);this.SetAnimationParams(c)}};
DvtPieSlice.prototype.animateInsert=function(a){var b=new DvtCustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());b.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.GetAnimationParams());a.add(b,0);this.SetAnimationParams(this.getDeletedAnimationParams())};
DvtPieSlice.prototype.animateDelete=function(a,b){var c=b.__getSlices(),d=this.getPieChart().__getSlices(),e=DvtArrayUtils.getIndex(d,this)-1;if(0<=e)for(d=d[e].getId(),e=0;e<c.length;e++){if(c[e].getId().equals(d)){c.splice(e+1,0,this);break}}else c.splice(0,0,this);this._pieChart=b;c=new DvtCustomAnimation(b.getCtx(),this,this.getPieChart().getAnimationDuration());c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.getDeletedAnimationParams());
c.setOnEnd(this._removeDeletedSlice,this);a.add(c,0)};DvtPieSlice.prototype._removeDeletedSlice=function(){var a=this.getPieChart().__getSlices(),b=DvtArrayUtils.getIndex(a,this);0<=b&&a.splice(b,1)};
DvtPieSlice.prototype.getDisplayables=function(){var a=[];this._topSurface&&(a=a.concat(this._topSurface));this._leftSurface&&(a=a.concat(this._leftSurface));this._rightSurface&&(a=a.concat(this._rightSurface));this._crustSurface&&(a=a.concat(this._crustSurface));this._sliceLabel&&a.push(this._sliceLabel);this._feelerRad&&a.push(this._feelerRad);this._feelerHoriz&&a.push(this._feelerHoriz);return a};
DvtPieSlice.prototype.getAriaLabel=function(){var a;a=null==this._seriesIndex?DvtChartTooltipUtils.getOtherSliceDatatip(this._chart,this._value,!1):DvtChartTooltipUtils.getDatatip(this._chart,this._seriesIndex,0,!1);var b=DvtBundle.getTranslatedString(DvtBundle.CHART_PREFIX,"LABEL_PERCENTAGE",null),c=DvtPieLabelUtils.generateSliceLabelString(this,"percent");a+="; "+DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[b,c]);b=[];this.isSelectable()&&b.push(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,
this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED"));DvtChartEventUtils.isDataItemDrillable(this._chart,this._seriesIndex,this._groupIndex)&&b.push(DvtBundle.getTranslation(this._pieChart.getOptions(),"stateDrillable",DvtBundle.UTIL_PREFIX,"STATE_DRILLABLE"));return DvtDisplayable.generateAriaLabel(a,b)};DvtPieSlice.prototype._updateAriaLabel=function(){var a=this.getTopDisplayable();a&&!DvtAgent.deferAriaCreation()&&a.setAriaProperty("label",this.getAriaLabel())};
DvtPieSlice.prototype.getTopDisplayable=function(){return this._topSurface&&0<this._topSurface.length?this._topSurface[0]:null};DvtPieSlice.prototype.isSelectable=function(){return this._chart.isSelectionSupported()};DvtPieSlice.prototype.isSelected=function(){return this._selected};
DvtPieSlice.prototype.setSelected=function(a,b){(this._selected=a)?this._pieChart.bringToFrontOfSelection(this):this._selecting||this._pieChart.pushToBackOfSelection(this);if(DvtChartStyleUtils.isSelectionHighlighted(this._chart))for(var c=this.getDisplayables(),d=0;d<c.length;d++)DvtPieSlice._shapeIsSelectable(c[d])&&c[d].setSelected(a);DvtChartStyleUtils.isSelectionExploded(this._chart)&&(c=a?1:0,b||"none"==DvtChartStyleUtils.getAnimationOnDataChange(this._chart)?this.setExplode(c):(d=new DvtCustomAnimation(this._pieChart.getCtx(),
this,this._pieChart.getAnimationDuration()/2),d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getExplode,this.setExplode,c),d.play()));this._updateAriaLabel()};DvtPieSlice.prototype.showHoverEffect=function(){this._selecting=!0;this._pieChart.bringToFrontOfSelection(this);for(var a=this.getDisplayables(),b=0;b<a.length;b++)DvtPieSlice._shapeIsSelectable(a[b])&&a[b].showHoverEffect()};
DvtPieSlice.prototype.hideHoverEffect=function(){this._selecting=!1;this._selected||this._pieChart.pushToBackOfSelection(this);for(var a=this.getDisplayables(),b=0;b<a.length;b++)DvtPieSlice._shapeIsSelectable(a[b])&&a[b].hideHoverEffect()};DvtPieSlice.prototype.getDatatip=function(a,b,c){return a==this._sliceLabel&&this._sliceLabel&&this._sliceLabel.isTruncated()?this.getSliceLabelString():this.getTooltip()};DvtPieSlice.prototype.getDatatipColor=function(){return this.getFillColor()};
DvtPieSlice.prototype.getCategories=function(){return this._categories&&0<this._categories.length?this._categories:[this.getId().getSeries()]};
DvtPieSlice.prototype.getNextNavigable=function(a){var b=a.keyCode;if(a.type==DvtMouseEvent.CLICK||b==DvtKeyboardEvent.SPACE&&a.ctrlKey)return this;a=DvtAgent.isRightToLeft(this._chart.getCtx());var c=this._pieChart.__getSlices(),d=c.indexOf(this),e=null;if(b==DvtKeyboardEvent.RIGHT_ARROW||b==DvtKeyboardEvent.DOWN_ARROW&&!a||b==DvtKeyboardEvent.UP_ARROW&&a)e=d<c.length-1?c[d+1]:c[0];else if(b==DvtKeyboardEvent.LEFT_ARROW||b==DvtKeyboardEvent.DOWN_ARROW&&a||b==DvtKeyboardEvent.UP_ARROW&&!a)e=0==d?
c[c.length-1]:c[d-1];return e};DvtPieSlice.prototype.getKeyboardBoundingBox=function(a){var b=this.getDisplayables();return b[0]?b[0].getDimensions(a):new DvtRectangle(0,0,0,0)};DvtPieSlice.prototype.getTargetElem=function(){var a=this.getDisplayables();return a[0]?a[0].getElem():null};DvtPieSlice.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;this.showHoverEffect()};
DvtPieSlice.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;this.hideHoverEffect()};DvtPieSlice.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};DvtPieSlice.prototype.getExplode=function(){return this._explode};DvtPieSlice.prototype.setExplode=function(a){this._explode=a;this._explodeSlice()};DvtPieSlice.prototype.getCustomLabel=function(){return this._customLabel};DvtPieSlice.prototype.getSeriesLabel=function(){return this._seriesLabel};
DvtPieSlice.prototype.getFillColor=function(){return this._fillColor};DvtPieSlice.prototype.getFillPattern=function(){return this._fillPattern};DvtPieSlice.prototype.getStrokeColor=function(){return this._strokeColor};DvtPieSlice.prototype.getBorderWidth=function(){return this._borderWidth};DvtPieSlice.prototype.getSliceGaps=function(){return 0==this._depth?3*DvtChartStyleUtils.getDataItemGaps(this._chart):0};DvtPieSlice.prototype.getInnerRadius=function(){return this._pieChart.getInnerRadius()};
DvtPieSlice.prototype.getTooltip=function(){return null==this._seriesIndex?DvtChartTooltipUtils.getOtherSliceDatatip(this._chart,this._value,!0):DvtChartTooltipUtils.getDatatip(this._chart,this._seriesIndex,0,!0)};DvtPieSlice.prototype.getAction=function(){return this._action};DvtPieSlice.prototype.isDrillable=function(){return this._drillable};DvtPieSlice.prototype.getShowPopupBehaviors=function(){return this._showPopupBehaviors};
DvtPieSlice.createFillerSlice=function(a,b){var c=new DvtPieSlice(a);c._value=b;c._bFillerSlice=!0;c._centerX=a.getCenter().x;c._centerY=a.getCenter().y;c._fillColor="rgba(255,255,255,0)";c._strokeColor="rgba(255,255,255,0)";c._id=new DvtChartDataItem(null,null,null);return c};var DvtChart=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtChart,DvtBaseComponent,"DvtChart");DvtChart.newInstance=function(a,b,c){return new DvtChart(a,b,c)};DvtChart.getDefaults=function(a){return(new DvtChartDefaults).getDefaults(a)};
DvtChart.prototype.Init=function(a,b,c){DvtChart.superclass.Init.call(this,a,b,c);this.Defaults=new DvtChartDefaults;this.EventManager=new DvtChartEventManager(this);this.EventManager.addListeners(this);DvtAgent.isTouchDevice()||this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager));this.setId("chart1000"+Math.floor(1E9*Math.random()));this.pieChart=this.dragButtons=this.yScrollbar=this.xScrollbar=this.overview=this.y2Axis=this.yAxis=this.xAxis=this.legend=this._animation=
null;this.Peers=[];this.SeriesStyleArray=[];this.Cache={};this._numSelectedObjsInFront=this._numFrontObjs=0;this._dataLabels=null};
DvtChart.prototype.GetComponentDescription=function(){var a=this.getOptions(),b=DvtBundle.getTranslation(a,"componentName",DvtBundle.UTIL_PREFIX,"CHART"),c="",d=DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER");a.title.text&&(c+=this.Options.title.text,a.subtitle.text&&(c+=d+this.Options.subtitle.text));a.footnote.text&&(c=0==c.length?this.Options.footnote.text:c.concat(d,this.Options.footnote.text));return 0<c.length?DvtBundle.getTranslation(a,"labelAndValue",DvtBundle.UTIL_PREFIX,
"COLON_SEP_LIST",[b,c]):b};
DvtChart.prototype.SetOptions=function(a){a?(this.Options=this.Defaults.calcOptions(a),"horizontalBar"==this.Options.type&&(this.Options.type="bar",this.Options.orientation="horizontal"),DvtChartDataUtils.processDataObject(this),DvtAgent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults());a=this.Options.selectionMode;this._selectionHandler="single"==a?new DvtSelectionHandler(DvtSelectionHandler.TYPE_SINGLE):"multiple"==
a?new DvtSelectionHandler(DvtSelectionHandler.TYPE_MULTIPLE):null;this.EventManager.setSelectionHandler(this._selectionHandler);if(a=this.Options._spb){this._popupBehaviors={};for(var b in a)for(var c=a[b],d=0;d<c.length;d++){this._popupBehaviors[b]||(this._popupBehaviors[b]=[]);var e=c[d];this._popupBehaviors[b].push(new DvtShowPopupBehavior(e.popupId,e.triggerType,e.alignId,e.align))}}};
DvtChart.prototype.render=function(a,b,c){var d=this.getCtx(),e=this.Options?this.Options.animationOnDataChange:"none",g="none"!=e?new DvtDCChart(this):null,h=this.__cacheChartFocus();this.__cleanUp();this.SetOptions(a);isNaN(b)||isNaN(c)||(this.Width=b,this.Height=c);b=new DvtContainer(d);this.addChild(b);DvtChartRenderer.render(this,b,new DvtRectangle(0,0,this.Width,this.Height));DvtChartTypeUtils.isSpark(this)&&this.EventManager.removeListeners(this);this._animation&&this._animation.stop();var k=
DvtChartStyleUtils.getAnimationOnDisplay(this);c=DvtChartStyleUtils.getAnimationDuration(this);var m=new DvtRectangle(0,0,this.Width,this.Height),n=!1;this._container?"none"!=e&&a&&((this._animation=DvtBlackBoxAnimationHandler.getCombinedAnimation(d,e,this._container,b,m,c))?n=!0:"auto"==e&&this.getPlotArea()&&(a=this.__getPlotAreaSpace(),this._delContainer=DvtPlotAreaRenderer.createClippedGroup(this,this._container,new DvtRectangle(0,0,a.w,a.h)),this._animation=DvtAnimOnDC.createAnimation(g,this,
e,c,this._delContainer),0<this._delContainer.getNumChildren()&&this.getPlotArea().addChild(this._delContainer))):"none"!=k&&(this._animation=DvtBlackBoxAnimationHandler.getInAnimation(d,k,b,m,c),this._animation||"auto"!=k||(this._animation=DvtAnimOnDisplay.createAnimation(this,k,c)));this._animation&&(this._animation.play(),DvtPlayable.appendOnEnd(this._animation,this._onAnimationEnd,this));n?this._oldContainer=this._container:this._container&&(this.removeChild(this._container),this._container.destroy(),
this._container=null);this._container=b;this._dataCursor=DvtChartRenderer.renderDataCursor(this);this.UpdateAriaAttributes();this.__restoreChartFocus(h)};DvtChart.prototype.destroy=function(){this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null);DvtChart.superclass.destroy.call(this)};
DvtChart.prototype.__cleanUp=function(){this._dataCursor&&(this.removeChild(this._dataCursor),this._dataCursor=null);this.EventManager&&this.EventManager.hideHoverFeedback();this.Peers=[];this.yScrollbar=this.xScrollbar=null;this.dragButtons&&(this.removeChild(this.dragButtons),this.dragButtons.destroy(),this.dragButtons=null,this.EventManager.panButton=null,this.EventManager.zoomButton=null,this.EventManager.selectButton=null);this._dataLabels=this._areaContainer=this._plotArea=null;this.clearCache()};
DvtChart.prototype.__cleanUpAxisAndPlotArea=function(){this.EventManager.hideHoverFeedback();this.Peers=[];this._container.removeChild(this.xAxis);this._container.removeChild(this.yAxis);this._container.removeChild(this.y2Axis);this._plotArea&&this._plotArea==this._panZoomTarget?this._plotArea.setVisible(!1):this._container.removeChild(this._plotArea);this._plotArea=null;this.clearCache()};
DvtChart.prototype._onAnimationEnd=function(){this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer.destroy(),this._oldContainer=null);this._delContainer&&0<this._delContainer.getNumChildren()&&this.getPlotArea().removeChild(this._delContainer);this._animation=this._delContainer=null};DvtChart.prototype.CreateKeyboardHandler=function(a){return new DvtChartKeyboardHandler(a,this)};DvtChart.prototype.getAutomation=function(){return new DvtChartAutomation(this)};
DvtChart.prototype.getValuesAt=function(a,b){var c=this.__getPlotAreaSpace(),d=a-c.x,e=b-c.y,g=DvtChartTypeUtils.isPolar(this),h=DvtChartTypeUtils.isHorizontal(this);return g?(d-=c.w/2,e-=c.h/2,c=Math.sqrt(d*d+e*e),d=Math.atan2(d,-e),0>d&&(d+=2*Math.PI),{x:this.xAxis?this.xAxis.getValueAt(d):null,y:this.yAxis?this.yAxis.getValueAt(c):null}):{x:this.xAxis?this.xAxis.getValueAt(h?e:d):null,y:this.yAxis?this.yAxis.getValueAt(h?d:e):null,y2:this.y2Axis?this.y2Axis.getValueAt(h?d:e):null}};
DvtChart.prototype.filter=function(a,b){DvtChartEventUtils.setVisibility(this,a,"out"==b?"hidden":"visible");this.render(this.Options)};DvtChart.prototype.highlight=function(a){this.getOptions().highlightedCategories=DvtJSONUtils.clone(a);DvtCategoryRolloverHandler.highlight(a,this.getObjects(),"any"==this.getOptions().highlightMatch);this.legend&&this.legend.highlight(a);this.pieChart&&this.pieChart.highlight(a);this.overview&&this.overview.getBackgroundChart().highlight(a)};
DvtChart.prototype.select=function(a){this.getOptions().selection=DvtJSONUtils.clone(a);a=DvtChartDataUtils.getInitialSelection(this);DvtChartEventUtils.setInitialSelection(this,a);this.pieChart&&this.pieChart.setInitialSelection()};
DvtChart.prototype.positionDataCursor=function(a){var b=this.__getEventManager().getDataCursorHandler();if(b){if(a){var c=this.xAxis&&null!=a.x?this.xAxis.getCoordAt(a.x):null,d=null;DvtChartTypeUtils.isBLAC(this)?this.yAxis&&null!=a.y?d=this.yAxis.getBoundedCoordAt(a.y):this.y2Axis&&null!=a.y2&&(d=this.yAxis.getBoundedCoordAt(a.y2)):d=this.yAxis&&null!=a.y?this.yAxis.getCoordAt(a.y):null;if(null!=c&&null!=d){a=this.__getPlotAreaSpace();c=DvtPlotAreaRenderer.convertAxisCoord(this,new DvtPoint(c,d),
a);b.processMove(new DvtPoint(a.x+c.x,a.y+c.y),!0);return}}b.processEnd(!0)}};DvtChart.prototype.__getEventManager=function(){return this.EventManager};DvtChart.prototype.clearCache=function(){this.Cache={}};DvtChart.prototype.getFromCache=function(a){return this.Cache[a]};DvtChart.prototype.putToCache=function(a,b){this.Cache[a]=b};DvtChart.prototype.getFromCachedMap=function(a,b){var c=this.getFromCache(a);c||(c={},this.putToCache(a,c));return c[b]};
DvtChart.prototype.putToCachedMap=function(a,b,c){var d=this.getFromCache(a);d||(d={},this.putToCache(a,d));d[b]=c};DvtChart.prototype.getFromCachedMap2D=function(a,b,c){var d=this.getFromCache(a);d||(d=new DvtMap2D,this.putToCache(a,d));return d.get(b,c)};DvtChart.prototype.putToCachedMap2D=function(a,b,c,d){var e=this.getFromCache(a);e||(e=new DvtMap2D,this.putToCache(a,e));e.put(b,c,d)};
DvtChart.prototype.processEvent=function(a,b){var c=a.getType();if(c==DvtCategoryHideShowEvent.TYPE_HIDE||c==DvtCategoryHideShowEvent.TYPE_SHOW)this.filter(a.getCategory(),c==DvtCategoryHideShowEvent.TYPE_HIDE?"out":"in");else if(c==DvtCategoryRolloverEvent.TYPE_OVER||c==DvtCategoryRolloverEvent.TYPE_OUT)this!=b&&this.highlight(a.categories),this.legend&&this.legend!=b&&this.legend.processEvent(a,b);else if(c==DvtSelectionEvent.TYPE)a=this._processSelectionEvent(a);else if(c==DvtPanZoomEvent.TYPE)a=
this._processPanZoomEvent(a);else if(c==DvtMarqueeEvent.TYPE)a=this._processMarqueeEvent(a);else if(c==DvtOverviewEvent.TYPE){c=a.getSubType();if(c==DvtOverviewEvent.SUBTYPE_PRE_RANGECHANGE)return;c=c==DvtOverviewEvent.SUBTYPE_SCROLL_TIME||c==DvtOverviewEvent.SUBTYPE_SCROLL_END||c==DvtOverviewEvent.SUBTYPE_RANGECHANGE;a=this._processScrollbarEvent(a.getNewStartTime(),a.getNewEndTime(),c,b)}else c==DvtSimpleScrollbarEvent.TYPE?a=this._processScrollbarEvent(a.getNewMin(),a.getNewMax(),a.getSubtype()==
DvtSimpleScrollbarEvent.SUBTYPE_END,b):c==DvtShowPopupEvent.TYPE?a=this._processShowPopupEvent(a):a instanceof DvtComponentUIEvent&&(a=this._processComponentUIEvent(a,b));if(a instanceof DvtChartSelectionEvent){var d=this.getOptions(),c=d.selection,e=DvtChartDataUtils.getCurrentSelection(this);a.getType()!=DvtSelectionEvent.TYPE_INPUT&&(d.selection=e);var c=c?c:[],e=e?e:[],g,h={};for(g=0;g<c.length;g++)h[c[g].id]=!0;d={};for(g=0;g<e.length;g++)d[e[g].id]=!0;var k={};for(g=0;g<e.length;g++){var m=
e[g].id;h[m]||(k[m]=!0)}e={};for(g=0;g<c.length;g++)h=c[g].id,d[h]||(e[h]=!0);a.addedSet=k;a.removedSet=e}a&&this.__dispatchEvent(a)};DvtChart.prototype._processSelectionEvent=function(a){a=DvtChartEventUtils.processIds(this,a.getSelection());this._updateOverviewSelection();return new DvtChartSelectionEvent(a,DvtSelectionEvent.TYPE)};
DvtChart.prototype._processPanZoomEvent=function(a){var b=a.getSubtype(),c=b==DvtPanZoomEvent.SUBTYPE_PAN_END||b==DvtPanZoomEvent.SUBTYPE_ZOOM||b==DvtPanZoomEvent.SUBTYPE_PINCH_END,b=b==DvtPanZoomEvent.SUBTYPE_PAN_START||b==DvtPanZoomEvent.SUBTYPE_PINCH_START;DvtAgent.isTouchDevice()&&b&&this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=this._plotArea);DvtChartEventUtils.isLiveScroll(this)?(a=DvtChartEventUtils.getAxisBoundsByDelta(this,a.dxMin,
a.dxMax,a.dyMin,a.dyMax),b||(this._setViewport(a,c),this._setScrollbarViewport(a))):(a=DvtChartEventUtils.getAxisBoundsByDelta(this,a.dxMinTotal,a.dxMaxTotal,a.dyMinTotal,a.dyMaxTotal),this._setScrollbarViewport(a),c&&this._setViewport(a,c));c&&(DvtChartRenderer._setEventHandlers(this),this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=null));c=c?DvtChartViewportChangeEvent.TYPE:DvtChartViewportChangeEvent.TYPE_INPUT;return DvtChartTypeUtils.isBLAC(this)?
new DvtChartViewportChangeEvent(c,a.xMin,a.xMax,a.startGroup,a.endGroup,null,null):new DvtChartViewportChangeEvent(c,a.xMin,a.xMax,null,null,a.yMin,a.yMax)};
DvtChart.prototype._processMarqueeEvent=function(a){var b=a.getSubtype(),c=this.EventManager;DvtChartEventUtils.adjustBounds(a);if(c.getDragMode()==DvtChartEventManager.DRAG_MODE_SELECT){c=c.getSelectionHandler();if(b==DvtMarqueeEvent.SUBTYPE_START)this._initSelection=a.ctrlKey?c.getSelectedIds():[];else{var d=DvtChartEventUtils.getBoundedObjects(this,a);c.processInitialSelections(this._initSelection,this.getChartObjPeers());c.processGroupSelection(d,!0)}c=DvtChartEventUtils.getSelectedObjects(this,
a,c);a=DvtChartEventUtils.getAxisBounds(this,a,!1);a=new DvtChartSelectionEvent(c,b==DvtMarqueeEvent.SUBTYPE_END?DvtSelectionEvent.TYPE:DvtSelectionEvent.TYPE_INPUT,a.xMin,a.xMax,a.startGroup,a.endGroup,a.yMin,a.yMax,a.y2Min,a.y2Max);b==DvtMarqueeEvent.SUBTYPE_END&&this._updateOverviewSelection();return a}if(c.getDragMode()==DvtChartEventManager.DRAG_MODE_ZOOM){if(b!=DvtMarqueeEvent.SUBTYPE_END)return null;a=DvtChartEventUtils.getAxisBounds(this,a,!0);this._setViewport(a,!0);this._setScrollbarViewport(a);
DvtChartRenderer._setEventHandlers(this);return DvtChartTypeUtils.isBLAC(this)?new DvtChartViewportChangeEvent(DvtChartViewportChangeEvent.TYPE,a.xMin,a.xMax,a.startGroup,a.endGroup,null,null):new DvtChartViewportChangeEvent(DvtChartViewportChangeEvent.TYPE,a.xMin,a.xMax,null,null,a.yMin,a.yMax)}return null};
DvtChart.prototype._processScrollbarEvent=function(a,b,c,d){var e=d==this.yScrollbar?this.yAxis:this.xAxis;a=e.linearToActual(a);b=e.linearToActual(b);if(DvtChartEventUtils.isLiveScroll(this)||c)d==this.yScrollbar?this._setViewport({yMin:a,yMax:b},c):this._setViewport({xMin:a,xMax:b},c);c=c?DvtChartViewportChangeEvent.TYPE:DvtChartViewportChangeEvent.TYPE_INPUT;if(d==this.yScrollbar)return new DvtChartViewportChangeEvent(c,null,null,null,null,a,b,null,null);d=DvtChartEventUtils.getAxisStartEndGroup(this.xAxis,
a,b);return new DvtChartViewportChangeEvent(c,a,b,d.startGroup,d.endGroup,null,null,null,null)};DvtChart.prototype._processShowPopupEvent=function(a){if("mouseHover"!=a.triggerType&&this.isSelectionSupported()&&0<this.getSelectionHandler().getSelectedCount()){var b=DvtChartEventUtils.processIds(this,this.getSelectionHandler().getSelectedIds());a=new DvtShowPopupEvent(a.getShowPopupBehavior(),a.getLauncherBounds(),a.getLauncherId());a.addParam(DvtBaseComponentEvent.CLIENT_ROW_KEY,b)}return a};
DvtChart.prototype._processComponentUIEvent=function(a,b){var c=a.params,d=c.type;return b===this.legend?(d==DvtLegendConstants.LEGEND_ITEM?d=DvtChartConstants.LEGEND_ITEM:d==DvtLegendConstants.TITLE?d=DvtChartConstants.LEGEND_TITLE:d==DvtLegendConstants.BACKGROUND&&(d=DvtChartConstants.LEGEND),new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,null,c.id))):b===this.xAxis?(d==DvtAxisConstants.TICK_LABEL?d=DvtChartConstants.X_AXIS_LABEL:d==DvtAxisConstants.TITLE&&(d=DvtChartConstants.X_AXIS_TITLE),
new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,c.id))):b===this.yAxis?(d==DvtAxisConstants.TICK_LABEL?d=DvtChartConstants.Y_AXIS_LABEL:d==DvtAxisConstants.TITLE&&(d=DvtChartConstants.Y_AXIS_TITLE),new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,c.id))):b===this.y2Axis?(d==DvtAxisConstants.TICK_LABEL?d=DvtChartConstants.Y2_AXIS_LABEL:d==DvtAxisConstants.TITLE&&(d=DvtChartConstants.Y2_AXIS_TITLE),new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,
c.id))):a};DvtChart.prototype._updateOverviewSelection=function(){if(this.overview){var a=this.overview.getBackgroundChart();a.getOptions().selection=DvtChartDataUtils.getCurrentSelection(this);a.render()}};DvtChart.prototype.changeOption=function(a,b,c){this.getOptions()[a]=b;this.__dispatchEvent(new DvtOptionChangeEvent(a,b,c))};DvtChart.prototype.registerObject=function(a){this.Peers.push(a)};DvtChart.prototype.getObjects=function(){return this.Peers};
DvtChart.prototype.getChartObjPeers=function(){for(var a=[],b=0;b<this.Peers.length;b++)this.Peers[b]instanceof DvtChartObjPeer&&a.push(this.Peers[b]);return a};DvtChart.prototype.getRefObjPeers=function(){for(var a=[],b=0;b<this.Peers.length;b++)this.Peers[b]instanceof DvtRefObjPeer&&a.push(this.Peers[b]);return a};
DvtChart.prototype.getObject=function(a,b){for(var c=0;c<this.Peers.length;c++)if(this.Peers[c]instanceof DvtChartObjPeer&&this.Peers[c].getSeriesIndex()==a&&this.Peers[c].getGroupIndex()==b)return this.Peers[c];return null};DvtChart.prototype.getWidth=function(){return this.Width};DvtChart.prototype.getHeight=function(){return this.Height};DvtChart.prototype.getSeriesStyleArray=function(){return this.SeriesStyleArray};DvtChart.prototype.getPlotArea=function(){return this._plotArea};
DvtChart.prototype.setPlotArea=function(a){this._plotArea=a};DvtChart.prototype.getType=function(){return this.getOptions().type};DvtChart.prototype.getSkin=function(){return this.getOptions().skin};DvtChart.prototype.getGapWidthRatio=function(){var a=this.getOptions();return null===a.layout.gapWidthRatio||isNaN(a.layout.gapWidthRatio)?Math.min(this.Width/400,1):a.layout.gapWidthRatio};
DvtChart.prototype.getGapHeightRatio=function(){var a=this.getOptions();return null===a.layout.gapHeightRatio||isNaN(a.layout.gapHeightRatio)?Math.min(this.Height/300,1):a.layout.gapHeightRatio};DvtChart.prototype.getSelectionHandler=function(){return this._selectionHandler};DvtChart.prototype.isSelectionSupported=function(){return this._selectionHandler?!0:!1};DvtChart.prototype.getShowPopupBehaviors=function(a){return this._popupBehaviors?this._popupBehaviors[a]:null};
DvtChart.prototype.bringToFrontOfSelection=function(a){var b=a.getParent();if(b){var c=b.getNumChildren();1<c-this._numFrontObjs&&(b.removeChild(a),b.addChildAt(a,c-this._numFrontObjs-1))}a.isSelected()&&a.isHoverEffectShown()||this._numSelectedObjsInFront++};
DvtChart.prototype.pushToBackOfSelection=function(a){0<this._numSelectedObjsInFront&&this._numSelectedObjsInFront--;var b=a.getParent();if(b){var c=b.getNumChildren()-this._numFrontObjs-1-this._numSelectedObjsInFront;0<=c&&(b.removeChild(a),b.addChildAt(a,c))}};DvtChart.prototype.setNumFrontObjs=function(a){this._numFrontObjs=a};
DvtChart.prototype.getShapesForViewSwitcher=function(a){var b={};if(this._currentMarkers&&this.Peers)for(a=0;a<this._currentMarkers.length;a++){var c=this._currentMarkers[a];if(c)for(var d=0;d<c.length;d++){var e=c[d];if(e)for(var g=0;g<this.Peers.length;g++){var h=this.Peers[g],k=h.getDisplayables();if(k&&0<k.length&&k[0]==e&&(h=h.getId())&&(h=h.getId())){b[h]=e;break}}}}else this.pieChart&&(b=this.pieChart.getShapesForViewSwitcher(a));return b};
DvtChart.prototype._setViewport=function(a,b){var c=DvtChartEventUtils.getZoomDirection(this);"y"!=c&&(null!=a.xMax&&(this.Options.xAxis.viewportMax=a.xMax),null!=a.xMin&&(this.Options.xAxis.viewportMin=a.xMin));DvtChartTypeUtils.isBLAC(this)?(this.Options.xAxis.viewportStartGroup=null,this.Options.xAxis.viewportEndGroup=null,this.Options._initialZoomed=!1):"x"!=c&&(null!=a.yMax&&(this.Options.yAxis.viewportMax=a.yMax),null!=a.yMin&&(this.Options.yAxis.viewportMin=a.yMin));this.Options._duringAnimation=
!b;DvtChartRenderer.rerenderAxisAndPlotArea(this,this._container)};
DvtChart.prototype._setScrollbarViewport=function(a){if(this.xAxis&&null!=a.xMin&&null!=a.xMax){var b=this.xAxis.actualToLinear(a.xMin),c=this.xAxis.actualToLinear(a.xMax);this.overview&&this.overview.setViewportRange(b,c);this.xScrollbar&&this.xScrollbar.setViewportRange(b,c)}this.yAxis&&null!=a.yMin&&null!=a.yMax&&(b=this.yAxis.actualToLinear(a.yMin),a=this.yAxis.actualToLinear(a.yMax),this.yScrollbar&&this.yScrollbar.setViewportRange(b,a))};
DvtChart.prototype.__setAxisSpace=function(a){this._axisSpace=a;var b;DvtChartAxisUtils.isAxisRendered(this,"x")?(b=.8*a.w,a=a.h-5*DvtChartAxisUtils.getTickLabelFontSize(this,"x")):DvtChartAxisUtils.isAxisRendered(this,"y")?(b=a.w,a=a.h-DvtChartAxisUtils.getTickLabelFontSize(this,"y")):(b=a.w,a=a.h);this._radius=Math.min(b,a)/2};DvtChart.prototype.__getAxisSpace=function(){return this._axisSpace};DvtChart.prototype.__setPlotAreaSpace=function(a){this._plotAreaSpace=a};
DvtChart.prototype.__getPlotAreaSpace=function(){return this._plotAreaSpace};DvtChart.prototype.__setAreaContainer=function(a){this._areaContainer=a};DvtChart.prototype.__getAreaContainer=function(){return this._areaContainer};DvtChart.prototype.getRadius=function(){return this._radius};DvtChart.prototype.showDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!0)};DvtChart.prototype.hideDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!1)};
DvtChart.prototype.addDataLabel=function(a){this.getDataLabels().push(a)};DvtChart.prototype.getDataLabels=function(){this._dataLabels||(this._dataLabels=[]);return this._dataLabels};
DvtChart.prototype.__cacheChartFocus=function(){var a=this.EventManager.getFocus();if(a)var b=a.isShowingKeyboardFocusEffect();if(this.xAxis){var c=this.xAxis.getKeyboardFocus();if(c)var d=c.isShowingKeyboardFocusEffect()}if(this.legend){var e=this.legend.getKeyboardFocus();if(e)var g=e.isShowingKeyboardFocusEffect()}return{chartFocus:a,chartShowingFocusEffect:b,axisFocus:c,axisShowingFocusEffect:d,legendFocus:e,legendShowingFocusEffect:g}};
DvtChart.prototype.__restoreChartFocus=function(a){if(!DvtChartTypeUtils.isOverview(this)&&!DvtChartTypeUtils.isSpark(this)){var b=[this];this.xAxis&&this.xAxis.isNavigable()&&b.push(this.xAxis);this.legend&&this.legend.isNavigable()&&b.push(this.legend);this.getCtx().setKeyboardFocusArray(b);if(a.chartFocus){for(var b=DvtChartEventUtils.getKeyboardNavigables(this),c=!1,d=0;d<b.length;d++){var e=b[d].getId();if(e instanceof DvtChartDataItem&&e.equals(a.chartFocus.getId())){this.EventManager.setFocusObj(b[d]);
a.chartShowingFocusEffect&&b[d].showKeyboardFocusEffect();c=!0;break}}c||this.EventManager.setFocusObj(this.EventManager.getKeyboardHandler().getDefaultNavigable(b))}a.axisFocus&&(this.xAxis.setKeyboardFocus(a.axisFocus,a.axisShowingFocusEffect),a.axisShowingFocusEffect&&this.getCtx().setCurrentKeyboardFocus(this.xAxis));a.legendFocus&&(this.legend.setKeyboardFocus(a.legendFocus,a.legendShowingFocusEffect),a.legendShowingFocusEffect&&this.getCtx().setCurrentKeyboardFocus(this.legend))}};
DvtChart.prototype.processActiveDataChanges=function(a){for(var b=DvtJSONUtils.clone(this.Options),c=this.Options,d=0;d<a.length;d++)this._processActiveDataChange(a[d]);this.Options=b;this.render(c)};DvtChart.prototype._processActiveDataChange=function(a){var b=a.type;"u"==b?this._processActiveDataUpdate(a):"ia"==b||"ib"==b?this._processActiveDataInsert(a):"d"==b&&this._processActiveDataDelete(a)};
DvtChart.prototype._processActiveDataUpdate=function(a){for(var b=a.data,c=0;c<b.length;c++){var d=this._findDataItemById(a.id,b[c]._id);if(d)for(var e in b[c])"_id"!=e&&(d.item[e]=b[c][e])}};
DvtChart.prototype._processActiveDataInsert=function(a){for(var b=a.data,c=0;c<b.length;c++){this.clearCache();var d=a.insertId,e=b[c].group,g=b[c].series,h=DvtChartDataUtils.getSeriesCount(this),k=DvtChartDataUtils.getGroupCount(this),m=DvtChartDataUtils.getSeriesIndex(this,g),n=DvtChartDataUtils.getGroupIndex(this,e);if(0<=m&&0<=n)g=DvtChartDataUtils.getSeriesItem(this,m).items,g[n]={id:a.id},DvtChart._copyActiveDataProperties(b[c],g[n]);else if(0<=n)e=Array(k),e[n]={id:a.id},DvtChart._copyActiveDataProperties(b[c],
e[n]),this.Options.series.push({name:g,items:e});else{n=(n=this._findDataItemById(d))?"ia"==a.type?n.groupIndex+1:n.groupIndex:0;0>m&&(this.Options.series.push({name:g,items:Array(k)}),m=h,h++);for(k=0;k<h;k++)g=DvtChartDataUtils.getSeriesItem(this,k).items,g.splice(n,0,{id:a.id}),k==m&&DvtChart._copyActiveDataProperties(b[c],g[n]);this.Options.groups.splice(n,0,e)}}};
DvtChart.prototype._processActiveDataDelete=function(a){this.clearCache();var b=this._findDataItemById(a.id);if(b){for(var c in b.item)b.item[c]=null;b.item._deleted=!0;for(var d=DvtChartDataUtils.getSeriesCount(this),e=DvtChartDataUtils.getGroupCount(this),g=!0,h=0;h<d;h++)if((c=DvtChartDataUtils.getDataItem(this,h,b.groupIndex))&&!c._deleted){g=!1;break}for(var k=!0,h=0;h<e;h++)if((c=DvtChartDataUtils.getDataItem(this,b.seriesIndex,h))&&!c._deleted){k=!1;break}if(g){for(h=0;h<d;h++)DvtChartDataUtils.getSeriesItem(this,
h).items.splice(b.groupIndex,1);this.Options.groups.splice(b.groupIndex,1)}k&&this.Options.series.splice(b.seriesIndex,1);this._processActiveDataDelete(a)}};DvtChart._copyActiveDataProperties=function(a,b){for(var c in a)b[c]=a[c]};
DvtChart.prototype._findDataItemById=function(a,b){if(null==a)return null;for(var c=DvtChartDataUtils.getSeriesCount(this),d=DvtChartDataUtils.getGroupCount(this),e=0;e<c;e++)for(var g=0;g<d;g++){var h=DvtChartDataUtils.getDataItem(this,e,g);if(null!=h&&h.id===a&&(null==b||b===h._id))return{item:h,seriesIndex:e,groupIndex:g}}return null};var DvtChartConstants={};DvtObj.createSubclass(DvtChartConstants,DvtObj,"DvtChartConstants");DvtChartConstants.BACKGROUND="background";
DvtChartConstants.DATA_ITEM="dataItem";DvtChartConstants.DATA_ITEM_OTHER="dataItemOther";DvtChartConstants.FOOTNOTE="footnote";DvtChartConstants.LEGEND="legend";DvtChartConstants.LEGEND_ITEM="legendItem";DvtChartConstants.LEGEND_TITLE="legendTitle";DvtChartConstants.PLOT_AREA="plotArea";DvtChartConstants.SERIES="series";DvtChartConstants.SUBTITLE="subtitle";DvtChartConstants.TITLE="title";DvtChartConstants.X_AXIS_LABEL="xAxisLabel";DvtChartConstants.X_AXIS_TITLE="xAxisTitle";
DvtChartConstants.Y_AXIS_LABEL="yAxisLabel";DvtChartConstants.Y_AXIS_TITLE="yAxisTitle";DvtChartConstants.Y2_AXIS_LABEL="y2AxisLabel";DvtChartConstants.Y2_AXIS_TITLE="y2AxisTitle";var DvtChartSelectionEvent=function(a,b,c,d,e,g,h,k,m,n){DvtChartSelectionEvent.superclass.Init.call(this,a,b);this._xMin=c;this._xMax=d;this._startGroup=e;this._endGroup=g;this._yMin=h;this._yMax=k;this._y2Min=m;this._y2Max=n;this.removedSet=this.addedSet=null};
DvtObj.createSubclass(DvtChartSelectionEvent,DvtSelectionEvent,"DvtChartSelectionEvent");DvtChartSelectionEvent.prototype.getXMin=function(){return this._xMin};DvtChartSelectionEvent.prototype.getXMax=function(){return this._xMax};DvtChartSelectionEvent.prototype.getStartGroup=function(){return this._startGroup};DvtChartSelectionEvent.prototype.getEndGroup=function(){return this._endGroup};DvtChartSelectionEvent.prototype.getYMin=function(){return this._yMin};
DvtChartSelectionEvent.prototype.getYMax=function(){return this._yMax};DvtChartSelectionEvent.prototype.getY2Min=function(){return this._y2Min};DvtChartSelectionEvent.prototype.getY2Max=function(){return this._y2Max};var DvtChartViewportChangeEvent=function(a,b,c,d,e,g,h){DvtChartViewportChangeEvent.superclass.Init.call(this,a);this._xMin=b;this._xMax=c;this._startGroup=d;this._endGroup=e;this._yMin=g;this._yMax=h};DvtObj.createSubclass(DvtChartViewportChangeEvent,DvtBaseComponentEvent,"DvtChartViewportChangeEvent");
DvtChartViewportChangeEvent.TYPE="viewportChange";DvtChartViewportChangeEvent.TYPE_INPUT="viewportChangeInput";DvtChartViewportChangeEvent.prototype.getXMin=function(){return this._xMin};DvtChartViewportChangeEvent.prototype.getXMax=function(){return this._xMax};DvtChartViewportChangeEvent.prototype.getStartGroup=function(){return this._startGroup};DvtChartViewportChangeEvent.prototype.getEndGroup=function(){return this._endGroup};DvtChartViewportChangeEvent.prototype.getYMin=function(){return this._yMin};
DvtChartViewportChangeEvent.prototype.getYMax=function(){return this._yMax};
var DvtChartAutomation=function(a){this._chart=a;this._options=this._chart.getOptions();this._legend=this._chart.legend;this._xAxis=this._chart.xAxis;this._yAxis=this._chart.yAxis;this._y2Axis=this._chart.y2Axis;this._legendAutomation=this._legend?this._legend.getAutomation():null;this._xAxisAutomation=this._xAxis?this._xAxis.getAutomation():null;this._yAxisAutomation=this._yAxis?this._yAxis.getAutomation():null;this._y2AxisAutomation=this._y2Axis?this._y2Axis.getAutomation():null};
DvtObj.createSubclass(DvtChartAutomation,DvtAutomation,"DvtChartAutomation");
DvtChartAutomation.prototype.GetSubIdForDomElement=function(a){var b=null;if(a.isDescendantOf(this._xAxis))return b=this._xAxisAutomation.GetSubIdForDomElement(a),this._convertAxisSubIdToChartSubId(b,"xAxis");if(a.isDescendantOf(this._yAxis))return b=this._yAxisAutomation.GetSubIdForDomElement(a),this._convertAxisSubIdToChartSubId(b,"yAxis");if(a.isDescendantOf(this._y2Axis))return b=this._y2AxisAutomation.GetSubIdForDomElement(a),this._convertAxisSubIdToChartSubId(b,"y2Axis");if(a.isDescendantOf(this._legend))return a=
this._legendAutomation.GetSubIdForDomElement(a),this._convertLegendSubIdToChartSubId(a);if((a=this._chart.__getEventManager().GetLogicalObject(a))&&"pie"==this._options.type)return"dataItem["+a.getSeriesIndex()+"]";if(a instanceof DvtChartObjPeer){b=a.getSeriesIndex();a=a.getGroupIndex();if(null!=b&&0<=a&&"funnel"!=this._options.type)return"dataItem["+b+"]["+a+"]";if(null!=b&&a==DvtFunnelRenderer._GROUP_INDEX&&"funnel"==this._options.type)return"dataItem["+b+"]";if(null!=b&&(null==a||0>a))return"series["+
b+"]"}else if(a instanceof DvtRefObjPeer)return b=a.getAxisType(),a=a.getIndex(),b&&0<=a?b+":referenceObject["+a+"]":null;return null};DvtChartAutomation.prototype._convertLegendSubIdToChartSubId=function(a){var b=this._legend.getOptions();if(b=this._legendAutomation.getLegendItem(b,a)){for(var c=0;c<this._options.series.length;c++)if(this._options.series[c].name==b.text)return"series["+c+"]";return"legend:"+a}return null};
DvtChartAutomation.prototype._convertAxisSubIdToChartSubId=function(a,b){if("title"==a&&b)return b+":"+a;var c=a.substring(a.indexOf("["));return c?"group"+c:null};
DvtChartAutomation.prototype.getDomElementForSubId=function(a){if(a==DvtAutomation.TOOLTIP_SUBID)return this.GetTooltipElement(this._chart,DvtChartTooltipUtils.isDataCursorEnabled(this._chart)?DvtDataCursor.TOOLTIP_ID:null);var b=a.indexOf("["),c=a.indexOf("]"),d,e,g=a.indexOf(":");if(0<b&&0<c||0<g){d=0>g?a.substring(0,b):a.substring(0,g);if("group"==d)return this._xAxisAutomation.getDomElementForSubId(a);if("series"==d)return a=this._convertToLegendSubId(a),this._legendAutomation.getDomElementForSubId(a);
if("legend"==a.substring(0,g))return a=a.substring(g+1),this._legendAutomation.getDomElementForSubId(a);b=a.substring(b+1,c);if("xAxis"==d||"yAxis"==d||"y2Axis"==d)if(g=a.substring(g+1),"title"==g){if("xAxis"==d)return this._xAxisAutomation.getDomElementForSubId(g);if("yAxis"==d)return this._yAxisAutomation.getDomElementForSubId(g);if("y2Axis"==d)return this._y2AxisAutomation.getDomElementForSubId(g)}else if(d=g.indexOf("["),e=g.indexOf("]"),"referenceObject"==g.substring(0,d)&&(d=g.substring(d+1,
e),d=this._getRefObjPeer(d)))return d.getDisplayables()[0].getElem();if("pie"==this._options.type&&(d=this._chart.pieChart.getSliceDisplayable(b)))return d.getElem();if("funnel"==this._options.type)var h=DvtFunnelRenderer._GROUP_INDEX;else a=a.substring(c+1),d=a.indexOf("["),e=a.indexOf("]"),0<=d&&0<=e&&(h=a.substring(d+1,e));if(d=this._getChartObjPeer(b,h))return d.getDisplayables()[0].getElem()}return null};
DvtChartAutomation.prototype._getChartObjPeer=function(a,b){for(var c=this._chart.getChartObjPeers(),d=0;d<c.length;d++){var e=c[d].getSeriesIndex(),g=c[d].getGroupIndex();if(e==a&&g==b)return c[d]}return null};DvtChartAutomation.prototype._getRefObjPeer=function(a){for(var b=this._chart.getRefObjPeers(),c=0;c<b.length;c++)if(a==b[c].getIndex())return b[c];return null};
DvtChartAutomation.prototype._convertToLegendSubId=function(a){var b=a.indexOf("["),c=a.indexOf("]");a=a.substring(b+1,c);b=this._legend.getOptions();return"section"+this._legendAutomation.getIndicesFromSeries(this._options.series[a],b)};
DvtChartAutomation.prototype.getDataItem=function(a,b){if("pie"==this._options.type||"funnel"==this._options.type)b=0;var c=DvtChartDataUtils.getDataItem(this._chart,a,b);return c?{borderColor:DvtChartStyleUtils.getBorderColor(this._chart,a,b),color:DvtChartStyleUtils.getColor(this._chart,a,b),label:DvtChartDataUtils.getDataLabel(this._chart,a,b),targetValue:DvtChartDataUtils.getTargetValue(this._chart,a,b),tooltip:DvtChartTooltipUtils.getDatatip(this._chart,a,b,!1),value:DvtChartDataUtils.getValue(this._chart,
a,b),open:c.open,close:c.close,high:DvtChartDataUtils.getHighValue(this._chart,a,b),low:DvtChartDataUtils.getLowValue(this._chart,a,b),volume:c.volume,x:DvtChartDataUtils.getXValue(this._chart,a,b),y:c.y,z:c.z,min:c.min,max:c.max,group:DvtChartDataUtils.getGroup(this._chart,b),series:DvtChartDataUtils.getSeries(this._chart,a),selected:DvtChartDataUtils.isDataSelected(this._chart,a,b)}:null};DvtChartAutomation.prototype.getGroup=function(a){return DvtChartDataUtils.getGroup(this._chart,a)};
DvtChartAutomation.prototype.getSeries=function(a){return this._options.series[a].name};DvtChartAutomation.prototype.getGroupCount=function(){return DvtChartDataUtils.getGroupCount(this._chart)};DvtChartAutomation.prototype.getSeriesCount=function(){return this._options.series.length};DvtChartAutomation.prototype.getTitle=function(){return this._options.title.text};
DvtChartAutomation.prototype.getLegend=function(){var a=this._legend.__getBounds(),b=this._chart.localToStage(new DvtPoint(a.x,a.y));return{bounds:{x:b.x,y:b.y,width:a.w,height:a.h},title:this._legend.getOptions().title}};DvtChartAutomation.prototype.getPlotArea=function(){var a=this._chart.__getPlotAreaSpace();return{bounds:{x:a.x,y:a.y,width:a.w,height:a.h}}};DvtChartAutomation.prototype.getXAxis=function(){return this._getAxis("x")};DvtChartAutomation.prototype.getYAxis=function(){return this._getAxis("y")};
DvtChartAutomation.prototype.getY2Axis=function(){return this._getAxis("y2")};
DvtChartAutomation.prototype._getAxis=function(a){var b="x"==a?this._xAxis:"y"==a?this._yAxis:this._y2Axis;if(b){var c=b.__getBounds(),d=b.localToStage(new DvtPoint(c.x,c.y)),e=this._chart;return{bounds:{x:d.x,y:d.y,width:c.w,height:c.h},title:this._options[a+"Axis"].title,getPreferredSize:function(c,d){var k=b.getOptions(),m=k.position,n=DvtChartAxisUtils.getTickLabelGapSize(e,a),t=DvtChartTypeUtils.isStandaloneXAxis(e)||DvtChartTypeUtils.isStandaloneYAxis(e)||DvtChartTypeUtils.isStandaloneY2Axis(e)?
2:0;"top"==m||"bottom"==m?(k=b.getPreferredSize(k,c,d-n-t),k.h=Math.ceil(k.h+n+t)):(k=b.getPreferredSize(k,c-n-t,d),k.w=Math.ceil(k.w+n+t));return{width:k.w,height:k.h}}}}return null};DvtAutomation.prototype.IsTooltipElement=function(a){a=a.getAttribute("id");return!a||0!=a.indexOf(DvtDataCursor.TOOLTIP_ID)&&0!=a.indexOf(DvtHtmlTooltipManager._TOOLTIP_DIV_ID)?!1:!0};
DvtBundle.addDefaultStrings(DvtBundle.CHART_PREFIX,{DEFAULT_GROUP_NAME:"Group {0}",LABEL_SERIES:"Series",LABEL_GROUP:"Group",LABEL_VALUE:"Value",LABEL_TARGET_VALUE:"Target",LABEL_X:"X",LABEL_Y:"Y",LABEL_Z:"Z",LABEL_PERCENTAGE:"Percentage",LABEL_MIN:"Min",LABEL_MAX:"Max",LABEL_HIGH:"High",LABEL_LOW:"Low",LABEL_OPEN:"Open",LABEL_CLOSE:"Close",LABEL_VOLUME:"Volume",LABEL_OTHER:"Other",MARQUEE_SELECT:"Marquee select",MARQUEE_ZOOM:"Marquee zoom",PAN:"Pan"});
var DvtChartEventManager=function(a){DvtChartEventManager.superclass.Init.call(this,a.getCtx(),a.processEvent,a);this._chart=a;this._dragMode=null;this._dragButtonsVisible=DvtAgent.isTouchDevice();this._stageAbsolutePosition=this._marqueeSelectHandler=this._marqueeZoomHandler=this._panZoomHandler=this._dataCursorHandler=this.selectButton=this.zoomButton=this.panButton=null};DvtObj.createSubclass(DvtChartEventManager,DvtEventManager,"DvtChartEventManager");DvtChartEventManager.DRAG_MODE_PAN="pan";
DvtChartEventManager.DRAG_MODE_ZOOM="zoom";DvtChartEventManager.DRAG_MODE_SELECT="select";DvtChartEventManager.DRAG_MODE_OFF="off";DvtChartEventManager.getUIEventParams=function(a,b,c,d){return{type:a,id:b,series:c,group:d}};
DvtChartEventManager.prototype.addListeners=function(a){DvtSvgDocumentUtils.addDragListeners(this._chart,this._onDragStart,this._onDragMove,this._onDragEnd,this);DvtChartEventManager.superclass.addListeners.call(this,a);DvtAgent.isTouchDevice()||(DvtAgent.isPlatformGecko()?a.addEvtListener("wheel",this.OnMouseWheel,!1,this):a.addEvtListener(DvtMouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this))};
DvtChartEventManager.prototype.removeListeners=function(a){DvtChartEventManager.superclass.removeListeners.call(this,a);DvtAgent.isTouchDevice()||(DvtAgent.isPlatformGecko()?a.removeEvtListener("DOMMouseScroll",this.OnMouseWheel,!1,this):a.removeEvtListener(DvtMouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this))};DvtChartEventManager.prototype.FireUIEvent=function(a,b){};DvtChartEventManager.prototype.getLogicalObject=function(a){return this.GetLogicalObject(a,!0)};
DvtChartEventManager.prototype._getRelativePosition=function(a,b){this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition());return new DvtPoint(a-this._stageAbsolutePosition.x,b-this._stageAbsolutePosition.y)};
DvtChartEventManager.prototype._getDragHandler=function(a){a&&"user"==this._chart.getOptions().dragMode&&DvtChartTypeUtils.isBLAC(this._chart)&&(this._dragMode==DvtChartEventManager.DRAG_MODE_PAN||this._dragMode==DvtChartEventManager.DRAG_MODE_ZOOM)&&(this._panZoomHandler.isWithinBounds(a)?this._dragMode=DvtChartEventManager.DRAG_MODE_PAN:this._dragMode=DvtChartEventManager.DRAG_MODE_ZOOM);return this._dragMode==DvtChartEventManager.DRAG_MODE_PAN?this._panZoomHandler:this._dragMode==DvtChartEventManager.DRAG_MODE_ZOOM?
this._marqueeZoomHandler:this._dragMode==DvtChartEventManager.DRAG_MODE_SELECT?this._marqueeSelectHandler:null};DvtChartEventManager.prototype._onDragStart=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragStart(a):this._onMouseDragStart(a)};DvtChartEventManager.prototype._onDragMove=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragMove(a):this._onMouseDragMove(a)};
DvtChartEventManager.prototype._onDragEnd=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragEnd(a):this._onMouseDragEnd(a)};
DvtChartEventManager.prototype._onMouseDragStart=function(a){var b=this._getRelativePosition(a.pageX,a.pageY),c=this._getDragHandler(b),d,e=this.GetLogicalObject(this.GetCurrentTargetForEvent(a));e&&e.isSelectable&&e.isSelectable()||0!=a.button||!c||((d=c.processDragStart(b,a.ctrlKey))&&this._callback.call(this._callbackObj,d),this._chart.setCursor(c.getCursor(b)),this.setDragButtonsVisible(!1),this._chart!=this.getCtx().getCurrentKeyboardFocus()&&this.getCtx().setCurrentKeyboardFocus(this._chart));
return d?(this._dataCursorHandler&&this._dataCursorHandler.processEnd(),!0):!1};DvtChartEventManager.prototype._onMouseDragMove=function(a){var b=this._getRelativePosition(a.pageX,a.pageY),c=this._getDragHandler(),d;c&&(d=c.processDragMove(b,a.ctrlKey))&&(this._callback.call(this._callbackObj,d),this.setDragButtonsVisible(!1));d&&a.stopPropagation()};
DvtChartEventManager.prototype._onMouseDragEnd=function(a){var b=this._getRelativePosition(a.pageX,a.pageY),c=this._getDragHandler();if(c){if(a=c.processDragEnd(b,a.ctrlKey))this._callback.call(this._callbackObj,a),this.autoToggleZoomButton();this._chart.setCursor(c.getCursor(b));(c=this._chart.__getAxisSpace())&&this.setDragButtonsVisible(c.containsPoint(b.x,b.y))}this._stageAbsolutePosition=null};
DvtChartEventManager.prototype.OnMouseMove=function(a){DvtChartEventManager.superclass.OnMouseMove.call(this,a);var b=this._getRelativePosition(a.pageX,a.pageY);this._dataCursorHandler&&(this.GetCurrentTargetForEvent(a)instanceof DvtButton?this._dataCursorHandler.processEnd():this._dataCursorHandler.processMove(b));(a=this._getDragHandler(b))?this._chart.setCursor(a.getCursor(b)):this._chart.setCursor("inherit")};
DvtChartEventManager.prototype.OnMouseOut=function(a){DvtChartEventManager.superclass.OnMouseOut.call(this,a);var b=this._getRelativePosition(a.pageX,a.pageY),c=this._chart.__getAxisSpace();c&&this.setDragButtonsVisible(c.containsPoint(b.x,b.y));this._dataCursorHandler&&this._dataCursorHandler.processOut(b);this._stageAbsolutePosition=null;this.GetLogicalObject(a.target)};
DvtChartEventManager.prototype.OnMouseWheel=function(a){if(DvtChartEventUtils.isZoomable(this._chart)){var b=null!=a.wheelDelta?a.wheelDelta:0,c=this._getRelativePosition(a.pageX,a.pageY);this._panZoomHandler&&(b=this._panZoomHandler.processMouseWheel(c,b))&&(a.preventDefault(),a.stopPropagation(),this._callback.call(this._callbackObj,b),this._dataCursorHandler&&this._dataCursorHandler.processMove(c))}};
DvtChartEventManager.prototype.ShowFocusEffect=function(a,b){if(this._dataCursorHandler){var c=b.getDataPosition();if(c){var d=this._chart.__getPlotAreaSpace();this._dataCursorHandler.processMove(new DvtPoint(c.x+d.x,c.y+d.y))}}DvtChartEventManager.superclass.ShowFocusEffect.call(this,a,b)};DvtChartEventManager.prototype.OnBlur=function(a){this._dataCursorHandler&&this._dataCursorHandler.processEnd();DvtChartEventManager.superclass.OnBlur.call(this,a)};
DvtChartEventManager.prototype.OnClickInternal=function(a){var b=this.GetLogicalObject(a.target);a=this._getRelativePosition(a.pageX,a.pageY);this.SeriesFocusHandler&&this.SeriesFocusHandler.processSeriesFocus(a,b);b&&(this.processActionEvent(b),b.isSelectable&&b.isSelectable()||this.processDrillEvent(b))};DvtChartEventManager.prototype.OnDblClickInternal=function(a){(a=this.GetLogicalObject(a.target))&&a.isSelectable&&a.isSelectable()&&this.processDrillEvent(a)};
DvtChartEventManager.prototype.HandleTouchHoverStartInternal=function(a){var b=this.GetLogicalObject(a.target);this.TouchManager.setTooltipEnabled(a.touch.identifier,this.getTooltipsEnabled(b));return!1};DvtChartEventManager.prototype.HandleTouchHoverMoveInternal=function(a){var b=this.GetLogicalObject(a.target);this.TouchManager.setTooltipEnabled(a.touch.identifier,this.getTooltipsEnabled(b));return!1};
DvtChartEventManager.prototype.HandleTouchHoverEndInternal=function(a){if(a=this.GetLogicalObject(a.target))this.processActionEvent(a),a.isSelectable&&a.isSelectable()||this.processDrillEvent(a)};DvtChartEventManager.prototype.HandleTouchClickInternal=function(a){if(a=this.GetLogicalObject(a.target))this.processActionEvent(a),a.isSelectable&&a.isSelectable()||this.processDrillEvent(a)};
DvtChartEventManager.prototype.HandleTouchDblClickInternal=function(a){(a=this.GetLogicalObject(a.target))&&a.isSelectable&&a.isSelectable()&&this.processDrillEvent(a)};DvtChartEventManager.prototype.processActionEvent=function(a){a&&a.getAction&&a.getAction()&&this.FireEvent(new DvtActionEvent(DvtActionEvent.SUBTYPE_ACTION,a.getAction(),a.getId()))};
DvtChartEventManager.prototype.processDrillEvent=function(a){if(a&&a.isDrillable&&a.isDrillable()){var b=a.getId();a instanceof DvtChartObjPeer?this.FireEvent(new DvtDrillEvent(b.getId?b.getId():b,a.getSeries(),a.getGroup())):a instanceof DvtPieSlice&&this.FireEvent(new DvtDrillEvent(b.getId(),b.getSeries(),b.getGroup()))}};
DvtChartEventManager.prototype.ProcessRolloverEvent=function(a,b,c){a=this._chart.getOptions();if("dim"==DvtChartEventUtils.getHoverBehavior(this._chart)){b=b.getCategories?b.getCategories():[];a.highlightedCategories=c?b.slice():null;c=new DvtCategoryRolloverEvent(c?DvtCategoryRolloverEvent.TYPE_OVER:DvtCategoryRolloverEvent.TYPE_OUT,a.highlightedCategories);b=DvtChartStyleUtils.getHoverBehaviorDelay(this._chart);var d=this._chart.getObjects();this._chart.pieChart&&(d=d.concat(this._chart.pieChart.__getSlices()));
this.RolloverHandler.processEvent(c,d,b,"any"==a.highlightMatch)}};
DvtChartEventManager.prototype._onTouchDragStart=function(a){var b=a.touches,c,d;if(1==b.length){var b=this._getRelativePosition(b[0].pageX,b[0].pageY),e=this._getDragHandler();e?c=e.processDragStart(b,!0):this._dataCursorHandler&&(this._dataCursorHandler.processMove(b),d=!0)}else 2==b.length&&this._panZoomHandler&&DvtChartEventUtils.isZoomable(this._chart)&&(this.endDrag(),c=this._getRelativePosition(b[0].pageX,b[0].pageY),b=this._getRelativePosition(b[1].pageX,b[1].pageY),c=this._panZoomHandler.processPinchStart(c,
b));c&&(this._callback.call(this._callbackObj,c),this.getCtx().getTooltipManager().hideTooltip());return c||d?(a.preventDefault(),a.stopPropagation(),this.setDragButtonsVisible(!1),!0):!1};
DvtChartEventManager.prototype._onTouchDragMove=function(a){var b=a.touches,c,d;if(1==b.length){var b=this._getRelativePosition(b[0].pageX,b[0].pageY),e=this._getDragHandler();e?c=e.processDragMove(b,!0):this._dataCursorHandler&&(this._dataCursorHandler.processMove(b),d=!0)}else 2==b.length&&this._panZoomHandler&&DvtChartEventUtils.isZoomable(this._chart)&&(c=this._getRelativePosition(b[0].pageX,b[0].pageY),b=this._getRelativePosition(b[1].pageX,b[1].pageY),c=this._panZoomHandler.processPinchMove(c,
b));(c||d)&&a.preventDefault();c&&(this._callback.call(this._callbackObj,c),this.getCtx().getTooltipManager().hideTooltip())};DvtChartEventManager.prototype._onTouchDragEnd=function(a){var b=this.endDrag(),c;this._panZoomHandler&&DvtChartEventUtils.isZoomable(this._chart)&&(c=this._panZoomHandler.processPinchEnd())&&this._callback.call(this._callbackObj,c);if(b||c)a.preventDefault(),this.getCtx().getTooltipManager().hideTooltip();this._stageAbsolutePosition=null;this.setDragButtonsVisible(!0)};
DvtChartEventManager.prototype.endDrag=function(){var a=this._getDragHandler(),b;a&&(b=a.processDragEnd(null,!0))&&this._callback.call(this._callbackObj,b);this._dataCursorHandler&&this._dataCursorHandler.processEnd();b&&this._callback.call(this._callbackObj,b);return b};DvtChartEventManager.prototype.zoomBy=function(a){this._panZoomHandler&&DvtChartEventUtils.isZoomable(this._chart)&&(a=this._panZoomHandler.zoomBy(a))&&this._callback.call(this._callbackObj,a)};
DvtChartEventManager.prototype.panBy=function(a,b){if(this._panZoomHandler&&DvtChartEventUtils.isScrollable(this._chart)){var c=this._panZoomHandler.panBy(a,b);c&&this._callback.call(this._callbackObj,c)}};DvtChartEventManager.prototype.hideHoverFeedback=function(){this.hideTooltip();this._dataCursorHandler&&this._dataCursorHandler.processEnd()};DvtChartEventManager.prototype.hideTooltip=function(){this._dataCursorHandler&&this._dataCursorHandler.isDataCursorShown()||DvtChartEventManager.superclass.hideTooltip.call(this)};
DvtChartEventManager.prototype.getTooltipsEnabled=function(a){return this._dataCursorHandler&&(a instanceof DvtChartObjPeer||a instanceof DvtRefObjPeer||this._dataCursorHandler.isDataCursorShown())?!1:DvtChartEventManager.superclass.getTooltipsEnabled.call(this)};DvtChartEventManager.prototype.getDataCursorHandler=function(){return this._dataCursorHandler};DvtChartEventManager.prototype.setDataCursorHandler=function(a){this._dataCursorHandler=a};
DvtChartEventManager.prototype.setPanZoomHandler=function(a){this._panZoomHandler=a};DvtChartEventManager.prototype.setMarqueeZoomHandler=function(a){this._marqueeZoomHandler=a};DvtChartEventManager.prototype.setMarqueeSelectHandler=function(a){this._marqueeSelectHandler=a};
DvtChartEventManager.prototype.cancelMarquee=function(a){this._dragMode==DvtChartEventManager.DRAG_MODE_ZOOM?this._marqueeZoomHandler.cancelMarquee()&&a.preventDefault():this._dragMode==DvtChartEventManager.DRAG_MODE_SELECT&&this._marqueeSelectHandler&&this._marqueeSelectHandler.cancelMarquee()&&this._chart.render()};DvtChartEventManager.prototype.getDragMode=function(){return this._dragMode};
DvtChartEventManager.prototype.setDragMode=function(a){this._dragMode=null==a?this._getDefaultDragMode():a;!this._chart.xAxis.isFullViewport()||this._chart.yAxis&&!this._chart.yAxis.isFullViewport()||this.autoToggleZoomButton()};
DvtChartEventManager.prototype._getDefaultDragMode=function(){return DvtAgent.isTouchDevice()?DvtChartEventManager.DRAG_MODE_OFF:DvtChartEventUtils.isScrollable(this._chart)?DvtChartEventManager.DRAG_MODE_PAN:"multiple"==this._chart.getOptions().selectionMode?DvtChartEventManager.DRAG_MODE_SELECT:null};
DvtChartEventManager.prototype.onZoomButtonClick=function(a){this.zoomButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(DvtChartEventManager.DRAG_MODE_ZOOM)):this.setDragMode(null)};DvtChartEventManager.prototype.onPanButtonClick=function(a){this.panButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(DvtChartEventManager.DRAG_MODE_PAN)):this.setDragMode(null)};
DvtChartEventManager.prototype.onSelectButtonClick=function(a){this.selectButton.isToggled()?(this.zoomButton&&this.zoomButton.setToggled(!1),this.panButton&&this.panButton.setToggled(!1),this.setDragMode(DvtChartEventManager.DRAG_MODE_SELECT)):this.setDragMode(null)};
DvtChartEventManager.prototype.setDragButtonsVisible=function(a){a&&!this._dragButtonsVisible?(this._chart.showDragButtons(),this._dragButtonsVisible=!0):!a&&this._dragButtonsVisible&&(this._chart.hideDragButtons(),this._dragButtonsVisible=!1)};DvtChartEventManager.prototype.areDragButtonsVisible=function(){return this._dragButtonsVisible};
DvtChartEventManager.prototype.autoToggleZoomButton=function(){!DvtAgent.isTouchDevice()&&this.zoomButton&&(this._chart.xAxis.isFullViewport()&&this._chart.yAxis.isFullViewport()?this._dragMode==DvtChartEventManager.DRAG_MODE_PAN&&(this.zoomButton.setToggled(!0),this.onZoomButtonClick(null)):this._dragMode==DvtChartEventManager.DRAG_MODE_ZOOM&&(this.zoomButton.setToggled(!1),this.onZoomButtonClick(null)))};
DvtChartEventManager.prototype.GetTouchResponse=function(){return this._dragMode&&this._dragMode!=DvtChartEventManager.DRAG_MODE_OFF?DvtEventManager.TOUCH_RESPONSE_TOUCH_HOLD:this._chart.getOptions().touchResponse};var DvtChartKeyboardHandler=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtChartKeyboardHandler,DvtKeyboardHandler,"DvtChartKeyboardHandler");DvtChartKeyboardHandler.prototype.Init=function(a,b){DvtChartKeyboardHandler.superclass.Init.call(this,a);this._chart=b};
DvtChartKeyboardHandler.prototype.isSelectionEvent=function(a){return this.isNavigationEvent(a)&&!a.ctrlKey};DvtChartKeyboardHandler.prototype.isMultiSelectEvent=function(a){return a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey};
DvtChartKeyboardHandler.prototype.processKeyDown=function(a){var b=a.keyCode;if(b==DvtKeyboardEvent.TAB){if(b=this._eventManager.getFocus())return DvtEventManager.consumeEvent(a),b;b=DvtChartEventUtils.getKeyboardNavigables(this._chart);if(0<b.length)return DvtEventManager.consumeEvent(a),this.getDefaultNavigable(b)}else if(b==DvtKeyboardEvent.ENTER){if(b=this._eventManager.getFocus())return this._eventManager.processActionEvent(b),this._eventManager.processDrillEvent(b),DvtEventManager.consumeEvent(a),
b}else b==DvtKeyboardEvent.ESCAPE?this._eventManager.cancelMarquee(a):b==DvtKeyboardEvent.PAGE_UP?((a.ctrlKey||a.shiftKey||DvtChartTypeUtils.isBLAC(this._chart))&&DvtChartTypeUtils.isVertical(this._chart)?this._eventManager.panBy(-.25,0):this._eventManager.panBy(0,-.25),DvtEventManager.consumeEvent(a)):b==DvtKeyboardEvent.PAGE_DOWN?((a.ctrlKey||a.shiftKey||DvtChartTypeUtils.isBLAC(this._chart))&&DvtChartTypeUtils.isVertical(this._chart)?this._eventManager.panBy(.25,0):this._eventManager.panBy(0,.25),
DvtEventManager.consumeEvent(a)):DvtKeyboardEvent.isEquals(a)||DvtKeyboardEvent.isPlus(a)?this._eventManager.zoomBy(1.5):(DvtKeyboardEvent.isMinus(a)||DvtKeyboardEvent.isUnderscore(a))&&this._eventManager.zoomBy(1/1.5);return DvtChartKeyboardHandler.superclass.processKeyDown.call(this,a)};
DvtChartKeyboardHandler.prototype.getDefaultNavigable=function(a){if(!a||0>=a.length)return null;for(var b=DvtChartTypeUtils.isPie(this._chart),c,d,e,g,h=0;h<a.length;h++)g=a[h],!c||g.getSeriesIndex()<d?(c=g,d=g.getSeriesIndex(),b||(e=g.getGroupIndex())):!b&&g.getGroupIndex()<e&&(c=g,d=g.getSeriesIndex(),e=g.getGroupIndex());return c};var DvtChartObjPeer=function(a,b,c,d,e){this.Init(a,b,c,d,e)};DvtObj.createSubclass(DvtChartObjPeer,DvtObj,"DvtChartObjPeer");
DvtChartObjPeer.prototype.Init=function(a,b,c,d,e){this._chart=a;this._displayables=b;this._seriesIndex=isNaN(c)?-1:c;this._groupIndex=isNaN(d)?-1:d;this._dataPos=e;this._isShowingKeyboardFocusEffect=this._isSelected=!1;0<=c&&(this._series=DvtChartDataUtils.getSeries(a,c));0<=d&&(this._group=DvtChartDataUtils.getGroup(a,d));if(e=DvtChartDataUtils.getSeriesItem(a,c))this._action=e.action,this._drillable=DvtChartEventUtils.isSeriesDrillable(a,c),this._stampId=e._id;var g=DvtChartDataUtils.getDataItem(a,
c,d);this._categories=g&&null!=g.categories?g.categories:e.categories?e.categories:e.name?[e.name]:[];g&&(this._dataItemId=g.id,this._action=g.action,this._drillable=DvtChartEventUtils.isDataItemDrillable(a,c,d),this._stampId=g._id);if(this._action||this._drillable)for(a=0;a<this._displayables.length;a++)this._displayables[a].setCursor(DvtSelectionEffectUtils.getSelectingCursor());for(a=0;a<b.length;a++)c=b[a],c instanceof DvtChartLineArea||c.setAriaRole("img"),this._updateAriaLabel(c)};
DvtChartObjPeer.associate=function(a,b,c,d,e){a&&(c=new DvtChartObjPeer(b,[a],c,d,e),b.registerObject(c),b.__getEventManager().associate(a,c))};DvtChartObjPeer.prototype.getId=function(){return 0<=this._seriesIndex&&0<=this._groupIndex?new DvtChartDataItem(this._dataItemId,this.getSeries(),this.getGroup()):0<=this._seriesIndex?this.getSeries():null};DvtChartObjPeer.prototype.getDataItemId=function(){return this._dataItemId};DvtChartObjPeer.prototype.getSeries=function(){return this._series};
DvtChartObjPeer.prototype.getSeriesIndex=function(){return this._seriesIndex};DvtChartObjPeer.prototype.getGroup=function(){return this._group};DvtChartObjPeer.prototype.getGroupIndex=function(){return this._groupIndex};DvtChartObjPeer.prototype.getAction=function(){return this._action};DvtChartObjPeer.prototype.isDrillable=function(){return this._drillable};DvtChartObjPeer.prototype.isDoubleClickable=function(){return this.isSelectable()&&this.isDrillable()};DvtChartObjPeer.prototype.getChart=function(){return this._chart};
DvtChartObjPeer.prototype.getSeriesType=function(){return DvtChartStyleUtils.getSeriesType(this._chart,this._seriesIndex)};DvtChartObjPeer.prototype.getSeriesItem=function(){return DvtChartDataUtils.getSeriesItem(this._chart,this._seriesIndex)};DvtChartObjPeer.prototype.getDatatip=function(a){return DvtChartTooltipUtils.getDatatip(this._chart,this._seriesIndex,this._groupIndex,!0)};
DvtChartObjPeer.prototype.getDatatipColor=function(){return DvtChartTooltipUtils.getDatatipColor(this._chart,this._seriesIndex,this._groupIndex)};DvtChartObjPeer.prototype.isSelectable=function(){return DvtChartStyleUtils.isSelectable(this.getChart(),this.getSeriesIndex(),this.getGroupIndex())};DvtChartObjPeer.prototype.isSelected=function(){return this._isSelected};
DvtChartObjPeer.prototype.setSelected=function(a){this._isSelected=a;for(var b=0;b<this._displayables.length;b++)this._displayables[b].setSelected&&(this._displayables[b].setSelected(a),this._updateAriaLabel(this._displayables[b]))};DvtChartObjPeer.prototype.showHoverEffect=function(){for(var a=0;a<this._displayables.length;a++)this._displayables[a].showHoverEffect&&this._displayables[a].showHoverEffect()};
DvtChartObjPeer.prototype.hideHoverEffect=function(){for(var a=0;a<this._displayables.length;a++)this._displayables[a].hideHoverEffect&&this._displayables[a].hideHoverEffect()};DvtChartObjPeer.prototype.getShowPopupBehaviors=function(){return this._chart.getShowPopupBehaviors(this._stampId)};DvtChartObjPeer.prototype.getDisplayables=function(){return this._displayables};
DvtChartObjPeer.prototype.getAriaLabel=function(){var a=[],b=this.getChart().getOptions();this.isSelectable()&&a.push(DvtBundle.getTranslation(b,this.isSelected()?"stateSelected":"stateUnselected",DvtBundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED"));this.isDrillable()&&a.push(DvtBundle.getTranslation(b,"stateDrillable",DvtBundle.UTIL_PREFIX,"STATE_DRILLABLE"));b=DvtChartTooltipUtils.getDatatip(this._chart,this._seriesIndex,this._groupIndex,!1);null==b&&0>this._groupIndex&&
0<a.length&&(b=DvtChartDataUtils.getSeriesLabel(this._chart,this._seriesIndex));return DvtDisplayable.generateAriaLabel(b,a)};DvtChartObjPeer.prototype._updateAriaLabel=function(a){DvtAgent.deferAriaCreation()||a.setAriaProperty("label",this.getAriaLabel())};DvtChartObjPeer.prototype.getCategories=function(a){return this._categories};DvtChartObjPeer.prototype.getDataPosition=function(){return this._dataPos};
DvtChartObjPeer.prototype.getNextNavigable=function(a){var b;b=a.keyCode;if(a.type==DvtMouseEvent.CLICK||b==DvtKeyboardEvent.SPACE&&a.ctrlKey)return this;b=this._chart;for(var c=b.getChartObjPeers(),d=[],e=0;e<c.length;e++)c[e].isNavigable()&&d.push(c[e]);DvtChartTypeUtils.isScatterBubble(b)?a=DvtKeyboardHandler.getNextAdjacentNavigable(this,a,d):DvtChartTypeUtils.isLineArea(b)||DvtChartTypeUtils.isStacked(b)||DvtChartTypeUtils.isPolar(b)?a=this._findNextNavigable(a):!DvtChartTypeUtils.isFunnel(b)||
a.keyCode!=DvtKeyboardEvent.UP_ARROW&&a.keyCode!=DvtKeyboardEvent.DOWN_ARROW?a=DvtKeyboardHandler.getNextNavigable(this,a,d,!0):(--a.keyCode,a=DvtKeyboardHandler.getNextNavigable(this,a,d));return a};DvtChartObjPeer.prototype.getKeyboardBoundingBox=function(a){return this._displayables[0]?this._displayables[0].getDimensions(a):new DvtRectangle(0,0,0,0)};DvtChartObjPeer.prototype.getTargetElem=function(){return this._displayables[0]?this._displayables[0].getElem():null};
DvtChartObjPeer.prototype.showKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect())};DvtChartObjPeer.prototype.hideKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect())};DvtChartObjPeer.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};DvtChartObjPeer.prototype.isNavigable=function(){return-1!=this.getGroupIndex()&&-1!=this.getSeriesIndex()};
DvtChartObjPeer.prototype._findNextNavigable=function(a){a=a.keyCode;var b=this._chart,c=b.getCtx(),d=this.getSeriesIndex(),e=this.getGroupIndex(),g=DvtChartDataUtils.getGroupCount(b),h,k,m=DvtChartTypeUtils.isHorizontal(b),n=DvtChartTypeUtils.isPolar(b),c=DvtAgent.isRightToLeft(c),t=m?c?a==DvtKeyboardEvent.RIGHT_ARROW:a==DvtKeyboardEvent.LEFT_ARROW:a==DvtKeyboardEvent.DOWN_ARROW,u=m?a==DvtKeyboardEvent.UP_ARROW:c?a==DvtKeyboardEvent.RIGHT_ARROW:a==DvtKeyboardEvent.LEFT_ARROW,v=m?a==DvtKeyboardEvent.DOWN_ARROW:
c?a==DvtKeyboardEvent.LEFT_ARROW:a==DvtKeyboardEvent.RIGHT_ARROW;if(m?c?a==DvtKeyboardEvent.LEFT_ARROW:a==DvtKeyboardEvent.RIGHT_ARROW:a==DvtKeyboardEvent.UP_ARROW)k=e,h=this._findNextUpSeries(b,d,e);else if(t)k=e,h=this._findNextDownSeries(b,d,e);else if(v){h=d;k=e;do k++,n&&k>=g&&(k=0);while(null==b.getObject(h,k)&&k<g)}else if(u){h=d;k=e;do k--,n&&0>k&&(k=g-1);while(null==b.getObject(h,k)&&-1<k)}return(h=b.getObject(h,k))&&h.isNavigable()?h:this};
DvtChartObjPeer.prototype._findNextUpSeries=function(a,b,c){for(var d=DvtChartDataUtils.getSeriesCount(a),e=DvtChartDataUtils.getCumulativeValue(a,b,c),g=null,h=null,k=0;k<d;k++)if(DvtChartStyleUtils.isSeriesRendered(a,k)){var m=DvtChartDataUtils.getCumulativeValue(a,k,c);if(m>e||m==e&&k>b)if(null!==g&&m<g||null==g)g=m,h=k}return h};
DvtChartObjPeer.prototype._findNextDownSeries=function(a,b,c){for(var d=DvtChartDataUtils.getSeriesCount(a),e=DvtChartDataUtils.getCumulativeValue(a,b,c),g=null,h=null,d=d-1;0<=d;d--)if(DvtChartStyleUtils.isSeriesRendered(a,d)){var k=DvtChartDataUtils.getCumulativeValue(a,d,c);if(k<e||k==e&&d<b)if(null!==g&&k>g||null==g)g=k,h=d}return h};var DvtRefObjPeer=function(a,b,c,d,e){this.Init(a,b,c,d,e)};DvtObj.createSubclass(DvtRefObjPeer,DvtObj,"DvtRefObjPeer");
DvtRefObjPeer.prototype.Init=function(a,b,c,d,e){this._chart=a;this._displayables=b;this._refObj=c;this._index=d;this._axisType=e;for(a=0;a<b.length;a++)d=b[a],d.setAriaRole("img"),d.setAriaProperty("label",c.shortDesc)};DvtRefObjPeer.prototype.getCategories=function(){return[DvtChartRefObjUtils.getId(this._refObj)]};DvtRefObjPeer.prototype.getDisplayables=function(){return this._displayables};DvtRefObjPeer.prototype.getIndex=function(){return this._index};DvtRefObjPeer.prototype.getAxisType=function(){return this._axisType};
DvtRefObjPeer.prototype.getDatatip=function(a){return DvtChartTooltipUtils.getRefObjTooltip(this._chart,this._refObj)};DvtRefObjPeer.prototype.getDatatipColor=function(){return DvtChartRefObjUtils.getColor(this._refObj)};var DvtChartDataItem=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtChartDataItem,DvtObj,"DvtChartDataItem");DvtChartDataItem.prototype.Init=function(a,b,c){this._id=a;this._series=b;this._group=c};DvtChartDataItem.prototype.getId=function(){return this._id};
DvtChartDataItem.prototype.getSeries=function(){return this._series};DvtChartDataItem.prototype.getGroup=function(){return this._group};DvtChartDataItem.prototype.equals=function(a){if(a instanceof DvtChartDataItem){var b=a.getGroup();return this._group instanceof Array&&b instanceof Array?DvtArrayUtils.equals(this._group,b)&&this._series===a.getSeries():this._group===b&&this._series===a.getSeries()}return!1};
var DvtChartDefaults=function(){this.Init({skyros:DvtChartDefaults.VERSION_1,alta:DvtChartDefaults.SKIN_ALTA,next:DvtChartDefaults.SKIN_NEXT})};DvtObj.createSubclass(DvtChartDefaults,DvtBaseComponentDefaults,"DvtChartDefaults");
DvtChartDefaults.SKIN_NEXT={skin:DvtCSSStyle.SKIN_NEXT,styleDefaults:{dataItemGaps:"auto",markerSize:10,marqueeColor:"rgba(255,255,255,0.4)",marqueeBorderColor:"#0572ce"},yAxis:{axisLine:{rendered:"auto"}},y2Axis:{axisLine:{rendered:"auto"}},layout:{titlePlotAreaGap:16,footnoteGap:10,legendGapWidth:15,legendGapHeight:10,tickLabelGapHeight:8,tickLabelGapWidth:9}};
DvtChartDefaults.SKIN_ALTA={skin:DvtCSSStyle.SKIN_ALTA,title:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; color: #252525;")},subtitle:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #252525;")},footnote:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 11px;")},_statusMessageStyle:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; color: #252525;"),
styleDefaults:{seriesEffect:"color",colors:DvtCSSStyle.COLORS_ALTA,pieCenterLabel:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;")},dataLabelStyle:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),stockRisingColor:"#6b6f74",stockFallingColor:"#ED6647"}};
DvtChartDefaults.VERSION_1={skin:DvtCSSStyle.SKIN_SKYROS,emptyText:null,type:"bar",stack:"off",orientation:"vertical",polarGridShape:"circle",selectionMode:"none",hideAndShowBehavior:"none",hoverBehavior:"none",zoomAndScroll:"off",zoomDirection:"auto",initialZooming:"none",dragMode:"user",sorting:"off",otherThreshold:0,animationOnDataChange:"none",animationOnDisplay:"none",__sparkBarSpacing:"subpixel",__spark:!1,dataCursor:"auto",dataCursorBehavior:"auto",drilling:"off",highlightMatch:"all",series:[],
groups:[],title:{style:new DvtCSSStyle("font-family: tahoma, sans-serif; font-size: 12px; color: #003d5b; font-weight: bold"),halign:"start"},subtitle:{style:new DvtCSSStyle("font-family: tahoma, sans-serif; font-size: 12px; color: #003d5b;")},footnote:{style:new DvtCSSStyle("font-family: tahoma, sans-serif; font-size: 10px; color: #333333;"),halign:"start"},titleSeparator:{upperColor:"#74779A",lowerColor:"#FFFFFF",rendered:"off"},touchResponse:"auto",_statusMessageStyle:new DvtCSSStyle("font-family: tahoma, sans-serif; font-size: 12px; color: #003d5b; font-weight: bold"),
xAxis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear",maxSize:.33},yAxis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear",maxSize:.33},y2Axis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear",maxSize:.33,alignTickMarks:"on"},plotArea:{backgroundColor:null},legend:{position:"auto",
rendered:"on",maxSize:.3,layout:{gapRatio:1},seriesSection:{},referenceObjectSection:{},sections:[]},overview:{rendered:"off"},styleDefaults:{colors:DvtCSSStyle.COLORS_SKYROS,borderColor:"auto",borderWidth:"auto",patterns:"smallDiagonalRight smallChecker smallDiagonalLeft smallTriangle smallCrosshatch smallDiamond largeDiagonalRight largeChecker largeDiagonalLeft largeTriangle largeCrosshatch largeDiamond".split(" "),shapes:"square circle diamond plus triangleDown triangleUp".split(" "),seriesEffect:"gradient",
threeDEffect:"off",selectionEffect:"highlight",animationDuration:1E3,animationIndicators:"all",animationUpColor:"#0099FF",animationDownColor:"#FF3300",lineStyle:"solid",lineType:"auto",markerDisplayed:"auto",markerColor:null,markerShape:"auto",markerSize:8,marqueeColor:"rgba(255,255,255,0.5)",marqueeBorderColor:"rgba(0,0,0,0.2)",pieFeelerColor:"#BAC5D6",pieInnerRadius:0,selectedInnerColor:"#ffffff",selectedOuterColor:"#5a5a5a",pieCenterLabel:{style:new DvtCSSStyle("font-family: tahoma, sans-serif;")},
sliceLabelType:"percent",otherColor:"#4b4b4b",stockRisingColor:"#006666",stockFallingColor:"#CC3300",stockRangeColor:"#B8B8B8",dataItemGaps:"0%",dataLabelStyle:new DvtCSSStyle("font-family: tahoma, sans-serif; font-size: 11px;"),dataLabelPosition:"auto",funnelBackgroundColor:"#EDEDED",x1Format:{},y1Format:{},y2Format:{},zFormat:{},_defaultSliceLabelColor:"#333333",_scrollbarHeight:3,_scrollbarTrackColor:"#F0F0F0",_scrollbarHandleColor:"#9E9E9E",hoverBehaviorDelay:200,dataCursor:{markerSize:8,markerDisplayed:"on",
lineColor:"#5a5a5a",lineWidth:2,lineStyle:"solid"},groupSeparators:{rendered:"on",color:"rgba(138,141,172,0.4)"},padding:"auto",_tooltipStyle:new DvtCSSStyle("border-collapse: separate; border-spacing: 2px"),tooltipLabelStyle:new DvtCSSStyle("color: #737373; padding: 0px 2px"),tooltipValueStyle:new DvtCSSStyle("color: #333333; padding: 0px 2px")},layout:{gapWidthRatio:null,gapHeightRatio:null,outerGapWidth:10,outerGapHeight:8,titleSubtitleGapWidth:14,titleSubtitleGapHeight:4,titleSeparatorGap:6,titlePlotAreaGap:10,
footnoteGap:7,verticalAxisGap:6,legendGapWidth:10,legendGapHeight:10,tickLabelGapHeight:5,tickLabelGapWidth:7},_locale:"en-us",_resources:{}};DvtChartDefaults.getGapWidth=function(a,b){return Math.ceil(b*a.getGapWidthRatio())};DvtChartDefaults.getGapHeight=function(a,b){return Math.ceil(b*a.getGapHeightRatio())};DvtChartDefaults.isSkyrosSkin=function(a){return a.getSkin()==DvtCSSStyle.SKIN_SKYROS};
DvtChartDefaults.isPostAltaSkin=function(a){return a.getSkin()!=DvtCSSStyle.SKIN_SKYROS&&a.getSkin()!=DvtCSSStyle.SKIN_ALTA};var DvtDataCursorHandler=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDataCursorHandler,DvtObj,"DvtDataCursorHandler");DvtDataCursorHandler.prototype.Init=function(a,b){this._context=a.getCtx();this._dataCursorShown=!1;this._dataCursor=b;this._chart=a};
DvtDataCursorHandler.prototype.processMove=function(a,b){var c=this._chart.__getPlotAreaSpace();if(c.containsPoint(a.x,a.y))return this._showDataCursor(c,a.x,a.y,b),!0;this._removeDataCursor(b);return!1};DvtDataCursorHandler.prototype.processEnd=function(a){this._removeDataCursor(a)};DvtDataCursorHandler.prototype.processOut=function(a,b){this._chart.__getPlotAreaSpace().containsPoint(a.x,a.y)||this._removeDataCursor(b)};
DvtDataCursorHandler.prototype._showDataCursor=function(a,b,c,d){if(this._context.isOffscreen())this._removeDataCursor(d);else{var e=this._dataCursor,g=this._getClosestMatch(b,c);if(null==g)this._removeDataCursor(d);else{var h=DvtGeomUtils.getCenterPoint(g.matchRegion),k=b,m=c;e.getBehavior()==DvtDataCursor.BEHAVIOR_SNAP&&(e.isHorizontal()?m=Math.min(Math.max(h.y,a.y),a.y+a.h):k=Math.min(Math.max(h.x,a.x),a.x+a.w));var n=DvtChartTooltipUtils.getDatatip(this._chart,g.sidx,g.gidx,!0);null==n?e.setVisible(!1):
(e.setVisible(!0),g=DvtChartTooltipUtils.getDatatipColor(this._chart,g.sidx,g.gidx),k=e.isHorizontal()?m:k,e.render(a,h.x,h.y,k,n,g),this._dataCursorShown=!0,d||(a=this._chart.getValuesAt(b,c),this._chart.changeOption("dataCursorPosition",a)))}}};
DvtDataCursorHandler.prototype._removeDataCursor=function(a){this._dataCursor.getVisible()&&this._dataCursor.setVisible(!1);this._context.getTooltipManager(DvtDataCursor.TOOLTIP_ID).hideTooltip();this._dataCursorShown=!1;a||this._chart.changeOption("dataCursorPosition",null)};DvtDataCursorHandler.prototype.isDataCursorShown=function(){return this._dataCursorShown};
DvtDataCursorHandler._getClosestMatchSecondDirection=function(a,b,c,d){for(var e=null,g=Infinity,h=0;h<a.length;h++){var k=a[h],m=Math.round(Math.abs(((b?k.matchRegion.x:k.matchRegion.y)+(b?k.matchRegion.x+k.matchRegion.w:k.matchRegion.y+k.matchRegion.h))/2-(b?c:d)));m<g&&(g=m,e=k)}return e};
DvtDataCursorHandler._getClosestMatchesFirstDirection=function(a,b,c,d){for(var e=Infinity,g=[],h=0;h<a.length;h++){var k=a[h],m=Math.round(Math.abs(((b?k.matchRegion.y:k.matchRegion.x)+(b?k.matchRegion.y+k.matchRegion.h:k.matchRegion.x+k.matchRegion.w))/2-(b?d:c)));m<=e&&(m<e&&(g=[]),g.push(k),e=m)}return g};
DvtDataCursorHandler.prototype._findMatches=function(){var a=this._context.getStage(),b=this._chart.__getEventManager(),c=[];if(!this._chart._currentMarkers)return null;for(var d=0;d<this._chart._currentMarkers.length;d++)for(var e=this._chart._currentMarkers[d],g=e.length,h=0;h<g;h++){var k=e[h],m=b.GetLogicalObject(k),n=k.getDimensionsSelf?k.getDimensionsSelf(a):k.getDimensions(a),k={obj:k,matchRegion:n,gidx:m.getGroupIndex(),sidx:m.getSeriesIndex(),marker:null};c.push(k)}return c};
DvtDataCursorHandler.prototype._getClosestMatch=function(a,b){var c=DvtChartTypeUtils.isHorizontal(this._chart),d=DvtChartTypeUtils.isLineArea(this._chart)&&!DvtChartAxisUtils.isMixedFrequency(this._chart),e=this._findMatches(),g=DvtDataCursorHandler._getClosestMatchesFirstDirection(e,c,a,b);if(!DvtChartTypeUtils.isScatterBubble(this._chart)){for(var h=Infinity,k=-Infinity,m=null,n=0;n<g.length;n++)m=g[n],h=Math.min(h,c?m.matchRegion.y:m.matchRegion.x),k=Math.max(k,c?m.matchRegion.y+m.matchRegion.h:
m.matchRegion.x+m.matchRegion.w),m=m.gidx;for(n=0;n<e.length;n++){var t=e[n],u=t.gidx;d?m==u&&g.push(t):(u=((c?t.matchRegion.y:t.matchRegion.x)+(c?t.matchRegion.y+t.matchRegion.h:t.matchRegion.x+t.matchRegion.w))/2,k>=u&&h<=u&&g.push(t))}}return DvtDataCursorHandler._getClosestMatchSecondDirection(g,c,a,b)};var DvtAnimOnDisplay=function(){};DvtObj.createSubclass(DvtAnimOnDisplay,DvtObj,"DvtAnimOnDisplay");
DvtAnimOnDisplay.createAnimation=function(a,b,c){b=[];if(DvtChartTypeUtils.isBLAC(a))DvtAnimOnDisplay._animBarLineArea(a,c,b);else if(DvtChartTypeUtils.isScatterBubble(a)||DvtChartTypeUtils.isFunnel(a))DvtAnimOnDisplay._animBubbleScatterFunnel(a,c,b);else if(DvtChartTypeUtils.isPie(a)&&a.pieChart)return a.pieChart.getDisplayAnimation();return 0<b.length?new DvtParallelPlayable(a.getCtx(),b):null};
DvtAnimOnDisplay._animBarLineArea=function(a,b,c){var d=a.getChartObjPeers(),e=d?d.length:0;if(e)for(var g,h,k=0;k<e;k++){h=d[k];g=h.getDisplayables()[0];var m=h.getSeriesType();h=null;if(g instanceof DvtChartBar||g instanceof DvtChartPolarBar||g instanceof DvtChartCandlestick)h=g.getDisplayAnimation(b);else if(g instanceof DvtChartLineArea)h="line"==m?DvtAnimOnDisplay._getLinePlayable(a,g,b):DvtAnimOnDisplay._getAreaPlayable(a,g,b);else if(g instanceof DvtSimpleMarker||g instanceof DvtChartRangeMarker){if(g instanceof
DvtChartLineMarker&&!g.isSelected())continue;h=new DvtAnimFadeIn(a.getCtx(),g,b-.8,.8)}h&&c.push(h)}};DvtAnimOnDisplay._animBubbleScatterFunnel=function(a,b,c){var d=a.getObjects(),e=d?d.length:0;if(e)for(var g,h,k=0;k<e;k++)g=d[k],g=g.getDisplayables()[0],g instanceof DvtSimpleMarker?h=new DvtAnimPopIn(a.getCtx(),g,!0,b):g instanceof DvtFunnelSlice&&(h=DvtAnimOnDisplay._getFunnelPlayable(a,g,b)),h&&c.push(h)};
DvtAnimOnDisplay._getAreaPlayable=function(a,b,c){var d=a.getCtx(),e=b.getBaseline(),g;if(b.isArea()){var h=b.getBaseCoords();g=b.getBaseAnimationParams();for(var k=g.slice(0),m=0;m<g.length;m++)if(1==m%4||2==m%4)g[m]=e;b.setBaseAnimationParams(g);g=new DvtCustomAnimation(d,b,c);g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getBaseAnimationParams,b.setBaseAnimationParams,k)}for(var n=b.getCoords(),t=b.getAnimationParams(),k=t.slice(0),m=0;m<t.length;m++)if(1==m%4||2==m%4)t[m]=e;b.setAnimationParams(t);
c=new DvtCustomAnimation(d,b,c);c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getAnimationParams,b.setAnimationParams,k);a=new DvtParallelPlayable(a.getCtx(),g,c);a.setOnEnd(function(){b.setCoords(n,h)});return a};
DvtAnimOnDisplay._getFunnelPlayable=function(a,b,c){a=a.getCtx();var d=b.getAnimationParams(),e=d.slice(0),g=d.slice(0);d[0]=0;d[2]=0;e[2]=0;b.setAnimationParams(d);d=new DvtCustomAnimation(a,b,c/2);d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getAnimationParams,b.setAnimationParams,e);c=new DvtCustomAnimation(a,b,c/2);c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getAnimationParams,b.setAnimationParams,g);return new DvtSequentialPlayable(a,[d,c])};
DvtAnimOnDisplay._getLinePlayable=function(a,b,c){var d=b.getCoords(),e=b.getAnimationParams(),g=e.slice(0);DvtAnimOnDisplay._getMeanPoints(e);b.setAnimationParams(e);a=new DvtCustomAnimation(a.getCtx(),b,c);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getAnimationParams,b.setAnimationParams,g);a.setOnEnd(function(){b.setCoords(d)});return a};
DvtAnimOnDisplay._getMeanPoints=function(a){var b=0,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=a.length,g;for(g=0;g<e;g++){var h=a[g];0!=g%4&&3!=g%4&&Infinity!=h&&(h<c&&(c=h),h>d&&(d=h),b+=h)}8<e?(b=b-2*c-2*d,b/=e/2-4):b/=e/2;for(g=0;g<e;g++)if(1==g%4||2==g%4)a[g]=b};var DvtAnimOnDC=function(){};DvtObj.createSubclass(DvtAnimOnDC,DvtObj,"DvtAnimOnDC");
DvtAnimOnDC.createAnimation=function(a,b,c,d,e){if(!DvtAnimOnDC._canAnimate(a,b))return null;c=b.getCtx();var g=[],h=[];DvtChartTypeUtils.isPie(b)?(g.push(a.pieChart),h.push(b.pieChart)):DvtAnimOnDC._buildAnimLists(c,g,a,h,b,d);var k;a=new DvtDataAnimationHandler(c,e);a.constructAnimation(g,h);0<a.getNumPlayables()&&(k=a.getAnimation(!0));b=b.getDataLabels();if(k&&0<b.length){for(a=0;a<b.length;a++)b[a].setAlpha(0);k=new DvtSequentialPlayable(c,k,new DvtAnimFadeIn(c,b,d/4))}return k};
DvtAnimOnDC._buildAnimLists=function(a,b,c,d,e,g){var h;a=c.getChartObjPeers();var k=b,m,n,t;for(b=0;2>b;b++){for(h=0;h<a.length;h++){m=a[h];n=m.getDisplayables()[0];t=null;if(n instanceof DvtFunnelSlice)t=new DvtDCFunnelSlice(m,g);else if(n instanceof DvtChartBar||n instanceof DvtChartPolarBar)t=new DvtDCChart2DBar(m,g);else if(n instanceof DvtChartLineArea)t=new DvtDCChartLineArea(m,g);else if(n instanceof DvtSimpleMarker){if(n instanceof DvtChartLineMarker&&!n.isSelected())continue;t=new DvtDCChartMarker(m,
g)}else if(n instanceof DvtChartRangeMarker){if(n.isInvisible()&&!n.isSelected())continue;t=new DvtDCChartRangeMarker(m,g)}else n instanceof DvtChartCandlestick&&(t=new DvtDCChartAbstract(m,g));t&&(k.push(t),t.setOldChart(c))}k=d;a=e.getChartObjPeers()}};
DvtAnimOnDC._canAnimate=function(a,b){return DvtChartTypeUtils.isPie(a)&&DvtChartTypeUtils.isPie(b)?a&&b:DvtChartTypeUtils.isPolar(a)!=DvtChartTypeUtils.isPolar(b)?!1:DvtChartTypeUtils.isBLAC(a)&&DvtChartTypeUtils.isBLAC(b)?!0:DvtChartTypeUtils.isScatterBubble(a)&&DvtChartTypeUtils.isScatterBubble(b)?!0:a.getType()==b.getType()?!0:!1};var DvtDCChart=function(a){this.Options=a.Options;this.Peers=a.Peers;this.SeriesStyleArray=a.SeriesStyleArray;this.Cache=a.Cache;this.pieChart=a.pieChart};
DvtObj.createSubclass(DvtDCChart,DvtChart,"DvtDCChart");var DvtDCChartAbstract=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCChartAbstract,DvtObj,"DvtDCChartAbstract");DvtDCChartAbstract.prototype.animateUpdate=function(a,b){var c=b._shape;this._shape&&this._shape.getUpdateAnimation&&a.add(this._shape.getUpdateAnimation(this._updateDuration,c),1)};
DvtDCChartAbstract.prototype.animateInsert=function(a){if(this._shape&&this._shape.getInsertAnimation)a.add(this._shape.getInsertAnimation(this._insertDuration),2);else{var b=new DvtAnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);a.add(b,0)}};
DvtDCChartAbstract.prototype.animateDelete=function(a,b){b.addChild(this._shape);if(this._shape&&this._shape.getDeleteAnimation)a.add(this._shape.getDeleteAnimation(this._deleteDuration),0);else{var c=new DvtAnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);a.add(c,0)}};DvtDCChartAbstract.prototype.getId=function(){return this._animId};
DvtDCChartAbstract.prototype.Init=function(a,b){this._peer=a;this._updateDuration=.75*b;this._insertDuration=.5*b;this._deleteDuration=.5*b;this._shape=a.getDisplayables()[0];this._animId=a.getSeries()+"/"+a.getGroup()};DvtDCChartAbstract.prototype.setOldChart=function(a){this._oldChart=a};var DvtDCChart2DBar=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCChart2DBar,DvtDCChartAbstract,"DvtDCChart2DBar");
DvtDCChart2DBar.prototype.Init=function(a,b){DvtDCChart2DBar.superclass.Init.call(this,a,b);this._indicator=null;this._animId+="/bar"};DvtDCChart2DBar.prototype.animateInsert=function(a){var b=this._shape.getInsertAnimation(this._insertDuration);a.add(b,2)};DvtDCChart2DBar.prototype.animateDelete=function(a,b){b.addChild(this._shape);var c=this._shape.getDeleteAnimation(this._deleteDuration);a.add(c,0)};
DvtDCChart2DBar.prototype.animateUpdate=function(a,b){var c=this._oldChart,d=this._peer.getChart(),e=DvtChartTypeUtils.isHorizontal(c)!=DvtChartTypeUtils.isHorizontal(d),g=b._getAnimationParams(e),e=this._getAnimationParams(),h=b._shape.isSelected()||this._shape.isSelected(),k=b._shape.getPrimaryFill().clone(),m=this._shape.getPrimaryFill();if(!DvtArrayUtils.equals(g,e)||!k.equals(m)){var n=this._peer.getSeriesIndex(),t=b._peer.getSeriesIndex(),u=this._peer.getGroupIndex(),v=b._peer.getGroupIndex();
"none"!==DvtChartStyleUtils.getAnimationIndicators(d)&&(this._indicator=DvtDCChartUtils.makeIndicator(c,t,v,d,n,u));this._setAnimationParams(g);h||this._shape.setFill(k);c=new DvtCustomAnimation(this._shape.getCtx(),this,this._updateDuration);c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,e);h||c.getAnimator().addProp(DvtAnimator.TYPE_FILL,this._shape,this._shape.getFill,this._shape.setFill,m);this._indicator&&(c.setOnEnd(this._onEndAnimation,
this),this._indicator.setAlpha(0));a.add(c,1)}};DvtDCChart2DBar.prototype._getAnimationParams=function(a){return this._shape.getAnimationParams(a)};DvtDCChart2DBar.prototype._setAnimationParams=function(a){this._shape.setAnimationParams(a,this._indicator)};DvtDCChart2DBar.prototype._onEndAnimation=function(){this._indicator.getParent().removeChild(this._indicator);this._indicator=null};var DvtDCChartLineArea=function(a,b){this.Init(a,b)};
DvtObj.createSubclass(DvtDCChartLineArea,DvtDCChartAbstract,"DvtDCChartLineArea");
DvtDCChartLineArea.prototype.animateUpdate=function(a,b){this._baseCoords=this._shape.getBaseCoords();this._coords=this._shape.getCoords();var c=this._shape.isArea(),d=this._oldChart,e=this._chart,g=this._peer.getSeriesIndex(),h=b._peer.getSeriesIndex(),k=this._shape.getCommonGroupIndices(b._shape),m=b._shape.getCommonGroupIndices(this._shape),n;if(c){var t=b._getBaseAnimationParams(this._shape),u=this._getBaseAnimationParams(b._shape);DvtDCChartLineArea._matchGroupIndices(t,u);DvtArrayUtils.equals(t,
u)||(this._setBaseAnimationParams(t),n=new DvtCustomAnimation(this._context,this,this._updateDuration),n.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this._getBaseAnimationParams,this._setBaseAnimationParams,u))}var v,t=b._getAnimationParams(this._shape),u=this._getAnimationParams(b._shape);DvtDCChartLineArea._matchGroupIndices(t,u);DvtArrayUtils.equals(t,u)||(this._setAnimationParams(t),v=new DvtCustomAnimation(this._context,this,this._updateDuration),v.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,
this,this._getAnimationParams,this._setAnimationParams,u));if("none"!==DvtChartStyleUtils.getAnimationIndicators(e)&&(!c||"lineWithArea"!=this._peer.getSeriesType()))for(u=0;u<k.length;u++)c=DvtDCChartUtils.getDirection(d,h,m[u],e,g,k[u]),(t=DvtDCChartUtils.makeIndicator(d,h,m[u],e,g,k[u]))&&this._shape.addIndicator(k[u],c,t);if(n||v)d=new DvtParallelPlayable(this._context,n,v),d.setOnEnd(this._onAnimationEnd,this),a.add(d,1)};
DvtDCChartLineArea.prototype.animateInsert=function(a){this._shape.setAlpha(0);var b=new DvtAnimFadeIn(this._context,this._shape,this._insertDuration);a.add(b,2)};
DvtDCChartLineArea.prototype.animateDelete=function(a,b){var c;"area"==DvtChartStyleUtils.getSeriesType(this._oldChart,this._peer.getSeriesIndex())?(c=this._chart.__getAreaContainer(),this._deletedAreas=this._shape.getParent().getParent(),c&&(c.addChild(this._deletedAreas),c=new DvtAnimFadeOut(this._context,this._deletedAreas,this._deleteDuration),c.setOnEnd(this._removeDeletedAreas,this),a.add(c,0))):(b.addChild(this._shape),c=new DvtAnimFadeOut(this._context,this._shape,this._deleteDuration),a.add(c,
0))};DvtDCChartLineArea.prototype._removeDeletedAreas=function(){var a=this._chart.__getAreaContainer();a&&a.removeChild(this._deletedAreas)};DvtDCChartLineArea.prototype._getAnimationParams=function(a){return this._shape.getAnimationParams(a)};DvtDCChartLineArea.prototype._setAnimationParams=function(a){this._shape.setAnimationParams(a)};DvtDCChartLineArea.prototype._getBaseAnimationParams=function(a){return this._shape.getBaseAnimationParams(a)};
DvtDCChartLineArea.prototype._setBaseAnimationParams=function(a){this._shape.setBaseAnimationParams(a)};DvtDCChartLineArea.prototype._onAnimationEnd=function(){this._shape.removeIndicators();this._shape.setCoords(this._coords,this._baseCoords)};DvtDCChartLineArea._matchGroupIndices=function(a,b){for(var c=3;c<a.length;c+=4)a[c]=b[c]};
DvtDCChartLineArea.prototype.Init=function(a,b){DvtDCChartLineArea.superclass.Init.call(this,a,b);this._context=this._shape.getCtx();this._chart=this._peer.getChart();this._animId+="/"+(this._shape.isArea()?"area":"line")};var DvtDCChartMarker=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCChartMarker,DvtDCChartAbstract,"DvtDCChartMarker");
DvtDCChartMarker.prototype.animateUpdate=function(a,b){var c=b._shape.getCenterDimensions(),d=this._shape.getCenterDimensions();if(!d.equals(c)){this._shape.setCenterDimensions(c);var e=new DvtCustomAnimation(this._shape.getCtx(),this,this._updateDuration);e.getAnimator().addProp(DvtAnimator.TYPE_RECTANGLE,this._shape,this._shape.getCenterDimensions,this._shape.setCenterDimensions,d);var g=this._peer.getChart();this.isValueChange(b)&&"none"!=DvtChartStyleUtils.getAnimationIndicators(g)&&DvtChartTypeUtils.isScatterBubble(g)&&
(g=b._shape,g.setSolidFill("#FFFF2B",.9),g.setCenterDimensions(c),this._peer.getChart().getPlotArea().addChild(g),e.getAnimator().addProp(DvtAnimator.TYPE_RECTANGLE,g,g.getCenterDimensions,g.setCenterDimensions,d),e.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,g,g.getAlpha,g.setAlpha,0),this._overlay=g,e.setOnEnd(this._onEndAnimation,this));a.add(e,1)}};
DvtDCChartMarker.prototype.animateInsert=function(a){this._shape.setAlpha(0);var b=new DvtAnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);a.add(b,2)};DvtDCChartMarker.prototype.animateDelete=function(a,b){b.addChild(this._shape);var c=new DvtAnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);a.add(c,0)};
DvtDCChartMarker.prototype.isValueChange=function(a){var b=!1;if(a){var b=a._peer.getSeriesIndex(),c=a._peer.getGroupIndex(),d=this._peer.getSeriesIndex(),e=this._peer.getGroupIndex();a=a._oldChart.getOptions();var g=this._peer.getChart().getOptions(),h=a.series[b].items[c].y,k=a.series[b].items[c].z,m=g.series[d].items[e].y,n=g.series[d].items[e].z,b=g.series[d].items[e].x!==a.series[b].items[c].x||m!==h||n!==k}return b};
DvtDCChartMarker.prototype._onEndAnimation=function(){this._overlay&&(this._peer.getChart().getPlotArea().removeChild(this._overlay),this._overlay=null)};DvtDCChartMarker.prototype.Init=function(a,b){DvtDCChartMarker.superclass.Init.call(this,a,b);this._animId+="/marker"};var DvtDCChartRangeMarker=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCChartRangeMarker,DvtDCChartAbstract,"DvtDCChartRangeMarker");
DvtDCChartRangeMarker.prototype.Init=function(a,b){DvtDCChartRangeMarker.superclass.Init.call(this,a,b);this._animId+="/rangeMarker"};DvtDCChartRangeMarker.prototype.animateInsert=function(a){this._shape.setAlpha(0);var b=new DvtAnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);a.add(b,2)};DvtDCChartRangeMarker.prototype.animateDelete=function(a,b){b.addChild(this._shape);var c=new DvtAnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);a.add(c,0)};
DvtDCChartRangeMarker.prototype.animateUpdate=function(a,b){var c=b._shape.getAnimationParams(),d=this._shape.getAnimationParams();this._shape.setAnimationParams(c);c=new DvtCustomAnimation(this._shape.getCtx(),this,this._updateDuration);c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this._shape,this._shape.getAnimationParams,this._shape.setAnimationParams,d);a.add(c,1)};var DvtDCChartUtils={};DvtObj.createSubclass(DvtDCChartUtils,DvtObj,"DvtDCChartUtils");DvtDCChartUtils.DIR_UP=0;
DvtDCChartUtils.DIR_DOWN=1;DvtDCChartUtils.DIR_NOCHANGE=2;DvtDCChartUtils.makeIndicator=function(a,b,c,d,e,g){if(DvtChartTypeUtils.isPolar(d))return null;a=DvtDCChartUtils.getDirection(a,b,c,d,e,g);if(a==DvtDCChartUtils.DIR_NOCHANGE)return null;b=(a=a===DvtDCChartUtils.DIR_DOWN)?DvtChartStyleUtils.getAnimationDownColor(d):DvtChartStyleUtils.getAnimationUpColor(d);a=DvtDCChartUtils._drawIndicator(d.getCtx(),a,DvtChartTypeUtils.isHorizontal(d),b);d.getPlotArea().addChild(a);return a};
DvtDCChartUtils.getDirection=function(a,b,c,d,e,g){a=DvtChartDataUtils.getValue(a,b,c);d=DvtChartDataUtils.getValue(d,e,g);return null==d||null==a||d==a?DvtDCChartUtils.DIR_NOCHANGE:d>a?DvtDCChartUtils.DIR_UP:DvtDCChartUtils.DIR_DOWN};DvtDCChartUtils._drawIndicator=function(a,b,c,d){b=c?(DvtAgent.isRightToLeft(a)?!b:b)?"M3.5,-5L3.5,5L-3.5,0L3.5,-5":"M-3.5,-5L-3.5,5L3.5,0L-3.5,-5":b?"M-5,-3.5L5,-3.5L0,3.5L-5,-3.5Z":"M-5,3.5L5,3.5L0,-3.5L-5,3.5Z";a=new DvtPath(a,b);a.setSolidFill(d);return a};
var DvtDCFunnelSlice=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCFunnelSlice,DvtDCChartAbstract,"DvtDCFunnelSlice");
DvtDCFunnelSlice.prototype.animateUpdate=function(a,b){var c=this._shape,d=b._shape.getAnimationParams(),e=c.getAnimationParams(),g=b._shape.getFill().clone(),h=this._shape.getFill();DvtArrayUtils.equals(d,e)&&g.equals(h)||(c.setAnimationParams(d),this._shape.setFill(g),d=new DvtCustomAnimation(c.getCtx(),this,this._updateDuration),d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,c,c.getAnimationParams,c.setAnimationParams,e),d.getAnimator().addProp(DvtAnimator.TYPE_FILL,this._shape,this._shape.getFill,
this._shape.setFill,h),this._indicator&&d.setOnEnd(this._onEndAnimation,this),a.add(d,1))};DvtDCFunnelSlice.prototype.animateInsert=function(a){var b=this._shape,c=b.getAnimationParams(),d=c.slice(0);d[0]+=d[1]/2;d[1]=0;d[3]=0;b.setAnimationParams(d);d=new DvtCustomAnimation(b.getCtx(),this,this._insertDuration);d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getAnimationParams,b.setAnimationParams,c);a.add(d,2)};
DvtDCFunnelSlice.prototype.animateDelete=function(a,b){var c=this._shape;b.addChild(c);var d=c.getAnimationParams(),e=d.slice(0);e[0]+=d[1]/2;e[1]=0;e[3]=0;d=new DvtCustomAnimation(c.getCtx(),this,this._deleteDuration);d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,c,c.getAnimationParams,c.setAnimationParams,e);a.add(d,0)};DvtDCFunnelSlice.prototype.Init=function(a,b){DvtDCFunnelSlice.superclass.Init.call(this,a,b);this._animId+="/funnel"};var DvtChartAxisUtils={};
DvtObj.createSubclass(DvtChartAxisUtils,DvtObj,"DvtChartAxisUtils");DvtChartAxisUtils.getXAxisPosition=function(a){return DvtChartTypeUtils.isPolar(a)?"tangential":DvtChartTypeUtils.isHorizontal(a)?DvtAgent.isRightToLeft(a.getCtx())?"right":"left":"bottom"};DvtChartAxisUtils.getBaselineScaling=function(a,b){var c=b+"Axis",c=a.getOptions()[c].baselineScaling;return!c||"zero"!=c&&"min"!=c?DvtChartTypeUtils.isStock(a)?"min":"zero":c};
DvtChartAxisUtils.getYAxisPosition=function(a){var b=a.getOptions().yAxis.position;if(DvtChartTypeUtils.isPolar(a))return"radial";if(DvtChartTypeUtils.isHorizontal(a))return!b||"top"!=b&&"bottom"!=b?"bottom":b;DvtChartTypeUtils.isStock(a)&&(b=b?b:"end");return DvtAgent.isRightToLeft(a.getCtx())?b&&"end"==b?"left":"right":b&&"end"==b?"right":"left"};
DvtChartAxisUtils.getY2AxisPosition=function(a){var b=a.getOptions().y2Axis.position;return DvtChartTypeUtils.isHorizontal(a)?!b||"top"!=b&&"bottom"!=b?"top":b:DvtAgent.isRightToLeft(a.getCtx())?b&&"start"==b?"right":"left":b&&"start"==b?"left":"right"};DvtChartAxisUtils.hasTimeAxis=function(a){return DvtChartTypeUtils.isBLAC(a)&&"disabled"!=DvtChartAxisUtils.getTimeAxisType(a)};DvtChartAxisUtils.hasGroupAxis=function(a){return DvtChartTypeUtils.isBLAC(a)&&"disabled"==DvtChartAxisUtils.getTimeAxisType(a)};
DvtChartAxisUtils.getTimeAxisType=function(a){var b=a.getOptions().timeAxisType;return b&&"auto"!=b&&DvtChartTypeUtils.isBLAC(a)&&!DvtChartTypeUtils.isPolar(a)?b:DvtChartTypeUtils.isStock(a)?"skipGaps":"disabled"};DvtChartAxisUtils.isMixedFrequency=function(a){return"mixedFrequency"==DvtChartAxisUtils.getTimeAxisType(a)};
DvtChartAxisUtils.getAxisOffset=function(a){var b=a.getFromCache("axisOffset");if(null!=b)return b;b=a.getOptions().styleDefaults.groupSeparators;DvtChartAxisUtils.hasGroupAxis(a)&&1<DvtChartDataUtils.getNumLevels(a)&&"on"==b.rendered?b=.5:DvtChartTypeUtils.hasBarSeries(a)||DvtChartTypeUtils.hasCenteredSeries(a)||DvtChartTypeUtils.hasCandlestickSeries(a)||DvtChartTypeUtils.isBLAC(a)&&1==DvtChartDataUtils.getGroupCount(a)?b=.5:!DvtChartDefaults.isPostAltaSkin(a)||DvtChartTypeUtils.isSpark(a)||DvtChartEventUtils.isScrollable(a)||
DvtChartTypeUtils.isOverview(a)?b=0:(b=DvtChartTypeUtils.isHorizontal(a)?.2:.5,b-=b/Math.sqrt(DvtChartDataUtils.getGroupCount(a)));a.putToCache("axisOffset",b);return b};DvtChartAxisUtils.isGridShifted=function(a){if(!DvtChartTypeUtils.isBLAC(a))return!1;for(var b=DvtChartDataUtils.getSeriesCount(a),c=0;c<b;c++)if(DvtChartStyleUtils.isSeriesRendered(a,c)){var d=DvtChartStyleUtils.getSeriesType(a,c),e=DvtChartStyleUtils.getLineType(a,c);if("bar"!=d&&"centeredSegmented"!=e&&"centeredStepped"!=e)return!1}return!0};
DvtChartAxisUtils.isGridPolygonal=function(a){return!DvtChartTypeUtils.isBLAC(a)||DvtChartTypeUtils.hasBarSeries(a)?!1:"polygon"==a.getOptions().polarGridShape};DvtChartAxisUtils.isAxisRendered=function(a,b){if("y"==b&&DvtChartTypeUtils.hasY2DataOnly(a)||"y2"==b&&!DvtChartTypeUtils.hasY2Data(a))return!1;var c=a.getOptions()[b+"Axis"];return"off"==c.rendered||"off"==c.tickLabel.rendered&&!c.title?!1:!0};
DvtChartAxisUtils.isAxisLineRendered=function(a,b){var c=a.getOptions()[b+"Axis"];return"off"==c.rendered||"off"==c.axisLine.rendered?!1:"auto"==c.axisLine.rendered&&"x"!=b&&DvtChartTypeUtils.isBLAC(a)&&!DvtChartTypeUtils.isPolar(a)?!1:!0};DvtChartAxisUtils.isMajorTickRendered=function(a,b){var c=a.getOptions()[b+"Axis"];return"off"==c.rendered||"off"==c.majorTick.rendered?!1:"auto"==c.majorTick.rendered&&"x"==b&&DvtChartTypeUtils.isBLAC(a)&&!DvtChartTypeUtils.isPolar(a)?!1:!0};
DvtChartAxisUtils.isMinorTickRendered=function(a,b){var c=a.getOptions()[b+"Axis"];return"off"==c.rendered||"off"==c.minorTick.rendered?!1:"on"==c.minorTick.rendered?!0:DvtChartAxisUtils.isLog(a,b)};DvtChartAxisUtils.isLog=function(a,b){var c=a.getOptions()[b+"Axis"],d=DvtChartDataUtils.getMinMaxValue(a,b,!0);return"log"==c.scale&&0<d.min&&0<d.max};
DvtChartAxisUtils.getTickLabelFontSize=function(a,b){var c=a.getOptions(),d=c[b+"Axis"].tickLabel.style;d instanceof DvtCSSStyle||(d=new DvtCSSStyle(d));d.mergeUnder(DvtAxis.getDefaults(c.skin).tickLabel.style);return DvtTextUtils.getTextStringHeight(a.getCtx(),d)*(11/14)};
DvtChartAxisUtils.getTickLabelGapSize=function(a,b){if(DvtChartAxisUtils.isTickLabelInside(a,b))return 0;var c=a.getOptions(),d=DvtChartTypeUtils.isHorizontal(a),e=DvtChartAxisUtils.getGapScalingFactor(a,b),g=Math.ceil(c.layout.tickLabelGapWidth*e),c=Math.ceil(c.layout.tickLabelGapHeight*e);return"x"==b?d?g:c:d?c:g};DvtChartAxisUtils.getGapScalingFactor=function(a,b){return DvtChartAxisUtils.isAxisRendered(a,b)?DvtChartAxisUtils.getTickLabelFontSize(a,b)/11:0};
DvtChartAxisUtils.isTickLabelInside=function(a,b){return DvtChartTypeUtils.isPolar(a)||DvtChartTypeUtils.isScatterBubble(a)||DvtChartTypeUtils.isBLAC(a)&&"x"==b?!1:"inside"==a.getOptions()[b+"Axis"].tickLabel.position};
DvtChartAxisUtils.getXAxisViewportMinMax=function(a,b){var c=a.getOptions().xAxis,d=DvtChartAxisUtils.hasGroupAxis(a),e=DvtChartAxisUtils.getAxisOffset(a);if(b)var g=DvtChartAxisUtils.getXAxisGlobalMinMax(a);var h=null;null!=c.viewportMin?h=c.viewportMin:null!=c.viewportStartGroup?h=d?DvtChartDataUtils.getGroupIndex(a,c.viewportStartGroup)-e:c.viewportStartGroup:b&&(h=g.min);var k=null;null!=c.viewportMax?k=c.viewportMax:null!=c.viewportEndGroup?k=d?DvtChartDataUtils.getGroupIndex(a,c.viewportEndGroup)+
e:c.viewportEndGroup:b&&(k=g.max);return{min:h,max:k}};DvtChartAxisUtils.getXAxisGlobalMinMax=function(a){var b=a.getOptions().xAxis,c=DvtChartAxisUtils.hasGroupAxis(a),d=DvtChartAxisUtils.getAxisOffset(a);if(!c)var e=DvtChartDataUtils.getMinMaxValue(a,"x");var g=null,g=null!=b.min?b.min:c?0-d:e.min,h=null,h=null!=b.max?b.max:c?DvtChartDataUtils.getGroupCount(a)-1+d:e.max;return{min:g,max:h}};
DvtChartAxisUtils.applyInitialZooming=function(a,b){var c=a.getOptions(),d=c.xAxis,e=c.initialZooming;if(DvtChartTypeUtils.isBLAC(a)&&"off"!=c.zoomAndScroll&&"none"!=e){c._initialZoomed&&("last"==e?d.viewportMin=null:d.viewportMax=null);var g=DvtChartAxisUtils.getXAxisViewportMinMax(a,!1),h=g.min,g=g.max;if(!("last"==e&&null!=h||"first"==e&&null!=g)){var e=DvtChartTypeUtils.isHorizontal(a)?b.h:b.w,k=Math.floor(e/(2.5*DvtChartAxisUtils.getTickLabelFontSize(a,"x")))+DvtChartAxisUtils.getAxisOffset(a),
m=DvtChartDataUtils.getGroupCount(a)-1;if(!(m<=k)){var n;DvtChartAxisUtils.hasGroupAxis(a)?(e=0,n=m):(n=DvtChartDataUtils.getMinMaxValue(a,"x"),e=n.min,n=n.max);k=k/m*(n-e);"last"==c.initialZooming?(null==g&&(g=n),d.viewportMin=Math.max(g-k,e)):(null==h&&(h=e),d.viewportMax=Math.min(h+k,n));c._initialZoomed=!0}}}};
DvtChartAxisUtils.getGroupWidthRatios=function(a){if(!DvtChartTypeUtils.hasBarSeries(a)&&!DvtChartTypeUtils.hasCandlestickSeries(a))return null;var b=a.getOptions(),c=DvtChartStyleUtils.getBarGapRatio(a);if(1<=c)return b._averageGroupZ=Infinity,null;b._averageGroupZ=0;for(var d=DvtChartDataUtils.getGroupCount(a),e=DvtChartTypeUtils.isSplitDualY(a),g=DvtChartDataUtils.getStackCategories(a,"bar"),h=[],k,m,n,t=0;t<d;t++){for(n=k=0;n<g.y.length;n++)k+=DvtChartDataUtils.getBarCategoryZ(a,g.y[n],t,!1);
for(n=m=0;n<g.y2.length;n++)m+=DvtChartDataUtils.getBarCategoryZ(a,g.y2[n],t,!0);h.push(e?Math.max(k,m):k+m)}a=h.reduce(function(a,b){return a+b});var u=a*c/(1-c),c=h.map(function(a){return a+u/d});b._averageGroupZ=(a+u)/d;return c};var DvtChartDataUtils={};DvtObj.createSubclass(DvtChartDataUtils,DvtObj,"DvtChartDataUtils");
DvtChartDataUtils.hasData=function(a){var b=a.getOptions();if(!b||!b.series||1>b.series.length)return!1;for(var b=DvtChartDataUtils.getSeriesCount(a),c=0;c<b;c++){var d=DvtChartDataUtils.getSeriesItem(a,c);if(d&&d.items&&1<=d.items.length)return!0}return!1};DvtChartDataUtils.hasInvalidData=function(a){return!DvtChartDataUtils.hasData(a)||DvtChartDataUtils.hasInvalidTimeData(a)};
DvtChartDataUtils.hasInvalidTimeData=function(a){if(DvtChartTypeUtils.isFunnel(a)||DvtChartTypeUtils.isPie(a))return!1;var b=a.getOptions(),c=DvtChartDataUtils.getGroupCount(a);if(!b||!b.series||1>b.series.length||1>c)return!0;var d,e=DvtChartDataUtils.getSeriesCount(a);if(DvtChartAxisUtils.isMixedFrequency(a))for(d=0;d<e;d++)for(b=0;b<c;b++){var g=DvtChartDataUtils.getDataItem(a,d,b);if(g&&(null==g.x||isNaN(g.x)))return!0}else if(DvtChartAxisUtils.hasTimeAxis(a))for(b=0;b<c;b++)if(d=DvtChartDataUtils.getGroup(a,
b),null==d||isNaN(d))return!0;return!1};DvtChartDataUtils.hasSeriesData=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b).items;if(c)for(var d=0;d<c.length;d++)if(null!=c[d])return!0;return!1};
DvtChartDataUtils.processDataObject=function(a){if(DvtChartDataUtils.hasData(a)){var b=a.getOptions();DvtChartTypeUtils.isValidType(a)||(b.type="bar");var c=DvtChartTypeUtils.isStock(a);c&&(b._hasVolume=!1,1<DvtChartDataUtils.getSeriesCount(a)&&(b.series=b.series.slice(0,1)));for(var d=0,e=a.getSeriesStyleArray(),g=DvtChartDataUtils.getSeriesCount(a),h=0;h<g;h++){var k=DvtChartDataUtils.getSeries(a,h);null!=k&&0>DvtArrayUtils.getIndex(e,k)&&e.push(k);var m=DvtChartDataUtils.getSeriesItem(a,h);m&&
m.items&&m.items.length>d&&(d=m.items.length);if("hidden"==m.visibility){var n=DvtChartStyleUtils.getHiddenCategories(a);0>DvtArrayUtils.getIndex(n,k)&&n.push(k)}m.visibility=null;if(m&&m.items)for(n=m.items,k=0;k<n.length;k++)n[k]&&(!isNaN(n[k])&&n[k]?n[k]=Number(n[k]):(!DvtChartAxisUtils.isMixedFrequency(a)&&n[k].x&&(n[k].x=Number(n[k].x)),n[k].y&&(n[k].y=Number(n[k].y)),n[k].z&&(n[k].z=Number(n[k].z)),n[k].value&&(n[k].value=Number(n[k].value)),n[k].targetValue&&(n[k].targetValue=Number(n[k].targetValue)),
n[k].open&&(n[k].open=Number(n[k].open)),n[k].close&&(n[k].close=Number(n[k].close)),n[k].low&&(n[k].low=Number(n[k].low)),n[k].high&&(n[k].high=Number(n[k].high)),n[k].volume&&(n[k].volume=Number(n[k].volume),b._hasVolume=!0)))}if(c&&DvtChartDataUtils.hasVolumeSeries(a)&&!DvtChartTypeUtils.isOverview(a)){h=DvtJSONUtils.clone(DvtChartDataUtils.getSeriesItem(a,0));h.assignedToY2="on";h.type="bar";h.categories=m.categories||[DvtChartDataUtils.getSeries(a,0)];h.id="_volume";h._selectable="off";h.items=
[];for(k=0;k<m.items.length;k++)c={},c.color=DvtChartStyleUtils.getStockVolumeColor(a,0,k),c.x=m.items[k].x,c.value=m.items[k].volume,h.items.push(c);b.series.push(h)}b=DvtChartRefObjUtils.getRefObjs(a);for(h=0;h<b.length;h++)if(n=b[h].items)for(k=0;k<n.length;k++)if(m=n[k])isNaN(m)?(!DvtChartAxisUtils.isMixedFrequency(a)&&m.x&&(m.x=Number(m.x)),m.max&&(m.max=Number(m.max)),m.min&&(m.min=Number(m.min)),m.value&&(m.value=Number(m.value))):n[k]=Number(m);b=a.getOptions();b.groups||(b.groups=[]);k=DvtChartDataUtils.getGroupCount(a);
for(h=0;h<d-k;h++)m=DvtBundle.getTranslation(b,"labelDefaultGroupName",DvtBundle.CHART_PREFIX,"DEFAULT_GROUP_NAME",b.groups.length+1),b.groups.push(m);a.putToCache("groupsArray",null);DvtChartDataUtils._processTimeAxis(a);m=b.sorting;m="on"==m?"descending":"ascending"!=m&&"descending"!=m?"off":m;if(DvtChartTypeUtils.isBLAC(a)&&DvtChartAxisUtils.hasGroupAxis(a)&&"off"!=m&&1==DvtChartDataUtils.getNumLevels(a)){for(var d=DvtChartDataUtils.getGroups(a),t={},k=0;k<d.length;k++){for(h=c=0;h<=g;h++)DvtChartStyleUtils.isSeriesRendered(a,
h)&&!DvtChartDataUtils.isAssignedToY2(a,h)&&(e=DvtChartDataUtils.getValue(a,h,k),c+=null==e||isNaN(e)?0:e);t[d[k]]={index:k,total:c,group:b.groups[k]}}"ascending"==m?d.sort(function(a,b){return t[a].total-t[b].total}):d.sort(function(a,b){return t[b].total-t[a].total});for(h=0;h<g;h++){m=[];for(k=0;k<d.length;k++)m.push(DvtChartDataUtils.getDataItem(a,h,t[d[k]].index));b.series[h].items=m}g=[];for(k=0;k<d.length;k++)g.push(t[d[k]].group);b.groups=g;a.clearCache()}DvtChartDataUtils._sanitizeAxis(b.xAxis);
DvtChartDataUtils._sanitizeAxis(b.yAxis);DvtChartDataUtils._sanitizeAxis(b.y2Axis)}};DvtChartDataUtils._sanitizeAxis=function(a){a.min==a.max&&(a.min=null,a.max=null)};DvtChartDataUtils._sanitizeDateTime=function(a,b){var c=null,d=a.getLocaleHelpers.isoToDateConverter;if(d){try{c=d(b)}catch(e){c=null}null!=c&&(c=c.getTime())}null==c&&(c=Date.parse(b));isNaN(c)&&(c=Number(b));return c};
DvtChartDataUtils._processTimeAxis=function(a){var b=a.getCtx(),c=a.getOptions(),d,e,g=DvtChartDataUtils.getSeriesCount(a),h=DvtChartDataUtils.getGroupCount(a);if(DvtChartAxisUtils.isMixedFrequency(a))for(d=0;d<g;d++)for(e=0;e<h;e++){var k=DvtChartDataUtils.getDataItem(a,d,e);null!=k&&"string"==typeof k.x&&null!=k.x&&(k.x=DvtChartDataUtils._sanitizeDateTime(b,k.x))}else if(DvtChartAxisUtils.hasTimeAxis(a)){for(e=0;e<h;e++)d=DvtChartDataUtils.getGroup(a,e),null!=d&&(c.groups[e]=DvtChartDataUtils._sanitizeDateTime(b,
d));a.putToCache("groupsArray",null)}if(DvtChartAxisUtils.hasTimeAxis(a))for(c=c.xAxis,null!=c.dataMin&&(c.dataMin=DvtChartDataUtils._sanitizeDateTime(b,c.dataMin)),null!=c.dataMax&&(c.dataMax=DvtChartDataUtils._sanitizeDateTime(b,c.dataMax)),null!=c.min&&(c.min=DvtChartDataUtils._sanitizeDateTime(b,c.min)),null!=c.max&&(c.max=DvtChartDataUtils._sanitizeDateTime(b,c.max)),null!=c.viewportMin&&(c.viewportMin=DvtChartDataUtils._sanitizeDateTime(b,c.viewportMin)),null!=c.viewportMax&&(c.viewportMax=
DvtChartDataUtils._sanitizeDateTime(b,c.viewportMax)),null!=c.viewportStartGroup&&(c.viewportStartGroup=DvtChartDataUtils._sanitizeDateTime(b,c.viewportStartGroup)),null!=c.viewportEndGroup&&(c.viewportEndGroup=DvtChartDataUtils._sanitizeDateTime(b,c.viewportEndGroup)),a=DvtChartRefObjUtils.getRefObjs(a),c=0;c<a.length;c++)if(e=a[c].items)for(h=0;h<e.length;h++)null!=e[h].x&&(e[h].x=DvtChartDataUtils._sanitizeDateTime(b,e[h].x))};DvtChartDataUtils.getSeriesCount=function(a){return a.getOptions().series.length};
DvtChartDataUtils.getY2SeriesCount=function(a,b,c){for(var d=0,e=DvtChartDataUtils.getSeriesCount(a),g=0;g<e;g++)b&&DvtChartStyleUtils.getSeriesType(a,g)!=b||(c||DvtChartStyleUtils.isSeriesRendered(a,g))&&DvtChartDataUtils.isAssignedToY2(a,g)&&d++;return d};DvtChartDataUtils.getSeries=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c?c.id?c.id:c.name||""==c.name?c.name:String(b):null};
DvtChartDataUtils.getSeriesLabel=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&(c.name||""==c.name)?c.name:null};DvtChartDataUtils.getSeriesIndex=function(a,b){for(var c=DvtChartDataUtils.getSeriesCount(a),d=0;d<c;d++)if(DvtChartDataUtils.getSeries(a,d)==b)return d;return-1};DvtChartDataUtils.getSeriesStyleIndex=function(a,b){if(b){var c=a.getSeriesStyleArray();return DvtArrayUtils.getIndex(c,b)}return DvtChartDataUtils.getSeriesIndex(a,b)};
DvtChartDataUtils.getSeriesItem=function(a,b){if(isNaN(b)||null==b)return null;var c=a.getOptions();if(c.series&&c.series.length>b)return c.series[b]};DvtChartDataUtils.getDataItem=function(a,b,c){return isNaN(c)||null==c||0>c?null:(a=DvtChartDataUtils.getSeriesItem(a,b))&&a.items&&a.items.length>c?a.items[c]:null};DvtChartDataUtils.getGroupCount=function(a){return DvtChartDataUtils._getGroupsArray(a).length};
DvtChartDataUtils.getGroup=function(a,b){if(0<=b&&b<DvtChartDataUtils.getGroupCount(a)){var c=DvtChartDataUtils._getGroupsArray(a)[b];if(c)return c.id?c.id:c.name||""==c.name?c.name:c}return null};DvtChartDataUtils.getGroupIndex=function(a,b){for(var c=DvtChartDataUtils.getGroups(a),d=0;d<c.length;d++)if(b instanceof Array&&c[d]instanceof Array?DvtArrayUtils.equals(b,c[d]):b==c[d])return d;return-1};
DvtChartDataUtils.getGroupLabel=function(a,b){if(0<=b&&b<DvtChartDataUtils.getGroupCount(a)){var c=DvtChartDataUtils._getGroupsArray(a)[b];if(c)return c.name?c.name:null!=c.id?"":c}return null};DvtChartDataUtils.getGroups=function(a){for(var b=DvtChartDataUtils.getGroupCount(a),c=[],d=0;d<b;d++)c.push(DvtChartDataUtils.getGroup(a,d));return c};
DvtChartDataUtils._getGroupsArray=function(a){var b=a.getOptions(),c=a.getFromCache("groupsArray");if(!c){c=[];b.groups&&(c=DvtChartDataUtils._getNestedGroups(b.groups,c));for(b=0;b<c.length;b++)1==c[b].id.length&&(c[b].id=c[b].id[0],c[b].name=c[b].name[0]);a.putToCache("groupsArray",c)}return c};
DvtChartDataUtils._getNestedGroups=function(a,b){if(a){for(var c=0;c<a.length;c++){var d=a[c],e=d.id?d.id:d.name?d.name:d,g=d.name?d.name:d;"object"==typeof e&&(e=null);"object"==typeof g&&(g=null);if(d.groups){(d=DvtChartDataUtils._getNestedGroups(d.groups,[]))||(d=[{id:[],name:[]}]);for(var h=0;h<d.length;h++)d[h].id.unshift(e),d[h].name.unshift(g);b=b.concat(d)}else b.push({id:[e],name:[g]})}return b}};
DvtChartDataUtils.getNumLevels=function(a){a=DvtChartDataUtils._getGroupsArray(a);for(var b=0,c=0;c<a.length;c++){var d=a[c];d&&d.id&&(d=DvtArrayUtils.isArray(d.id)?d.id.length:1,b=Math.max(b,d))}return b};
DvtChartDataUtils.getValue=function(a,b,c){var d=a.getFromCachedMap2D("value",b,c);if(void 0!==d)return d;var d=null,e=DvtChartDataUtils.getDataItem(a,b,c);null!=e&&(isNaN(e)?DvtChartTypeUtils.isStock(a)&&null!=e.close?d=e.close:null!=e.value?d=e.value:null!=e.y&&(d=e.y):d=e);a.putToCachedMap2D("value",b,c,d);return d};
DvtChartDataUtils.getCumulativeValue=function(a,b,c,d){var e=d?"cumValueH":"cumValue",g=a.getFromCachedMap2D(e,b,c);if(void 0!==g)return g;if(DvtChartTypeUtils.isStacked(a))for(var h=DvtChartStyleUtils.getSeriesType(a,b),k=DvtChartDataUtils.isAssignedToY2(a,b),g=DvtChartDataUtils.getValue(a,b,c),m="bar"==h?0>g:DvtChartDataUtils.isSeriesNegative(a,b),g=0,n=DvtChartDataUtils.getStackCategory(a,b),t=0;t<=b;t++){if((d||DvtChartStyleUtils.isDataItemRendered(a,t,c))&&h==DvtChartStyleUtils.getSeriesType(a,
t)&&k==DvtChartDataUtils.isAssignedToY2(a,t)&&DvtChartDataUtils.getStackCategory(a,t)==n){var u=DvtChartDataUtils.getValue(a,t,c),v="bar"==h?0>u:DvtChartDataUtils.isSeriesNegative(a,t);if(m&&v||!m&&!v)g+=null==u||isNaN(u)?0:u}}else g=DvtChartDataUtils.getValue(a,b,c);a.putToCachedMap2D(e,b,c,g);return g};
DvtChartDataUtils.getLowValue=function(a,b,c){c=DvtChartDataUtils.getDataItem(a,b,c);return null==c?null:"candlestick"==DvtChartStyleUtils.getSeriesType(a,b)?null==c.low&&null!=c.close?null!=c.open?Math.min(c.close,c.open):c.close:c.low:null!=c.low&&null==c.close?c.low:null};
DvtChartDataUtils.getHighValue=function(a,b,c){c=DvtChartDataUtils.getDataItem(a,b,c);return null==c?null:"candlestick"==DvtChartStyleUtils.getSeriesType(a,b)?null==c.high?null!=c.open?Math.max(c.close,c.open):c.close:c.high:null!=c.high&&null==c.close?c.high:null};DvtChartDataUtils.getXValue=function(a,b,c){if(DvtChartAxisUtils.hasGroupAxis(a))return c;b=DvtChartDataUtils.getDataItem(a,b,c);if(null==b)return null;b=b.x;return isNaN(b)?DvtChartDataUtils.getGroupLabel(a,c):b};
DvtChartDataUtils.getTargetValue=function(a,b){var c=DvtChartDataUtils.getDataItem(a,b,0);return isNaN(c)&&null!=c?c.targetValue:null};DvtChartDataUtils.getZValue=function(a,b,c,d){a=DvtChartDataUtils.getDataItem(a,b,c);return isNaN(a)&&null!=a?null!=a.z?a.z:d:d};DvtChartDataUtils.isStockValueRising=function(a,b,c){return(a=DvtChartDataUtils.getDataItem(a,b,c))?a.open<=a.close:!0};
DvtChartDataUtils.isXValInViewport=function(a,b){if(isNaN(b)||null==b)return!1;var c=DvtChartAxisUtils.getXAxisViewportMinMax(a,!0);return!(null!=c.min&&b<c.min)&&!(null!=c.max&&b>c.max)};DvtChartDataUtils.isXInViewport=function(a,b,c){var d=a.getFromCachedMap2D("isXInViewport",b,c);null==d&&(d=DvtChartDataUtils.getXValue(a,b,c),d=DvtChartDataUtils.isXValInViewport(a,d),a.putToCachedMap2D("isXInViewport",b,c,d));return d};
DvtChartDataUtils.isRefObjInViewport=function(a,b,c){var d=DvtChartRefObjUtils.getXValue(a,b,c),e=a.getFromCachedMap2D("isRefObjInViewport",d);null==e&&(e=DvtChartRefObjUtils.getXValue(a,b,c-1),b=DvtChartRefObjUtils.getXValue(a,b,c+1),e=DvtChartDataUtils.isXValInViewport(a,d)||DvtChartDataUtils.isXValInViewport(a,e)||DvtChartDataUtils.isXValInViewport(a,b),a.putToCachedMap2D("isRefObjInViewport",d,e));return e};
DvtChartDataUtils.isBLACItemInViewport=function(a,b,c){return DvtChartStyleUtils.isDataItemRendered(a,b,c)?DvtChartDataUtils.isXInViewport(a,b,c)||DvtChartDataUtils.isXInViewport(a,b,c-1)||DvtChartDataUtils.isXInViewport(a,b,c+1):!1};
DvtChartDataUtils.isMarkerInViewport=function(a,b,c,d){if(!DvtChartStyleUtils.isDataItemRendered(a,b,c))return!1;var e=DvtChartDataUtils.getMarkerPosition(a,b,c,d);a=DvtChartStyleUtils.getMarkerSize(a,b,c);return d&&e&&a?d.intersects(new DvtRectangle(e.x-a/2,e.y-a/2,a,a)):!0};DvtChartDataUtils.getViewportGroupCount=function(a){var b=DvtChartAxisUtils.getXAxisViewportMinMax(a,!0),c=DvtChartAxisUtils.getXAxisGlobalMinMax(a),b=(b.max-b.min)/(c.max-c.min);return isNaN(b)?1:b*DvtChartDataUtils.getGroupCount(a)};
DvtChartDataUtils._computeYAlongLine=function(a,b,c,d,e,g){a&&(c=DvtMath.log10(c),e=DvtMath.log10(e));b=c+(e-c)*(g-b)/(d-b);return a?Math.pow(10,b):b};
DvtChartDataUtils._getViewportEdgeYValues=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b).items;if(!c)return{min:null,max:null};for(var d="withoutRescale"==DvtChartEventUtils.getHideAndShowBehavior(a),e=DvtChartAxisUtils.getXAxisViewportMinMax(a,!0),g=e.min,e=e.max,h=DvtChartAxisUtils.isLog(a,DvtChartDataUtils.isAssignedToY2(a,b)?"y2":"y"),k,m,n,t,u,v,w=0;w<c.length;w++)if(d||DvtChartStyleUtils.isDataItemRendered(a,b,w))k=DvtChartDataUtils.getXValue(a,b,w),m=DvtChartDataUtils.getCumulativeValue(a,
b,w,d),null!=n&&(null!=g&&g>n&&g<k&&(u=DvtChartDataUtils._computeYAlongLine(h,n,t,k,m,g)),null!=e&&e>n&&e<k&&(v=DvtChartDataUtils._computeYAlongLine(h,n,t,k,m,e))),n=k,t=m;return{min:u,max:v}};
DvtChartDataUtils.getMinMaxValue=function(a,b,c){var d=b+(c?"MinMaxDO":"MinMax"),e=a.getFromCache(d);if(e)return e;var e=!c&&"z"!=b&&DvtChartAxisUtils.isLog(a,b),g="y2"==b;g&&(b="y");for(var h="y"==b,k=!c&&h&&DvtChartTypeUtils.isBLAC(a),m="withoutRescale"==DvtChartEventUtils.getHideAndShowBehavior(a)||"x"==b&&DvtChartAxisUtils.hasTimeAxis(a),n=-Infinity,t=Infinity,u=DvtChartDataUtils.getSeriesCount(a),v=0;v<u;v++){var w=DvtChartDataUtils.getSeriesItem(a,v),x=h&&(DvtChartStyleUtils.isRangeSeries(a,
v)||"candlestick"==DvtChartStyleUtils.getSeriesType(a,v));if(m||DvtChartStyleUtils.isSeriesRendered(a,v)){var y=DvtChartDataUtils.isAssignedToY2(a,v);if(!h||g==y){var z=w.items;if(z){for(var A=0;A<z.length;A++)if(m||DvtChartStyleUtils.isDataItemRendered(a,v,A))if("object"!=typeof z[A]&&(z[A]={y:z[A]}),w=z[A],y=null,h?x||(y=DvtChartDataUtils.getCumulativeValue(a,v,A,m)):"x"==b&&DvtChartAxisUtils.hasTimeAxis(a)&&!DvtChartAxisUtils.isMixedFrequency(a)?(y=DvtChartDataUtils.getGroupLabel(a,A),null!=w&&
(w.x=y)):null!=w&&(y=w[b]),!k||DvtChartDataUtils.isXInViewport(a,v,A)){if(!x&&null!=y&&!isNaN(y)){var B=0;DvtChartTypeUtils.isBubble(a)&&!c&&0<w.markerSize&&(h?B=w._yAxisRadius:"x"==b&&(B=w._xAxisRadius));n=Math.max(n,e?y*Math.pow(10,B):y+B);t=Math.min(t,e?y/Math.pow(10,B):y-B)}x&&(w=DvtChartDataUtils.getHighValue(a,v,A),y=DvtChartDataUtils.getLowValue(a,v,A),n=Math.max(n,w,y),t=Math.min(t,w,y))}x=null;"x"==b?x=DvtChartRefObjUtils.getAxisRefObjs(a,"x"):g?x=DvtChartRefObjUtils.getAxisRefObjs(a,"y2"):
h&&(x=DvtChartRefObjUtils.getAxisRefObjs(a,"y"));if(null!=x)for(z=0;z<x.length;z++)if(B=x[z],A=B.items,w="withRescale"==DvtChartEventUtils.getHideAndShowBehavior(a)&&"hidden"==B.visibility,!w)if(A&&!w)for(B=0;B<A.length;B++){if(null!=A[B]&&(!k||DvtChartDataUtils.isRefObjInViewport(a,A,B))){var y=DvtChartRefObjUtils.getLowValue(A[B]),w=DvtChartRefObjUtils.getHighValue(A[B]),D=isNaN(A[B])?A[B].value:A[B];null!=y&&isFinite(y)&&(t=Math.min(t,y),n=Math.max(n,y));null!=w&&isFinite(w)&&(t=Math.min(t,w),
n=Math.max(n,w));null!=D&&isFinite(D)&&(t=Math.min(t,D),n=Math.max(n,D))}}else y=DvtChartRefObjUtils.getLowValue(B),w=DvtChartRefObjUtils.getHighValue(B),D=B.value,null!=y&&isFinite(y)&&(t=Math.min(t,y),n=Math.max(n,y)),null!=w&&isFinite(w)&&(t=Math.min(t,w),n=Math.max(n,w)),null!=D&&isFinite(D)&&(t=Math.min(t,D),n=Math.max(n,D));k&&(w=DvtChartDataUtils._getViewportEdgeYValues(a,v),null!=w.min&&(t=Math.min(t,w.min),n=Math.max(n,w.min)),null!=w.max&&(t=Math.min(t,w.max),n=Math.max(n,w.max)))}}}}e=
{min:t,max:n};a.putToCache(d,e);return e};DvtChartDataUtils.isAssignedToY2=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&"on"==c.assignedToY2&&DvtChartTypeUtils.isDualY(a)?!0:!1};
DvtChartDataUtils.getInitialSelection=function(a){var b=a.getOptions().selection;b||(b=[]);a=a.getChartObjPeers();for(var c=0;c<b.length;c++){var d;"string"==typeof b[c]?(d=b[c],b[c]={id:d}):d=b[c].id;if(!(null==d||b[c].series&&b[c].group))for(var e=0;e<a.length;e++){var g=a[e];if(d==g.getDataItemId()){b[c].series=g.getSeries();b[c].group=g.getGroup();break}}}return b};
DvtChartDataUtils.getCurrentSelection=function(a){var b=[];if(a=a.getSelectionHandler()){a=a.getSelectedIds();for(var c=0;c<a.length;c++){var d=a[c];b.push({series:d.getSeries(),group:d.getGroup(),id:d.getId()})}}return b};DvtChartDataUtils.hasVolumeSeries=function(a){return(a=a.getOptions()._hasVolume)?a:!1};
DvtChartDataUtils.isDataSelected=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c).id;b=DvtChartDataUtils.getSeries(a,b);c=DvtChartDataUtils.getGroup(a,c);(a=a.getOptions().selection)||(a=[]);for(var e=0;e<a.length;e++)if(null!=d&&(d==a[e]||d==a[e].id)||b==a[e].series&&c==a[e].group)return!0;return!1};
DvtChartDataUtils.getDataLabel=function(a,b,c,d){c=DvtChartDataUtils.getDataItem(a,b,c);if(!c)return null;c=c.label;"low"==d?c=c instanceof Array?c[0]:c:"high"==d&&(c=c instanceof Array?c[1]:null);if(null!=c){if("number"==typeof c){var e,g,h;if(b=DvtChartDataUtils.isAssignedToY2(a,b)&&a.y2Axis?a.y2Axis:a.yAxis)h=b.getInfo(),e=h.getGlobalMin(),g=h.getGlobalMax(),h=h.getMajorIncrement();b=DvtChartTooltipUtils.getValueFormat(a,"label");return DvtChartTooltipUtils.formatValue(a.getCtx(),b,c,e,g,h)}return c}return null};
DvtChartDataUtils.getStackCategory=function(a,b){return DvtChartTypeUtils.isStacked(a)?DvtChartDataUtils.getSeriesItem(a,b).stackCategory:DvtChartDataUtils.getSeries(a,b)};
DvtChartDataUtils.getStackCategories=function(a,b,c){for(var d=[],e=[],g=0;g<DvtChartDataUtils.getSeriesCount(a);g++)if(DvtChartStyleUtils.isSeriesRendered(a,g)||c){if(b){var h=DvtChartStyleUtils.getSeriesType(a,g);"candlestick"==h&&(h="bar");if(b!=h)continue}h=DvtChartDataUtils.getStackCategory(a,g);DvtChartDataUtils.isAssignedToY2(a,g)?-1==e.indexOf(h)&&e.push(h):-1==d.indexOf(h)&&d.push(h)}return{y:d,y2:e}};
DvtChartDataUtils.getBarCategoryZ=function(a,b,c,d){for(var e=0,g=0;g<DvtChartDataUtils.getSeriesCount(a);g++)if(("bar"==DvtChartStyleUtils.getSeriesType(a,g)||"candlestick"==DvtChartStyleUtils.getSeriesType(a,g))&&DvtChartDataUtils.getStackCategory(a,g)==b&&DvtChartStyleUtils.isSeriesRendered(a,g)){var h=DvtChartDataUtils.isAssignedToY2(a,g);if(d&&h||!d&&!h)e=Math.max(e,DvtChartDataUtils.getZValue(a,g,c,1))}return e};
DvtChartDataUtils.getBarInfo=function(a,b,c,d){var e=DvtChartTypeUtils.isHorizontal(a),g=DvtChartTypeUtils.isStacked(a),h=DvtAgent.isRightToLeft(a.getCtx()),k=a.xAxis,m=DvtChartStyleUtils.isRangeSeries(a,b),n=DvtChartStyleUtils.getBarCategoryOffsetMap(a,c,g),t=DvtChartDataUtils.getXValue(a,b,c),u=k.getUnboundedCoordAt(t),v=DvtChartDataUtils.isAssignedToY2(a,b),w=v?a.y2Axis:a.yAxis,k=w.getBaselineCoord(),x;if(m){var y=DvtChartDataUtils.getLowValue(a,b,c);x=DvtChartDataUtils.getHighValue(a,b,c);if(null==
y||isNaN(y)||null==x||isNaN(x))return null;t=w.getBoundedCoordAt(y);x=w.getBoundedCoordAt(x)}else{x=DvtChartDataUtils.getValue(a,b,c);y=DvtChartDataUtils.getCumulativeValue(a,b,c);if(null==x||isNaN(x))return null;t=w.getBoundedCoordAt(y);x=g?w.getBoundedCoordAt(y-x):k}if(t==x&&null==w.getCoordAt(y))return null;w=DvtChartDataUtils.getStackCategory(a,b);b=DvtChartStyleUtils.getBarWidth(a,b,c);c=g?DvtChartStyleUtils.getBarStackWidth(a,w,c,v):b;"pixel"==DvtChartStyleUtils.getBarSpacing(a)&&DvtAgent.isPlatformGecko()&&
(g=b/(1-DvtChartStyleUtils.getBarGapRatio(a)),1<b&&2>g-b&&(b--,c=b));n=n[v?"y2":"y"][w]+.5*(c-b);e=h&&!e?u-n-b:u+n;h=e+b;a=DvtPlotAreaRenderer.convertAxisCoord(a,new DvtPoint((e+h)/2,m?(t+x)/2:t),d);return{x1:e,x2:h,axisCoord:k,baseCoord:x,yCoord:t,dataPos:a,barWidth:b}};
DvtChartDataUtils.getMarkerPosition=function(a,b,c,d){var e=a.xAxis,g=DvtChartDataUtils.isAssignedToY2(a,b)?a.y2Axis:a.yAxis,h=DvtChartTypeUtils.isPolar(a),k=DvtChartStyleUtils.isRangeSeries(a,b),m=DvtChartDataUtils.getXValue(a,b,c),n=DvtChartDataUtils.getCumulativeValue(a,b,c);if(DvtChartTypeUtils.isBubble(a)){if(h&&n<g.getInfo().getViewportMin())return null;b=h?e.getCoordAt(m):e.getUnboundedCoordAt(m);c=g.getUnboundedCoordAt(n)}else k?(n=g.getCoordAt(DvtChartDataUtils.getLowValue(a,b,c)),g=g.getCoordAt(DvtChartDataUtils.getHighValue(a,
b,c)),b=e.getCoordAt(DvtChartDataUtils.getXValue(a,b,c)),c=(n+g)/2):(b=e.getCoordAt(m),c=g.getCoordAt(n));return null==b||null==c?null:DvtPlotAreaRenderer.convertAxisCoord(a,new DvtPoint(b,c),d)};DvtChartDataUtils.isSeriesNegative=function(a,b){for(var c=DvtChartDataUtils.getGroupCount(a),d=0;d<c;d++)if(0<DvtChartDataUtils.getValue(a,b,d))return!1;return!0};var DvtChartEventUtils={};DvtObj.createSubclass(DvtChartEventUtils,DvtObj,"DvtChartEventUtils");DvtChartEventUtils.getHideAndShowBehavior=function(a){return a.getOptions().hideAndShowBehavior};
DvtChartEventUtils.getHoverBehavior=function(a){return a.getOptions().hoverBehavior};
DvtChartEventUtils.setVisibility=function(a,b,c){var d=DvtChartRefObjUtils.getRefObj(a,b);if(null!=d)d.visibility=c;else{var d=DvtChartStyleUtils.getHiddenCategories(a),e=DvtArrayUtils.getIndex(d,b);"hidden"==c&&0>e?d.push(b):"visible"==c&&0<=e&&d.splice(e,1);if((a=a.getOptions())&&a.legend&&a.legend.sections)for(d=0;d<a.legend.sections.length;d++)if((e=a.legend.sections[d])&&e.items)for(var g=0;g<e.items.length;g++)e.items[g].id==b&&(e.items[g].categoryVisibility=c)}return!0};
DvtChartEventUtils.isScrollable=function(a){return DvtChartTypeUtils.isScrollSupported(a)?"off"!=a.getOptions().zoomAndScroll:!1};DvtChartEventUtils.isZoomable=function(a){if(!DvtChartTypeUtils.isScrollSupported(a))return!1;a=a.getOptions().zoomAndScroll;return"live"==a||"delayed"==a};DvtChartEventUtils.getZoomDirection=function(a){return DvtChartTypeUtils.isScatterBubble(a)?a.getOptions().zoomDirection:"auto"};
DvtChartEventUtils.isLiveScroll=function(a){if(!DvtChartTypeUtils.isScrollSupported(a))return!1;a=a.getOptions().zoomAndScroll;return"live"==a||"liveScrollOnly"==a};DvtChartEventUtils.isDelayedScroll=function(a){if(!DvtChartTypeUtils.isScrollSupported(a))return!1;a=a.getOptions().zoomAndScroll;return"delayed"==a||"delayedScrollOnly"==a};
DvtChartEventUtils.processIds=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];e.getSeries()==DvtPieChartUtils.OTHER_SLICE_SERIES_ID?(e=DvtPieChartUtils.getOtherSliceIds(a),c=c.concat(e)):c.push(e)}return c};DvtChartEventUtils.adjustBounds=function(a){null!=a.x&&--a.x;null!=a.w&&(a.w+=2);null!=a.y&&--a.y;null!=a.h&&(a.h+=2)};
DvtChartEventUtils.getSelectedObjects=function(a,b,c){if(!a.getFromCache("dataFiltered"))return c.getSelectedIds();c=[];var d=a.getFromCache("dataPositions");if(!d){for(var d=[],e=0;e<DvtChartDataUtils.getSeriesCount(a);e++)for(var g=0;g<DvtChartDataUtils.getGroupCount(a);g++){var h;if(h="bar"==DvtChartStyleUtils.getSeriesType(a,e)?DvtChartDataUtils.getBarInfo(a,e,g).dataPos:DvtChartDataUtils.getMarkerPosition(a,e,g))h=a.getPlotArea().localToStage(h),d.push({seriesIndex:e,groupIndex:g,pos:h})}a.putToCache("dataPositions",
d)}for(e=0;e<d.length;e++)if(h=d[e].pos)g=null==b.y||h.y>=b.y&&h.y<=b.y+b.h,(null==b.x||h.x>=b.x&&h.x<=b.x+b.w)&&g&&c.push(new DvtChartDataItem(null,DvtChartDataUtils.getSeries(a,d[e].seriesIndex),DvtChartDataUtils.getGroup(a,d[e].groupIndex)));return c};
DvtChartEventUtils.getBoundedObjects=function(a,b){for(var c=a.getChartObjPeers(),d=[],e=0;e<c.length;e++){var g=c[e],h=g.getDataPosition();if(h){var h=a.getPlotArea().localToStage(h),k=null==b.y||h.y>=b.y&&h.y<=b.y+b.h;(null==b.x||h.x>=b.x&&h.x<=b.x+b.w)&&k&&d.push(g)}}return d};
DvtChartEventUtils.getAxisBounds=function(a,b,c){var d=a.getPlotArea(),e=d.stageToLocal(new DvtPoint(b.x,b.y)),d=d.stageToLocal(new DvtPoint(b.x+b.w,b.y+b.h));null==b.x&&(e.x=null,d.x=null);null==b.y&&(e.y=null,d.y=null);b=DvtChartEventUtils._convertToAxisCoord(a,e.x,d.x,e.y,d.y);var e={},d={},g={},h={};a.xAxis&&(e=DvtChartEventUtils._getAxisMinMax(a.xAxis,b.xMin,b.xMax,c),h=DvtChartEventUtils.getAxisStartEndGroup(a.xAxis,e.min,e.max));a.yAxis&&(d=DvtChartEventUtils._getAxisMinMax(a.yAxis,b.yMin,
b.yMax,c));a.y2Axis&&(g=DvtChartEventUtils._getAxisMinMax(a.y2Axis,b.yMin,b.yMax,c));return{xMin:e.min,xMax:e.max,yMin:d.min,yMax:d.max,y2Min:g.min,y2Max:g.max,startGroup:h.startGroup,endGroup:h.endGroup}};
DvtChartEventUtils._getAxisMinMax=function(a,b,c,d){if(null==b||null==c)return{min:null,max:null};b=a.getUnboundedLinearValueAt(b);c=a.getUnboundedLinearValueAt(c);return d?(d=a.getInfo().getMinimumExtent(),c-b<d&&(b=(c+b)/2,c=b+d/2,b-=d/2),DvtChartEventUtils._limitToGlobal(a,b,c)):DvtChartEventUtils._getActualMinMax(a,b,c)};
DvtChartEventUtils.getAxisBoundsByDelta=function(a,b,c,d,e){b=DvtChartEventUtils._convertToAxisCoord(a,b,c,d,e);c={};d={};e={};var g={};a.xAxis&&(c=DvtChartEventUtils._getAxisMinMaxByDelta(a.xAxis,b.xMin,b.xMax),g=DvtChartEventUtils.getAxisStartEndGroup(a.xAxis,c.min,c.max));a.yAxis&&(d=DvtChartEventUtils._getAxisMinMaxByDelta(a.yAxis,b.yMin,b.yMax));a.y2Axis&&(e=DvtChartEventUtils._getAxisMinMaxByDelta(a.y2Axis,b.yMin,b.yMax));return{xMin:c.min,xMax:c.max,yMin:d.min,yMax:d.max,y2Min:e.min,y2Max:e.max,
startGroup:g.startGroup,endGroup:g.endGroup}};
DvtChartEventUtils._getAxisMinMaxByDelta=function(a,b,c){var d=a.getLinearViewportMin(),e=a.getLinearViewportMax();if(c==b&&a.isFullViewport())return DvtChartEventUtils._getActualMinMax(a,d,e);var g=a.getUnboundedLinearValueAt(b)-a.getUnboundedLinearValueAt(0),h=a.getUnboundedLinearValueAt(c)-a.getUnboundedLinearValueAt(0),k=1,m=e+h-(d+g),n=a.getInfo().getMinimumExtent();b!=c&&m<n&&(k=(e-d-n)/(g-h));return DvtChartEventUtils._limitToGlobal(a,d+g*k,e+h*k)};
DvtChartEventUtils._convertToAxisCoord=function(a,b,c,d,e){var g={},h=DvtAgent.isRightToLeft(a.getCtx());DvtChartTypeUtils.isHorizontal(a)?(g.xMin=d,g.xMax=e,g.yMin=h?c:b,g.yMax=h?b:c):(g.xMin=h?c:b,g.xMax=h?b:c,g.yMin=e,g.yMax=d);return g};DvtChartEventUtils._limitToGlobal=function(a,b,c){var d=a.getLinearGlobalMin(),e=a.getLinearGlobalMax();c-b>=e-d?(b=d,c=e):b<d?(c+=d-b,b=d):c>e&&(b-=c-e,c=e);return DvtChartEventUtils._getActualMinMax(a,b,c)};
DvtChartEventUtils._getActualMinMax=function(a,b,c){return{min:a.linearToActual(b),max:a.linearToActual(c)}};DvtChartEventUtils.getAxisStartEndGroup=function(a,b,c){return a.isGroupAxis()&&null!=b&&null!=c&&(b=Math.ceil(b),c=Math.floor(c),c>=b)?(b=a.getInfo().getGroup(b),a=a.getInfo().getGroup(c),{startGroup:b,endGroup:a}):{startGroup:null,endGroup:null}};
DvtChartEventUtils.setInitialSelection=function(a,b){var c=a.getSelectionHandler();if(c){for(var d=a.getChartObjPeers(),e=[],g=0;g<b.length;g++)for(var h=0;h<d.length;h++){var k=d[h];k.getSeries()===b[g].series&&k.getGroup()===b[g].group&&e.push(k.getId())}c.processInitialSelections(e,d)}};
DvtChartEventUtils.getKeyboardNavigables=function(a){var b=[];if(DvtChartTypeUtils.isPie(a))for(var c=a.pieChart.__getSlices(),d=0;d<c.length;d++)DvtChartStyleUtils.isSeriesRendered(a,c[d].getSeriesIndex())&&b.push(c[d]);else for(a=a.getChartObjPeers(),d=0;d<a.length;d++)a[d].isNavigable()&&b.push(a[d]);return b};
DvtChartEventUtils.isSeriesDrillable=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b),c=null!=c?c.drilling:"inherit";if("on"==c)return!0;if("off"==c)return!1;c=a.getOptions().drilling;return"on"==c||"seriesOnly"==c};DvtChartEventUtils.isDataItemDrillable=function(a,b,c){b=DvtChartDataUtils.getDataItem(a,b,c);b=null!=b?b.drilling:"inherit";if("on"==b)return!0;if("off"==b)return!1;b=a.getOptions().drilling;return"on"==b};var DvtChartRefObjUtils={};
DvtObj.createSubclass(DvtChartRefObjUtils,DvtObj,"DvtChartRefObjUtils");DvtChartRefObjUtils.getRefObjs=function(a){var b=DvtChartRefObjUtils.getAxisRefObjs(a,"x"),c=DvtChartRefObjUtils.getAxisRefObjs(a,"y");a=DvtChartRefObjUtils.getAxisRefObjs(a,"y2");return b.concat(c,a)};DvtChartRefObjUtils.getAxisRefObjs=function(a,b){var c=a.getOptions();return c&&c[b+"Axis"]&&c[b+"Axis"].referenceObjects?c[b+"Axis"].referenceObjects:[]};DvtChartRefObjUtils.getType=function(a){return"area"==a.type?"area":"line"};
DvtChartRefObjUtils.getLocation=function(a){return"front"==a.location?"front":"back"};DvtChartRefObjUtils.getColor=function(a){return a.color?a.color:"#333333"};DvtChartRefObjUtils.getLineWidth=function(a){return a.lineWidth?a.lineWidth:1};DvtChartRefObjUtils.getLineType=function(a){return a.lineType?a.lineType:"straight"};DvtChartRefObjUtils.isObjectRendered=function(a){return"hidden"!=a.visibility};DvtChartRefObjUtils.getId=function(a){return null!=a.id?a.id:a.text};
DvtChartRefObjUtils.getRefObj=function(a,b){for(var c=DvtChartRefObjUtils.getRefObjs(a),d=0;d<c.length;d++)if(DvtChartRefObjUtils.getId(c[d])==b)return c[d]};DvtChartRefObjUtils.getLowValue=function(a){return null==a?null:null!=a.min?a.min:a.low};DvtChartRefObjUtils.getHighValue=function(a){return null==a?null:null!=a.max?a.max:a.high};
DvtChartRefObjUtils.getXValue=function(a,b,c){return b[c]&&!isNaN(b[c].x)?b[c].x:DvtChartAxisUtils.hasTimeAxis(a)&&!DvtChartAxisUtils.isMixedFrequency(a)?DvtChartDataUtils.getGroupLabel(a,c):c};var DvtChartSeriesEffectUtils={};DvtObj.createSubclass(DvtChartSeriesEffectUtils,DvtObj,"DvtChartSeriesEffectUtils");
DvtChartSeriesEffectUtils.getBarFill=function(a,b,c,d,e){var g=DvtChartStyleUtils.getColor(a,b,c);b=DvtChartStyleUtils.getPattern(a,b,c);c=DvtChartStyleUtils.getSeriesEffect(a);return b?new DvtPatternFill(b,g):"gradient"==c&&3<e?(d=d?270:0,DvtChartSeriesEffectUtils._useAltaGradients(a)?(a=[DvtColorUtils.adjustHSL(g,0,-.09,.04),DvtColorUtils.adjustHSL(g,0,-.04,-.05)],g=[0,1]):(a=[DvtColorUtils.getPastel(g,.15),DvtColorUtils.getPastel(g,.45),DvtColorUtils.getPastel(g,.25),g,DvtColorUtils.getPastel(g,
.15),DvtColorUtils.getDarker(g,.9)],g=[0,.15,.3,.65,.85,1]),new DvtLinearGradientFill(d,a,null,g)):new DvtSolidFill(g)};
DvtChartSeriesEffectUtils.getAreaFill=function(a,b){var c="lineWithArea"==DvtChartStyleUtils.getSeriesType(a,b),d;(d=DvtChartDataUtils.getSeriesItem(a,b))&&d.areaColor?d=d.areaColor:(d=DvtChartStyleUtils.getColor(a,b),c&&(d=DvtColorUtils.setAlpha(d,.2)));var e=DvtChartStyleUtils.getPattern(a,b),g=DvtChartStyleUtils.getSeriesEffect(a);return e?new DvtPatternFill(e,d):"gradient"==g?(e=DvtChartTypeUtils.isHorizontal(a)?180:270,c?(c=DvtColorUtils.getAlpha(d),c=[DvtColorUtils.setAlpha(d,Math.min(c+.2,
1)),DvtColorUtils.setAlpha(d,Math.max(c-.15,0))],d=[0,1]):DvtChartSeriesEffectUtils._useAltaGradients(a)?(c=[DvtColorUtils.adjustHSL(d,0,-.09,.04),DvtColorUtils.adjustHSL(d,0,-.04,-.05)],d=[0,1]):(c=DvtChartTypeUtils.isSpark(a)?[DvtColorUtils.getDarker(d,.5),d,DvtColorUtils.getPastel(d,.5)]:[DvtColorUtils.getPastel(d,.5),d,DvtColorUtils.getDarker(d,.7)],d=[0,.5,1]),new DvtLinearGradientFill(e,c,null,d)):new DvtSolidFill(d)};
DvtChartSeriesEffectUtils.getMarkerFill=function(a,b,c){var d=DvtChartStyleUtils.getMarkerColor(a,b,c),e=DvtChartStyleUtils.getPattern(a,b,c);if(e)return new DvtPatternFill(e,d);if(DvtChartTypeUtils.isBubble(a)&&"gradient"==DvtChartStyleUtils.getSeriesEffect(a)){if(DvtChartSeriesEffectUtils._useAltaGradients(a))return a=[DvtColorUtils.adjustHSL(d,0,-.09,.04),DvtColorUtils.adjustHSL(d,0,-.04,-.05)],new DvtLinearGradientFill(270,a,null,[0,1]);if("human"==DvtChartStyleUtils.getMarkerShape(a,b,c))return a=
[DvtColorUtils.getPastel(d,.2),DvtColorUtils.getPastel(d,.1),d,DvtColorUtils.getDarker(d,.8)],new DvtLinearGradientFill(315,a,null,[0,.3,.7,1]);a=[DvtColorUtils.getPastel(d,.15),d,DvtColorUtils.getDarker(d,.9),DvtColorUtils.getDarker(d,.8)];return new DvtRadialGradientFill(a,null,[0,.5,.75,1])}return new DvtSolidFill(d)};
DvtChartSeriesEffectUtils.getFunnelSliceFill=function(a,b,c,d,e){b=DvtChartStyleUtils.getPattern(a,b,0);var g=DvtChartStyleUtils.getSeriesEffect(a);return b&&!e?(d=new DvtPatternFill(b,c),"vertical"==a.getOptions().orientation&&(DvtAgent.isRightToLeft(a.getCtx())?d.setMatrix(new DvtMatrix(0,-1,1,0)):d.setMatrix(new DvtMatrix(0,1,-1,0))),d):"gradient"==g?("on"==a.getOptions().styleDefaults.threeDEffect?(a=[DvtColorUtils.adjustHSL(c,0,0,-.1),DvtColorUtils.adjustHSL(c,0,0,.12),c],c=[0,.65,1]):(a=[DvtColorUtils.adjustHSL(c,
0,-.09,.04),DvtColorUtils.adjustHSL(c,0,-.04,-.05)],c=[0,1]),new DvtLinearGradientFill(90,a,null,c,[d.x,d.y,d.w,d.h])):new DvtSolidFill(c)};DvtChartSeriesEffectUtils._useAltaGradients=function(a){return!DvtChartDefaults.isSkyrosSkin(a)};var DvtChartStyleUtils={};DvtObj.createSubclass(DvtChartStyleUtils,DvtObj,"DvtChartStyleUtils");DvtChartStyleUtils._SERIES_TYPE_RAMP=["bar","line","area"];
DvtChartStyleUtils.getSeriesType=function(a,b){if(!DvtChartTypeUtils.isBLAC(a))return"auto";var c=DvtChartDataUtils.getSeriesItem(a,b),c=c?c.type:null;DvtChartTypeUtils.isStock(a)||"candlestick"!=c||(c="auto");if(c&&"auto"!=c)return c;if(DvtChartTypeUtils.isBar(a))return"bar";if(DvtChartTypeUtils.isLine(a))return"line";if(DvtChartTypeUtils.isArea(a))return"area";if(DvtChartTypeUtils.isLineWithArea(a))return"lineWithArea";if(DvtChartTypeUtils.isStock(a))return"candlestick";if(DvtChartTypeUtils.isCombo(a))return c=
DvtChartDataUtils.getSeries(a,b),c=DvtChartDataUtils.getSeriesStyleIndex(a,c)%DvtChartStyleUtils._SERIES_TYPE_RAMP.length,DvtChartStyleUtils._SERIES_TYPE_RAMP[c]};
DvtChartStyleUtils.isRangeSeries=function(a,b){var c=a.getFromCachedMap("isRange",b);if(null!=c)return c;var c=!1,d=DvtChartStyleUtils.getSeriesType(a,b);if("bar"==d||"area"==d)for(d=0;d<DvtChartDataUtils.getGroupCount(a);d++)if(null!=DvtChartDataUtils.getLowValue(a,b,d)||null!=DvtChartDataUtils.getHighValue(a,b,d)){c=!0;break}a.putToCachedMap("isRange",b,c);return c};DvtChartStyleUtils.getSeriesEffect=function(a){return a.getOptions().styleDefaults.seriesEffect};
DvtChartStyleUtils.getColor=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c);if(d&&d.color)return d.color;if("candlestick"==DvtChartStyleUtils.getSeriesType(a,b))return DvtChartStyleUtils.getStockItemColor(a,b,c);if((c=DvtChartDataUtils.getSeriesItem(a,b))&&c.color)return c.color;c=a.getOptions();d=c.styleDefaults.colors;b=DvtChartDataUtils.getSeries(a,b);a=DvtChartDataUtils.getSeriesStyleIndex(a,b)%d.length;return c.styleDefaults.colors[a]};
DvtChartStyleUtils.getStockItemColor=function(a,b,c){var d=a.getOptions();return DvtChartDataUtils.isStockValueRising(a,b,c)?d.styleDefaults.stockRisingColor:d.styleDefaults.stockFallingColor};DvtChartStyleUtils.getStockVolumeColor=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c);if(d&&d.color)return d.color;d=a.getOptions();return d.styleDefaults.stockVolumeColor?d.styleDefaults.stockVolumeColor:DvtChartStyleUtils.getStockItemColor(a,b,c)};
DvtChartStyleUtils.getSplitterPosition=function(a){var b=a.getOptions().splitterPosition;return null!=b?b:DvtChartTypeUtils.isStock(a)?.8:.5};
DvtChartStyleUtils.getPattern=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c);if(d&&d.pattern&&"auto"!=d.pattern)return d.pattern;d=DvtChartStyleUtils.getSeriesType(a,b);if(("line"==d||"area"==d)&&null!=c)return null;if((d=DvtChartDataUtils.getSeriesItem(a,b))&&d.pattern&&"auto"!=d.pattern)return d.pattern;if("pattern"==DvtChartStyleUtils.getSeriesEffect(a)){if(DvtChartTypeUtils.isStock&&"candlestick"==DvtChartStyleUtils.getSeriesType(a,b))return b=DvtChartDataUtils.isStockValueRising(a,
b,c),a=DvtAgent.isRightToLeft(a.getCtx()),b?a?"smallDiagonalLeft":"smallDiagonalRight":a?"smallDiagonalRight":"smallDiagonalLeft";c=a.getOptions();d=c.styleDefaults.patterns;b=DvtChartDataUtils.getSeries(a,b);a=DvtChartDataUtils.getSeriesStyleIndex(a,b)%d.length;return c.styleDefaults.patterns[a]}return null};
DvtChartStyleUtils.getMarkerBorderColor=function(a,b,c){var d=DvtChartStyleUtils.getBorderColor(a,b,c);return d?d:0<DvtChartStyleUtils.getDataItemGaps(a)&&"lineWithArea"!=DvtChartStyleUtils.getSeriesType(a,b)?DvtChartStyleUtils.getBackgroundColor(a,!0):DvtChartTypeUtils.isBubble(a)&&!DvtChartDefaults.isSkyrosSkin(a)&&"gradient"!=DvtChartStyleUtils.getSeriesEffect(a)&&(a=DvtChartStyleUtils.getMarkerColor(a,b,c))?DvtColorUtils.adjustHSL(a,0,.15,-.25):null};
DvtChartStyleUtils.getBorderColor=function(a,b,c){if((c=DvtChartDataUtils.getDataItem(a,b,c))&&c.borderColor)return c.borderColor;if((b=DvtChartDataUtils.getSeriesItem(a,b))&&b.borderColor)return b.borderColor;a=a.getOptions().styleDefaults;return"auto"!=a.borderColor?a.borderColor:null};
DvtChartStyleUtils.getBorderWidth=function(a,b,c){if((c=DvtChartDataUtils.getDataItem(a,b,c))&&c.borderWidth)return c.borderWidth;if((b=DvtChartDataUtils.getSeriesItem(a,b))&&b.borderWidth)return b.borderWidth;b=a.getOptions().styleDefaults;return"auto"!=b.borderWidth?b.borderWidth:DvtChartTypeUtils.isScatterBubble(a)||DvtChartTypeUtils.isLineArea(a)?1.25:1};
DvtChartStyleUtils.getMarkerColor=function(a,b,c){if(!DvtChartStyleUtils.isMarkerDisplayed(a,b,c))return DvtChartStyleUtils.getColor(a,b,c);var d=DvtChartDataUtils.getDataItem(a,b,c);return d&&d.color?d.color:(d=DvtChartDataUtils.getSeriesItem(a,b))&&d.markerColor?d.markerColor:(d=a.getOptions().styleDefaults.markerColor)?d:DvtChartStyleUtils.getColor(a,b,c)};
DvtChartStyleUtils.getMarkerShape=function(a,b,c){var d=a.getOptions(),e=d.styleDefaults.markerShape,g=DvtChartDataUtils.getSeriesItem(a,b);g&&g.markerShape&&(e=g.markerShape);(c=DvtChartDataUtils.getDataItem(a,b,c))&&c.markerShape&&(e=c.markerShape);"auto"==e&&("bubble"==a.getType()||DvtChartStyleUtils.isRangeSeries(a,b)?e="circle":(b=DvtChartDataUtils.getSeries(a,b),a=DvtChartDataUtils.getSeriesStyleIndex(a,b),d=d.styleDefaults.shapes,e=d[a%d.length]));return e};
DvtChartStyleUtils.getMarkerSize=function(a,b,c){c=DvtChartDataUtils.getDataItem(a,b,c);b=DvtChartDataUtils.getSeriesItem(a,b);var d=a.getOptions();c=c&&Number(c.markerSize)?Number(c.markerSize):b&&Number(b.markerSize)?Number(b.markerSize):Number(d.styleDefaults.markerSize);DvtChartTypeUtils.isOverview(a)&&(c=Math.ceil(.6*c));return c};
DvtChartStyleUtils.isMarkerDisplayed=function(a,b,c){c=DvtChartDataUtils.getDataItem(a,b,c);var d=DvtChartDataUtils.getSeriesItem(a,b);c=c&&null!=c.markerDisplayed?c.markerDisplayed:d&&null!=d.markerDisplayed?d.markerDisplayed:a.getOptions().styleDefaults.markerDisplayed;return"on"==c?!0:"off"==c?!1:DvtChartTypeUtils.isScatterBubble(a)||"none"==DvtChartStyleUtils.getLineType(a,b)};
DvtChartStyleUtils.getLineWidth=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b),d=a.getOptions(),c=c&&c.lineWidth?c.lineWidth:d.styleDefaults.lineWidth?d.styleDefaults.lineWidth:"lineWithArea"==DvtChartStyleUtils.getSeriesType(a,b)?2:3;DvtChartTypeUtils.isOverview(a)&&(c=Math.ceil(.6*c));return c};DvtChartStyleUtils.getLineStyle=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&c.lineStyle?c.lineStyle:a.getOptions().styleDefaults.lineStyle};
DvtChartStyleUtils.getLineType=function(a,b){var c;c=(c=DvtChartDataUtils.getSeriesItem(a,b))&&c.lineType?c.lineType:a.getOptions().styleDefaults.lineType;"auto"==c&&(c=DvtChartTypeUtils.isScatterBubble(a)?"none":"straight");if(DvtChartTypeUtils.isPolar(a)||DvtChartTypeUtils.isScatterBubble(a))"centeredSegmented"==c&&(c="segmented"),"centeredStepped"==c&&(c="stepped");return c};DvtChartStyleUtils.getBarSpacing=function(a){return a.getOptions().__sparkBarSpacing};
DvtChartStyleUtils.getBarGapRatio=function(a){var b=a.getOptions().styleDefaults.barGapRatio;"string"==typeof b&&"%"==b.slice(-1)&&(b=Number(b.slice(0,-1))/100);if(null!=b&&!isNaN(b))return b;var c=DvtChartDataUtils.getStackCategories(a,"bar"),b=c.y.length,c=c.y2.length,b=DvtChartTypeUtils.isSplitDualY(a)?Math.max(b,c):b+c;return b=DvtChartTypeUtils.isPolar(a)?1==b?0:.25:1==b?.37+.26/DvtChartDataUtils.getViewportGroupCount(a):.25};
DvtChartStyleUtils.getMaxBarWidth=function(a){var b=a.getOptions().styleDefaults.maxBarWidth;return null==b||DvtChartTypeUtils.isPolar(a)?Infinity:b};DvtChartStyleUtils.getBarWidth=function(a,b,c){b=DvtChartDataUtils.getZValue(a,b,c,1)/a.getOptions()._averageGroupZ;return Math.min(b*DvtChartStyleUtils.getGroupWidth(a),DvtChartStyleUtils.getMaxBarWidth(a))};
DvtChartStyleUtils.getBarStackWidth=function(a,b,c,d){b=DvtChartDataUtils.getBarCategoryZ(a,b,c,d)/a.getOptions()._averageGroupZ;return Math.min(b*DvtChartStyleUtils.getGroupWidth(a),DvtChartStyleUtils.getMaxBarWidth(a))};
DvtChartStyleUtils.getBarCategoryOffsetMap=function(a,b,c){var d=DvtChartDataUtils.getStackCategories(a,"bar"),e=DvtChartAxisUtils.isMixedFrequency(a),g=DvtChartTypeUtils.isSplitDualY(a),h={},k={},m=0,n=0,t,u;if(c){for(u=0;u<d.y.length;u++)t=DvtChartStyleUtils.getBarStackWidth(a,d.y[u],b,!1),e?h[d.y[u]]=-.5*t:(h[d.y[u]]=m,m+=t);g||(n=m);for(u=0;u<d.y2.length;u++)t=DvtChartStyleUtils.getBarStackWidth(a,d.y2[u],b,!0),e?k[d.y2[u]]=-.5*t:(k[d.y2[u]]=n,n+=t);g||(m=n)}else for(u=0;u<DvtChartDataUtils.getSeriesCount(a);u++)if(("bar"==
DvtChartStyleUtils.getSeriesType(a,u)||"candlestick"==DvtChartStyleUtils.getSeriesType(a,u))&&DvtChartStyleUtils.isSeriesRendered(a,u)){var d=DvtChartDataUtils.isAssignedToY2(a,u),v=DvtChartDataUtils.getStackCategory(a,u);t=DvtChartStyleUtils.getBarWidth(a,u,b);d?e?k[v]=-.5*t:(k[v]=n,n+=t):e?h[v]=-.5*t:(h[v]=m,m+=t)}for(v in h)h[v]-=g||c?m/2:(m+n)/2;for(v in k)k[v]-=g||c?n/2:(m+n)/2-m;return{y:h,y2:k}};
DvtChartStyleUtils.getDataItemGaps=function(a){var b=a.getOptions();if(DvtChartTypeUtils.isFunnel(a)&&"on"==b.styleDefaults.funnelSliceGaps)return 1;if(null!=b.styleDefaults.sliceGaps)return b.styleDefaults.sliceGaps;a=b.styleDefaults.dataItemGaps;"auto"==a&&(a="on"==b.styleDefaults.threeDEffect?"0%":"50%");b=a&&a.indexOf?a.indexOf("%"):-1;return 0<=b?(a=a.substring(0,b),a/100):0};
DvtChartStyleUtils.isSelectable=function(a,b,c){var d=DvtChartDataUtils.getSeriesItem(a,b);return d&&"off"==d._selectable?!1:a.isSelectionSupported()&&0<=b&&0<=c};
DvtChartStyleUtils.isSeriesRendered=function(a,b){var c=DvtChartStyleUtils.getHiddenCategories(a),d=DvtChartDataUtils.getSeriesItem(a,b);if(0<c.length&&d)if(d.categories)for(var e=0;e<d.categories.length;e++){if(0<=DvtArrayUtils.getIndex(c,d.categories[e]))return!1}else if(0<=DvtArrayUtils.getIndex(c,DvtChartDataUtils.getSeries(a,b)))return!1;return!0};
DvtChartStyleUtils.isDataItemRendered=function(a,b,c){if(DvtChartStyleUtils.isSeriesRendered(a,b)){var d=DvtChartStyleUtils.getHiddenCategories(a);if(DvtChartTypeUtils.isPie(a)||DvtChartTypeUtils.isFunnel(a))c=0;c=DvtChartDataUtils.getDataItem(a,b,c);if(0<d.length&&c)if(c.categories)for(a=0;a<c.categories.length;a++){if(0<=DvtArrayUtils.getIndex(d,c.categories[a]))return!1}else if(0<=DvtArrayUtils.getIndex(d,DvtChartDataUtils.getSeries(a,b)))return!1;return!0}return!1};
DvtChartStyleUtils.getAnimationOnDisplay=function(a){return a.getOptions().animationOnDisplay};DvtChartStyleUtils.getAnimationOnDataChange=function(a){return a.getOptions().animationOnDataChange};DvtChartStyleUtils.getAnimationDuration=function(a){return DvtStyleUtils.getTimeMilliseconds(a.getOptions().styleDefaults.animationDuration)/1E3};DvtChartStyleUtils.getAnimationIndicators=function(a){return a.getOptions().styleDefaults.animationIndicators};DvtChartStyleUtils.getAnimationUpColor=function(a){return a.getOptions().styleDefaults.animationUpColor};
DvtChartStyleUtils.getAnimationDownColor=function(a){return a.getOptions().styleDefaults.animationDownColor};DvtChartStyleUtils.getHiddenCategories=function(a){a=a.getOptions();a.hiddenCategories||(a.hiddenCategories=[]);return a.hiddenCategories};DvtChartStyleUtils.getHighlightedCategories=function(a){a=a.getOptions();a.highlightedCategories||(a.highlightedCategories=[]);return a.highlightedCategories};DvtChartStyleUtils.getSelectedInnerColor=function(a){return a.getOptions().styleDefaults.selectedInnerColor};
DvtChartStyleUtils.getSelectedOuterColor=function(a){return a.getOptions().styleDefaults.selectedOuterColor};DvtChartStyleUtils.isSelectionHighlighted=function(a){a=a.getOptions().styleDefaults.selectionEffect;return"highlight"==a||"highlightAndExplode"==a};DvtChartStyleUtils.isSelectionExploded=function(a){a=a.getOptions().styleDefaults.selectionEffect;return"explode"==a||"highlightAndExplode"==a};
DvtChartStyleUtils.getDataLabelStyle=function(a,b,c,d,e,g){var h=[],k;!d||"bar"!=DvtChartStyleUtils.getSeriesType(a,b)&&!DvtChartTypeUtils.isBubble(a)||"center"!=e&&"inBottom"!=e&&"inTop"!=e&&"inRight"!=e&&"inLeft"!=e?h.push(new DvtCSSStyle("color: #333333;")):(k=null!=DvtChartStyleUtils.getPattern(a,b,c)?"#000000":DvtColorUtils.getContrastingTextColor(d),h.push(new DvtCSSStyle("color: "+k+";")));h.push(DvtChartStyleUtils._parseLowHighArray(a.getOptions().styleDefaults.dataLabelStyle,g));h.push(new DvtCSSStyle(DvtChartStyleUtils._parseLowHighArray(DvtChartDataUtils.getDataItem(a,
b,c).labelStyle,g)));k&&DvtAgent.isHighContrast()&&h.push(new DvtCSSStyle("color: "+k+";"));return DvtCSSStyle.mergeStyles(h)};
DvtChartStyleUtils.getDataLabelPosition=function(a,b,c,d){var e=DvtChartDataUtils.getDataItem(a,b,c),g=e.labelPosition;g||(g=a.getOptions().styleDefaults.dataLabelPosition);g=DvtChartStyleUtils._parseLowHighArray(g,d);if("none"==g)return"none";var h=DvtAgent.isRightToLeft(a.getCtx()),k=DvtChartTypeUtils.isHorizontal(a),m=DvtChartTypeUtils.isPolar(a);if(DvtChartTypeUtils.isFunnel(a))return"center";if("bar"==DvtChartStyleUtils.getSeriesType(a,b)){if("center"==g||m)return"center";m=DvtChartTypeUtils.isStacked(a);
if("insideBarEdge"!=g){if(m)return"center";"outsideBarEdge"!=g&&(g="insideBarEdge")}if("insideBarEdge"==g&&!m){m=a.getOptions().styleDefaults.dataLabelStyle;if(k)var n=DvtChartDataUtils.getDataLabel(a,b,c,d),m=DvtTextUtils.getTextStringWidth(a.getCtx(),n,m);else m=DvtTextUtils.getTextStringHeight(a.getCtx(),m);n=DvtChartDataUtils.getBarInfo(a,b,c);Math.abs(n.baseCoord-n.yCoord)<=m&&(g="outsideBarEdge")}a="low"==d?e.low<=e.high:"high"==d?e.high<e.low:0>DvtChartDataUtils.getValue(a,b,c);return"outsideBarEdge"==
g?k?!a&&!h||a&&h?"right":"left":a?"bottom":"top":k?!a&&!h||a&&h?"inRight":"inLeft":a?"inBottom":"inTop"}if("center"==g)return"center";if("belowMarker"==g)return"bottom";if("aboveMarker"==g)return"top";if("afterMarker"!=g&&"beforeMarker"!=g){if(DvtChartTypeUtils.isBubble(a))return"center";if("low"!=d||m)if("high"!=d||m)g="afterMarker";else if(k)g="afterMarker";else return"top";else if(k)g="beforeMarker";else return"bottom"}return!h&&"afterMarker"==g||h&&"beforeMarker"==g?"right":"left"};
DvtChartStyleUtils._parseLowHighArray=function(a,b){return a instanceof Array?"high"==b?a[1]:a[0]:a};DvtChartStyleUtils.isOverviewRendered=function(a){var b=a.getOptions();return DvtChartTypeUtils.isOverviewSupported(a)&&"off"!=b.overview.rendered};DvtChartStyleUtils.getOverviewHeight=function(a){var b=a.getOptions().overview.height;null==b&&(b=DvtChartAxisUtils.hasTimeAxis(a)?.25:.2);return DvtChartStyleUtils.getSizeInPixels(b,a.getHeight())};
DvtChartStyleUtils.getSizeInPixels=function(a,b){if("string"==typeof a){if("%"==a.slice(-1))return b*Number(a.slice(0,-1))/100;if("px"==a.slice(-2))return Number(a.slice(0,-2));a=Number(a)}return isNaN(a)?0:1>=a?b*a:a};DvtChartStyleUtils.getBackgroundColor=function(a,b){var c=a.getOptions();return c.plotArea.backgroundColor?c.plotArea.backgroundColor:b?"#FFFFFF":null};
DvtChartStyleUtils.getHoverBehaviorDelay=function(a){var b=a.getOptions().styleDefaults.hoverBehaviorDelay;return b?(b=DvtStyleUtils.getTimeMilliseconds(b),DvtChartTypeUtils.isScatterBubble(a)||DvtChartTypeUtils.isLine(a)?.75*b:1.25*b):0};DvtChartStyleUtils.optimizeMarkerStroke=function(a){return DvtChartTypeUtils.isScatterBubble(a)};DvtChartStyleUtils.getGroupWidth=function(a){var b=a.getFromCache("groupWidth");null==b&&(b=a.xAxis.getInfo().getGroupWidth(),a.putToCache("groupWidth",b));return b};
var DvtChartTextUtils={};DvtObj.createSubclass(DvtChartTextUtils,DvtObj,"DvtChartTextUtils");DvtChartTextUtils.createText=function(a,b,c,d,e,g,h,k,m){c=new DvtOutputText(b.getCtx(),c,e,g);c.setCSSStyle(d);return DvtTextUtils.fitText(c,h,k,b)?(a.associate(c,new DvtSimpleObjPeer(c.getUntruncatedTextString(),null,null,m)),c):null};DvtChartTextUtils.areTitlesRendered=function(a){a=a.getOptions();return a.title.text||a.subtitle.text||a.footnote.text};var DvtChartTooltipUtils={};
DvtObj.createSubclass(DvtChartTooltipUtils,DvtObj,"DvtChartTooltipUtils");DvtChartTooltipUtils.getDatatipColor=function(a,b,c){return DvtChartTypeUtils.isStock(a)?DvtChartStyleUtils.getColor(a,0,c):DvtChartStyleUtils.getColor(a,b,c)};
DvtChartTooltipUtils.getDatatip=function(a,b,c,d){if(DvtChartTypeUtils.isSpark(a)||DvtChartTypeUtils.isOverview(a)||0>b||0>c)return null;var e=DvtChartDataUtils.getDataItem(a,b,c),g=a.getOptions().tooltip;if(d&&g)return d=a.getCtx().getTooltipManager(DvtChartTooltipUtils.isDataCursorEnabled(a)?DvtDataCursor.TOOLTIP_ID:null),a={id:e.id,label:e.label,series:DvtChartDataUtils.getSeries(a,b),group:DvtChartDataUtils.getGroup(a,c),value:DvtChartDataUtils.getValue(a,b,c),targetValue:DvtChartDataUtils.getValue(a,
b,c),x:DvtChartDataUtils.getXValue(a,b,c),y:DvtChartDataUtils.getValue(a,b,c),z:DvtChartDataUtils.getZValue(a,b,c),low:DvtChartDataUtils.getLowValue(a,b,c),high:DvtChartDataUtils.getHighValue(a,b,c),color:DvtChartStyleUtils.getColor(a,b,c),open:e.open,close:e.close,volume:e.volume},d.getCustomTooltip(g,a);if(e&&null!=e.shortDesc)return e.shortDesc;g="";DvtChartTypeUtils.isStock(a)?g+=DvtChartTooltipUtils.getStockDatatip(a,0,c,d):(g=DvtChartTooltipUtils._addSeriesDatatip(g,a,b,c,d),g=DvtChartTooltipUtils._addGroupDatatip(g,
a,b,c,d),g=DvtChartTooltipUtils._addValueDatatip(g,a,b,c,d));return DvtChartTooltipUtils._processDatatip(g,a,d)};
DvtChartTooltipUtils.getOtherSliceDatatip=function(a,b,c){var d=DvtBundle.getTranslatedString(DvtBundle.CHART_PREFIX,"LABEL_OTHER",null),e=a.getOptions().tooltip;if(c&&e)return b={id:d,series:d,group:DvtChartDataUtils.getGroup(a,0),value:b},a.getCtx().getTooltipManager().getCustomTooltip(e,b);e=DvtChartTooltipUtils._addDatatipRow("",a,"series","SERIES",d,c);e=DvtChartTooltipUtils._addGroupDatatip(e,a,0,0,c);e=DvtChartTooltipUtils._addDatatipRow(e,a,"value","VALUE",b,c);return DvtChartTooltipUtils._processDatatip(e,
a,c)};DvtChartTooltipUtils._processDatatip=function(a,b,c){return""==a?null:c?DvtHtmlTooltipManager.createStartTag("table",b.getOptions().styleDefaults._tooltipStyle)+a+"\x3c/table\x3e":a};
DvtChartTooltipUtils.getRefObjTooltip=function(a,b){var c=a.getOptions().tooltip;if(c&&null!=b.id){var d=a.getCtx().getTooltipManager(DvtChartTooltipUtils.isDataCursorEnabled(a)?DvtDataCursor.TOOLTIP_ID:null),e={id:DvtChartRefObjUtils.getId(b),label:b.text,value:b.value,low:DvtChartRefObjUtils.getLowValue(b),high:DvtChartRefObjUtils.getHighValue(b),color:DvtChartRefObjUtils.getColor(b)};return d.getCustomTooltip(c,e)}return b.shortDesc};
DvtChartTooltipUtils.getStockDatatip=function(a,b,c,d){var e=DvtChartDataUtils.getDataItem(a,b,c);b=DvtChartTooltipUtils._addGroupDatatip("",a,b,c,d);e&&(b=DvtChartTooltipUtils._addDatatipRow(b,a,"open","OPEN",e.open,d),b=DvtChartTooltipUtils._addDatatipRow(b,a,"close","CLOSE",e.close,d),b=DvtChartTooltipUtils._addDatatipRow(b,a,"high","HIGH",e.high,d),b=DvtChartTooltipUtils._addDatatipRow(b,a,"low","LOW",e.low,d),b=DvtChartTooltipUtils._addDatatipRow(b,a,"volume","VOLUME",e.volume,d));return b};
DvtChartTooltipUtils._addSeriesDatatip=function(a,b,c,d,e){c=DvtChartDataUtils.getSeriesLabel(b,c);return DvtChartTooltipUtils._addDatatipRow(a,b,"series","SERIES",c,e)};
DvtChartTooltipUtils._addGroupDatatip=function(a,b,c,d,e){var g;DvtChartAxisUtils.hasTimeAxis(b)?(g=DvtChartTooltipUtils.getValueFormat(b,"group"),c=DvtChartDataUtils.getXValue(b,c,d),g=DvtChartTooltipUtils.formatDateValue(g,new Date(c)),null==g&&(g=b.xAxis.getInfo().formatLabel(c))):g=DvtChartDataUtils.getGroupLabel(b,d);d=DvtChartDataUtils.getNumLevels(b);c="GROUP";if(1!=d&&DvtArrayUtils.isArray(g))for(--d;0<=d;d--)a=DvtChartTooltipUtils._addDatatipRow(a,b,"group",c,g[d],e,d),g[d]&&(c=null);else a=
DvtChartTooltipUtils._addDatatipRow(a,b,"group",c,g,e);return a};
DvtChartTooltipUtils._addValueDatatip=function(a,b,c,d,e){var g=DvtChartDataUtils.getValue(b,c,d),h=DvtChartDataUtils.getXValue(b,c,d),k=DvtChartDataUtils.getZValue(b,c,d),m=DvtChartDataUtils.getLowValue(b,c,d);d=DvtChartDataUtils.getHighValue(b,c,d);DvtChartTypeUtils.isScatterBubble(b)?(a=DvtChartTooltipUtils._addDatatipRow(a,b,"x","X",h,e),a=DvtChartTooltipUtils._addDatatipRow(a,b,"y","Y",g,e),DvtChartTypeUtils.isBubble(b)&&(a=DvtChartTooltipUtils._addDatatipRow(a,b,"z","Z",k,e))):DvtChartTypeUtils.isPie(b)?
a=DvtChartTooltipUtils._addDatatipRow(a,b,"value","VALUE",g,e):DvtChartTypeUtils.isFunnel(b)?(a=DvtChartTooltipUtils._addDatatipRow(a,b,"value","VALUE",g,e),g=DvtChartDataUtils.getTargetValue(b,c),null!=g&&(a=DvtChartTooltipUtils._addDatatipRow(a,b,"targetValue","TARGET_VALUE",g,e))):DvtChartTypeUtils.isBLAC(b)&&(c=DvtChartDataUtils.isAssignedToY2(b,c)?"y2":"y",null!=m||null!=d?(a=DvtChartTooltipUtils._addDatatipRow(a,b,"high","HIGH",d,e),a=DvtChartTooltipUtils._addDatatipRow(a,b,"low","LOW",m,e),
null!=k&&(a=DvtChartTooltipUtils._addDatatipRow(a,b,"z","Z",k,e))):null!=k?(a=DvtChartTooltipUtils._addDatatipRow(a,b,c,"Y",g,e),a=DvtChartTooltipUtils._addDatatipRow(a,b,"z","Z",k,e)):a=DvtChartTooltipUtils._addDatatipRow(a,b,c,"VALUE",g,e));return a};
DvtChartTooltipUtils._addDatatipRow=function(a,b,c,d,e,g,h){if(null==e||""===e)return a;var k=b.getOptions().styleDefaults,m=DvtChartTooltipUtils.getValueFormat(b,c),n=m.tooltipDisplay;if(!n||"auto"==n)if("series"==c&&"none"==k.seriesTooltipType||"group"==c&&("none"==k.groupTooltipType||DvtChartTypeUtils.isPie(b)||DvtChartTypeUtils.isFunnel(b))||"series"!=c&&"group"!=c&&"label"!=c&&"none"==k.valueTooltipType)n="off";if("off"==n)return a;var t;"string"===typeof m.tooltipLabel?t=m.tooltipLabel:m.tooltipLabel&&
null!=h&&(t=m.tooltipLabel[h]);null==t&&(t=null==d?"":"GROUP"==d&&DvtChartAxisUtils.hasTimeAxis(b)?DvtBundle.getTranslation(b.getOptions(),"labelDate",DvtBundle.CHART_PREFIX,"LABEL_GROUP"):DvtBundle.getTranslatedString(DvtBundle.CHART_PREFIX,"LABEL_"+d,""));"series"!=c&&"group"!=c&&(e=DvtChartTooltipUtils.formatValue(b.getCtx(),m,e));if(g)return b=DvtAgent.isRightToLeft(b.getCtx()),k.tooltipLabelStyle.setStyle(DvtCSSStyle.TEXT_ALIGN,b?"left":"right"),k.tooltipValueStyle.setStyle(DvtCSSStyle.TEXT_ALIGN,
b?"right":"left"),a+"\x3ctr\x3e"+DvtHtmlTooltipManager.createStartTag("td",k.tooltipLabelStyle)+t+"\x3c/td\x3e"+DvtHtmlTooltipManager.createStartTag("td",k.tooltipValueStyle)+e+"\x3c/td\x3e\x3c/tr\x3e";0<a.length&&(a+="\x3cbr\x3e");return a+DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[t,e])};
DvtChartTooltipUtils.getValueFormat=function(a,b){var c=a.getOptions().valueFormats;if(!c)return{};for(var d=0;d<c.length;d++)if(c[d].type==b)return c[d];return"group"==b&&DvtChartAxisUtils.hasTimeAxis(a)?DvtChartTooltipUtils.getValueFormat(a,"x"):"y"!=b&&"y2"!=b&&"min"!=b&&"max"!=b||!DvtChartTypeUtils.isBLAC(a)?{}:DvtChartTooltipUtils.getValueFormat(a,"value")};
DvtChartTooltipUtils.formatValue=function(a,b,c,d,e,g){var h="auto",k="on",m;b.scaling&&(h=b.scaling);b.autoPrecision&&(k=b.autoPrecision);b.converter&&(m=b.converter);a=new DvtLinearScaleAxisValueFormatter(a,null!=d?d:c,null!=e?e:c,null!=g?g:0,h,k);return m&&(m.getAsString||m.format)?a.format(c,m):a.format(c)};DvtChartTooltipUtils.formatDateValue=function(a,b){var c=a.converter;return c?c.getAsString?c.getAsString(b):c.format?c.format(b):null:null};
DvtChartTooltipUtils.isDataCursorEnabled=function(a){if(DvtChartTypeUtils.isPie(a)||DvtChartTypeUtils.isFunnel(a)||DvtChartTypeUtils.isPolar(a))return!1;var b=a.getOptions();return"on"==b.dataCursor?!0:"off"==b.dataCursor?!1:DvtAgent.isTouchDevice()&&DvtChartTypeUtils.isLineArea(a)};
DvtChartTooltipUtils.getDataCursorBehavior=function(a){var b=a.getOptions().dataCursorBehavior;return"snap"==b?DvtDataCursor.BEHAVIOR_SNAP:"smooth"==b?DvtDataCursor.BEHAVIOR_SMOOTH:DvtChartTypeUtils.isLineArea(a)?DvtDataCursor.BEHAVIOR_SMOOTH:DvtDataCursor.BEHAVIOR_SNAP};var DvtChartTypeUtils={};DvtObj.createSubclass(DvtChartTypeUtils,DvtObj,"DvtChartTypeUtils");DvtChartTypeUtils._SUPPORTED_TYPES="bar line area lineWithArea combo pie bubble scatter funnel stock".split(" ");
DvtChartTypeUtils.isValidType=function(a){return 0<=DvtChartTypeUtils._SUPPORTED_TYPES.indexOf(a.getType())};DvtChartTypeUtils.isSpark=function(a){return a.getOptions().__spark};DvtChartTypeUtils.isOverview=function(a){return a.getOptions()._isOverview};DvtChartTypeUtils.isCombo=function(a){return"combo"==a.getType()};DvtChartTypeUtils.isVertical=function(a){return!DvtChartTypeUtils.isHorizontal(a)&&!DvtChartTypeUtils.isPolar(a)};
DvtChartTypeUtils.isHorizontal=function(a){return"horizontal"==a.getOptions().orientation&&!DvtChartTypeUtils.isPolar(a)&&!DvtChartTypeUtils.isStock(a)&&(DvtChartTypeUtils.isBLAC(a)||DvtChartTypeUtils.isFunnel(a))};DvtChartTypeUtils.isPolar=function(a){return"polar"==a.getOptions().coordinateSystem};DvtChartTypeUtils.isStacked=function(a){return"on"!=a.getOptions().stack||DvtChartAxisUtils.isMixedFrequency(a)?!1:DvtChartTypeUtils.isBLAC(a)};DvtChartTypeUtils.isBar=function(a){return"bar"==a.getType()};
DvtChartTypeUtils.isStock=function(a){return"stock"==a.getType()};DvtChartTypeUtils.isLine=function(a){return"line"==a.getType()};DvtChartTypeUtils.isLineWithArea=function(a){return"lineWithArea"==a.getType()};DvtChartTypeUtils.isArea=function(a){return"area"==a.getType()};DvtChartTypeUtils.isScatter=function(a){return"scatter"==a.getType()};DvtChartTypeUtils.isBubble=function(a){return"bubble"==a.getType()};DvtChartTypeUtils.isPie=function(a){return"pie"==a.getType()};
DvtChartTypeUtils.isFunnel=function(a){return"funnel"==a.getType()};DvtChartTypeUtils.isDualY=function(a){return!DvtChartTypeUtils.hasAxes(a)||DvtChartTypeUtils.isScatterBubble(a)||DvtChartTypeUtils.isPolar(a)?!1:!0};DvtChartTypeUtils.isSplitDualY=function(a){return DvtChartTypeUtils.isStock(a)&&DvtChartDataUtils.hasVolumeSeries(a)&&!DvtChartTypeUtils.isOverview(a)?!0:"on"==a.getOptions().splitDualY&&DvtChartTypeUtils.hasY2Data(a)&&!DvtChartTypeUtils.hasY2DataOnly(a)};
DvtChartTypeUtils.isBLAC=function(a){a=a.getType();return"bar"==a||"line"==a||"area"==a||"lineWithArea"==a||"combo"==a||"stock"==a};DvtChartTypeUtils.isScatterBubble=function(a){a=a.getType();return"scatter"==a||"bubble"==a};DvtChartTypeUtils.isLineArea=function(a){a=a.getType();return"line"==a||"area"==a||"lineWithArea"==a};DvtChartTypeUtils.isScrollSupported=function(a){return!DvtChartTypeUtils.isPie(a)&&!DvtChartTypeUtils.isFunnel(a)&&!DvtChartTypeUtils.isPolar(a)};
DvtChartTypeUtils.isOverviewSupported=function(a){return DvtChartTypeUtils.isBLAC(a)&&DvtChartTypeUtils.isVertical(a)};DvtChartTypeUtils.isHorizScrollbarSupported=function(a){var b=DvtChartEventUtils.getZoomDirection(a);return DvtChartTypeUtils.isPolar(a)?!1:DvtChartTypeUtils.isBLAC(a)&&DvtChartTypeUtils.isVertical(a)||DvtChartTypeUtils.isScatterBubble(a)&&"y"!=b};
DvtChartTypeUtils.isVertScrollbarSupported=function(a){var b=DvtChartEventUtils.getZoomDirection(a);return DvtChartTypeUtils.isPolar(a)?!1:DvtChartTypeUtils.isBLAC(a)&&DvtChartTypeUtils.isHorizontal(a)||DvtChartTypeUtils.isScatterBubble(a)&&"x"!=b};DvtChartTypeUtils.hasAxes=function(a){return!("pie"==a.getType()||"funnel"==a.getType())};
DvtChartTypeUtils.hasY2DataOnly=function(a){return DvtChartTypeUtils.isDualY(a)?DvtChartDataUtils.getY2SeriesCount(a,null,!0)==DvtChartDataUtils.getSeriesCount(a):!1};DvtChartTypeUtils.hasY2Data=function(a,b){return DvtChartTypeUtils.isDualY(a)?0<DvtChartDataUtils.getY2SeriesCount(a,null,!0):!1};DvtChartTypeUtils.hasY2BarData=function(a){return DvtChartTypeUtils.hasY2Data(a,"bar")};DvtChartTypeUtils.hasBarSeries=function(a){return DvtChartTypeUtils._hasSeriesType(a,"bar")};
DvtChartTypeUtils.hasCandlestickSeries=function(a){return DvtChartTypeUtils._hasSeriesType(a,"candlestick")};DvtChartTypeUtils.hasLineSeries=function(a){return DvtChartTypeUtils._hasSeriesType(a,"line")};DvtChartTypeUtils.hasAreaSeries=function(a){return DvtChartTypeUtils._hasSeriesType(a,"area")};DvtChartTypeUtils.hasLineWithAreaSeries=function(a){return DvtChartTypeUtils._hasSeriesType(a,"lineWithArea")};
DvtChartTypeUtils._hasSeriesType=function(a,b){if(DvtChartTypeUtils.isBLAC(a))for(var c=DvtChartDataUtils.getSeriesCount(a),d=0;d<c;d++)if(DvtChartStyleUtils.isSeriesRendered(a,d)&&DvtChartStyleUtils.getSeriesType(a,d)==b)return!0;return!1};
DvtChartTypeUtils.hasCenteredSeries=function(a){if(!DvtChartTypeUtils.isBLAC(a))return!1;for(var b=DvtChartDataUtils.getSeriesCount(a),c=0;c<b;c++)if(DvtChartStyleUtils.isSeriesRendered(a,c)&&"bar"!=DvtChartStyleUtils.getSeriesType(a,c)){var d=DvtChartStyleUtils.getLineType(a,c);if("centeredSegmented"==d||"centeredStepped"==d)return!0}return!1};
DvtChartTypeUtils.hasUncenteredSeries=function(a){if(!DvtChartTypeUtils.isBLAC(a))return!1;for(var b=DvtChartDataUtils.getSeriesCount(a),c=0;c<b;c++)if(DvtChartStyleUtils.isSeriesRendered(a,c)&&"bar"!=DvtChartStyleUtils.getSeriesType(a,c)){var d=DvtChartStyleUtils.getLineType(a,c);if("segmented"==d||"stepped"==d)return!0}return!1};
DvtChartTypeUtils.isStandalonePlotArea=function(a){var b=a.getOptions();return DvtChartTextUtils.areTitlesRendered(a)||"off"!=b.legend.rendered||DvtChartAxisUtils.isAxisRendered(a,"x")||DvtChartAxisUtils.isAxisRendered(a,"y")||DvtChartAxisUtils.isAxisRendered(a,"y2")?!1:!0};
DvtChartTypeUtils.isStandaloneXAxis=function(a){var b=a.getOptions();return DvtChartTextUtils.areTitlesRendered(a)||"off"!=b.legend.rendered||"off"!=b.plotArea.rendered||DvtChartAxisUtils.isAxisRendered(a,"y")||DvtChartAxisUtils.isAxisRendered(a,"y2")?!1:!0};
DvtChartTypeUtils.isStandaloneYAxis=function(a){var b=a.getOptions();return DvtChartTextUtils.areTitlesRendered(a)||"off"!=b.legend.rendered||DvtChartAxisUtils.isAxisRendered(a,"x")||"off"!=b.plotArea.rendered||DvtChartAxisUtils.isAxisRendered(a,"y2")?!1:!0};
DvtChartTypeUtils.isStandaloneY2Axis=function(a){var b=a.getOptions();return DvtChartTextUtils.areTitlesRendered(a)||"off"!=b.legend.rendered||DvtChartAxisUtils.isAxisRendered(a,"x")||DvtChartAxisUtils.isAxisRendered(a,"y")||"off"!=b.plotArea.rendered?!1:!0};var DvtChartMarkerUtils={};DvtObj.createSubclass(DvtChartMarkerUtils,DvtObj,"DvtChartMarkerUtils");DvtChartMarkerUtils._MIN_RADIUS=2.5;DvtChartMarkerUtils._MAX_RADIUS_PERCENT=.125;DvtChartMarkerUtils._DEFAULT_MARKER_SIZE_PERCENT=.2;
DvtChartMarkerUtils.calcBubbleSizes=function(a,b,c){var d=DvtChartTypeUtils.isPolar(a),e=DvtChartDataUtils.getMinMaxValue(a,"z"),g=e.min,h=e.max,e=DvtChartMarkerUtils._getAxisValueRange(a,"x"),k=DvtChartMarkerUtils._getAxisValueRange(a,"y"),m,n;d?(m=Infinity,n=a.getRadius()):(m=b-3*DvtChartAxisUtils.getTickLabelFontSize(a,"y"),n=c-2*DvtChartAxisUtils.getTickLabelFontSize(a,"x"));var t=Math.PI*Math.pow(DvtChartMarkerUtils._MIN_RADIUS,2),u=DvtChartMarkerUtils._MAX_RADIUS_PERCENT*Math.min(b,c),v=Math.PI*
Math.pow(u,2),u=DvtChartMarkerUtils._adjustBubbleSizeRangeForCount(a,t,v,g,h),t=u.minArea,v=u.maxArea,u=DvtChartMarkerUtils._adjustBubbleSizeRangeForDataRange(a,t,v,g,h),t=u.minArea,v=u.maxArea,h=h-g,u=v-t,v=2*Math.sqrt(v/Math.PI);m-=.75*v;n-=.75*v;for(var v=DvtChartDataUtils.getSeriesCount(a),w=0;w<v;w++)if(DvtChartStyleUtils.isSeriesRendered(a,w))for(var x=DvtChartDataUtils.getSeriesItem(a,w),y=x.items?x.items.length:0,z=0;z<y;z++){var A=x.items[z];A&&A.z&&(A.markerSize=0<h?2*Math.sqrt((t+(A.z-
g)/h*u)/Math.PI):DvtChartMarkerUtils._DEFAULT_MARKER_SIZE_PERCENT*Math.min(b,c),A._xAxisRadius=0<e?A.markerSize/m*.5*e:d?0:29,A._yAxisRadius=0<k?A.markerSize/n*.5*k:29)}};
DvtChartMarkerUtils._getAxisValueRange=function(a,b){var c=a.getOptions()[b+"Axis"],d=DvtChartAxisUtils.isLog(a,b),e=!d&&"zero"==DvtChartAxisUtils.getBaselineScaling(a,b),g=DvtChartDataUtils.getMinMaxValue(a,b,!0),h=c.min;null==h&&(h=e?Math.min(0,g.min):g.min);c=c.max;null==c&&(c=e?Math.max(0,g.max):g.max);return d&&0<c&&0<h?c==h?6:DvtMath.log10(c/h):c==h?60:c-h};
DvtChartMarkerUtils._adjustBubbleSizeRangeForCount=function(a,b,c,d,e){for(var g=0,h=0,k=DvtChartDataUtils.getSeriesCount(a),m=0;m<k;m++)if(DvtChartStyleUtils.isSeriesRendered(a,m))for(var n=DvtChartDataUtils.getSeriesItem(a,m),t=n.items.length,u=0;u<t;u++){var v=n.items[m];v&&v.z&&(g++,h+=v.z)}a=(h/g-d)/(e-d);d=15+Math.floor(30*(1-a));e=30+Math.floor(150*(1-a));g>=e?c=b+.15*(c-b):g>=d&&(c-=.85/(e-d)*(g-d)*(c-b));d=5+Math.floor(15*(1-a));a=30+Math.floor(70*(1-a));g<d?b+=.005*(c-b):g<a&&(b+=(.005-
.005/(a-d)*(g-d))*(c-b));return{minArea:b,maxArea:c}};DvtChartMarkerUtils._adjustBubbleSizeRangeForDataRange=function(a,b,c,d,e){if(0!=e-d){var g=a=c/b;0<e&&0<d?g=e/d:0>d&&0>e&&(g=d/e);g<a&&(d=c/g-b,0<d&&(b+=d))}else b=c;return{minArea:b,maxArea:c}};DvtChartMarkerUtils.sortMarkers=function(a){a.sort(DvtChartMarkerUtils._compareSize)};DvtChartMarkerUtils._compareSize=function(a,b){var c=a.getSize?a.getSize():a.size,d=b.getSize?b.getSize():b.size;return c>d?-1:c<d?1:0};
DvtChartMarkerUtils.checkPixelMap=function(a,b,c,d){var e=d/2;d=Math.max(Math.floor(b-e),0);var g=Math.max(Math.floor(c-e),0);b=Math.max(Math.ceil(b+e),0);c=Math.max(Math.ceil(c+e),0);return a.isObscured(d,g,b,c)};DvtChartMarkerUtils.updatePixelMap=function(a,b,c,d,e){var g=.4*d;d=Math.max(Math.round(b-g),0);b=Math.max(Math.round(b+g),0);var h=Math.max(Math.round(c-g),0);c=Math.max(Math.round(c+g),0);a.obscure(d,h,b,c,e)};var DvtPieChartUtils={};DvtObj.createSubclass(DvtPieChartUtils,DvtObj,"DvtPieChartUtils");
DvtPieChartUtils.OTHER_SLICE_SERIES_ID="_dvtOther";DvtPieChartUtils.getSliceId=function(a,b){var c=DvtChartDataUtils.getDataItem(a,b,0),c=c?c.id:null,d=DvtChartDataUtils.getSeries(a,b),e=DvtChartDataUtils.getGroup(a,0);return new DvtChartDataItem(c,d,e)};DvtPieChartUtils.getOtherSliceId=function(a){a=DvtChartDataUtils.getGroup(a,0);return new DvtChartDataItem(null,DvtPieChartUtils.OTHER_SLICE_SERIES_ID,a)};DvtPieChartUtils.getRenderedSeriesIndices=function(a){return DvtPieChartUtils._getSeriesIndicesArrays(a).rendered};
DvtPieChartUtils.hasOtherSeries=function(a){return 0<DvtPieChartUtils._getSeriesIndicesArrays(a).other.length};DvtPieChartUtils.getOtherValue=function(a){for(var b=DvtPieChartUtils._getSeriesIndicesArrays(a).other,c=0,d=0;d<b.length;d++){var e=b[d];DvtChartStyleUtils.isSeriesRendered(a,e)&&(e=DvtChartDataUtils.getValue(a,e,0),0<e&&(c+=e))}return c};
DvtPieChartUtils.getOtherSliceIds=function(a){for(var b=DvtPieChartUtils._getSeriesIndicesArrays(a).other,c=[],d=0;d<b.length;d++)c.push(DvtPieChartUtils.getSliceId(a,b[d]));return c};DvtPieChartUtils.isOtherSliceSelected=function(a,b){for(var c=DvtPieChartUtils.getOtherSliceIds(a),d=0;d<c.length;d++){for(var e=c[d],g=!1,h=0;h<b.length;h++)if(b[h].id&&e.getId()===b[h].id||e.getSeries()===b[h].series&&e.getGroup()===b[h].group){g=!0;break}if(!g)return!1}return!0};
DvtPieChartUtils._getSeriesIndicesArrays=function(a){for(var b=[],c=[],d=DvtChartDataUtils.getSeriesCount(a),e=a.getOptions(),g=e.otherThreshold*DvtPieChartUtils.getTotalValue(a),h=0;h<d;h++){var k=DvtChartDataUtils.getValue(a,h,0);0<g&&k<g?c.push(h):b.push(h)}"ascending"==e.sorting?b.sort(function(b,c){return DvtChartDataUtils.getValue(a,b,0)-DvtChartDataUtils.getValue(a,c,0)}):"on"!=e.sorting&&"descending"!=e.sorting||b.sort(function(b,c){return DvtChartDataUtils.getValue(a,c,0)-DvtChartDataUtils.getValue(a,
b,0)});return{rendered:b,other:c}};DvtPieChartUtils.getTotalValue=function(a){for(var b=DvtChartDataUtils.getSeriesCount(a),c=0,d=0;d<b;d++){var e=DvtChartDataUtils.getValue(a,d,0);0<e&&(c+=e)}return c};DvtPieChartUtils.getSliceExplode=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&c.pieSliceExplode?c.pieSliceExplode:0};
DvtPieChartUtils.getOtherSliceShowPopupBehaviors=function(a){var b=DvtPieChartUtils.getOtherSliceIds(a);if(b&&1<=b.length)return b=DvtChartDataUtils.getSeriesIndex(a,b[0].getSeries()),b=DvtChartDataUtils.getDataItem(a,b,0)._id,a.getShowPopupBehaviors(b)};var DvtPieRenderUtils=function(){};DvtObj.createSubclass(DvtPieRenderUtils,DvtObj,"DvtPieRenderUtils");DvtPieRenderUtils.TWOD="2D";DvtPieRenderUtils.THREED="3D";DvtPieRenderUtils.CRUST="CRUST";DvtPieRenderUtils.SIDE="SIDE";
DvtPieRenderUtils.BORDER="BORDER";DvtPieRenderUtils.SURFACE_CRUST=0;DvtPieRenderUtils.SURFACE_LEFT=1;DvtPieRenderUtils.SURFACE_RIGHT=2;DvtPieRenderUtils.SURFACE_TOP=3;DvtPieRenderUtils.reflectAngleOverYAxis=function(a,b,c,d,e){var g=DvtMath.degreesToRads(360-a);a=Math.cos(g);g=Math.sin(g);return{x:b+a*d,y:c+g*e}};
DvtPieRenderUtils.getGradientColors=function(a,b,c){if(c&&c!=DvtCSSStyle.SKIN_SKYROS){if(b==DvtPieRenderUtils.TWOD||b==DvtPieRenderUtils.THREED)return[DvtColorUtils.adjustHSL(a,0,-.04,-.05),DvtColorUtils.adjustHSL(a,0,-.09,.04)];if(b==DvtPieRenderUtils.CRUST)return[DvtColorUtils.adjustHSL(a,0,-.04,-.05),DvtColorUtils.adjustHSL(a,0,0,-.14)];if(b==DvtPieRenderUtils.SIDE)return[DvtColorUtils.adjustHSL(a,0,-.1,.06),DvtColorUtils.adjustHSL(a,0,-.04,-.05)]}else{if(b==DvtPieRenderUtils.TWOD)return b=[],
b[0]=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,.1)),b[1]=b[0],b[2]=DvtColorUtils.getRGB(DvtColorUtils.getDarker(a,.9)),b;if(b==DvtPieRenderUtils.BORDER)return["#FFFFFF","#000000","#000000"];c=DvtColorUtils.getRGB(DvtColorUtils.getDarker(a,.88));var d=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,.05)),e=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,.15));a=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,.35));if(b==DvtPieRenderUtils.CRUST)return[c,e,a,c];if("SIDE"==b)return[c,a];if("3D"==b)return[a,
e,c,d,a]}};DvtPieRenderUtils.getGradientAlphas=function(a,b){var c=null==a||isNaN(a)||0==a?1:a;if(b==DvtPieRenderUtils.TWOD)return[c,c,c];if(b==DvtPieRenderUtils.BORDER)return[c/1.59375,c/5.3125,c/2.65625];if(b==DvtPieRenderUtils.THREED)return[c,c,c,c,c];if(b==DvtPieRenderUtils.CRUST)return[c,c,c,c];if(b==DvtPieRenderUtils.SIDE)return[c,c]};
DvtPieRenderUtils.getGradientRatios=function(a,b){if(b&&b!=DvtCSSStyle.SKIN_SKYROS)return[0,1];if(a==DvtPieRenderUtils.TWOD)return[.2,.5,1];if(a==DvtPieRenderUtils.BORDER)return[0,.5,1];if(a==DvtPieRenderUtils.THREED)return[0,.29,.55,.84,1];if(a==DvtPieRenderUtils.CRUST)return[0,.43,.91,1];if(a==DvtPieRenderUtils.SIDE)return[0,1]};
DvtPieRenderUtils.createTopSurface=function(a,b){var c=a.getPieChart(),d=c.getCtx(),e=a.getCenter(),g=a.getInnerRadius(),h=c.is3D()||a.getSliceGaps()>Math.sin(DvtMath.degreesToRads(a.getAngleExtent()))*a._radiusX+1?null:a.getSliceGaps(),d=new DvtSelectableWedge(d,e.x,e.y,a._radiusX,a._radiusY,a.getAngleStart(),a.getAngleExtent(),h,g),e=DvtChartStyleUtils.getSelectedInnerColor(c.chart),g=DvtChartStyleUtils.getSelectedOuterColor(c.chart),h=new DvtSolidStroke(a.getStrokeColor(),null,a.getBorderWidth());
d.setStyleProperties(b,h,a.getFillColor(),e,g);d=[d];!a.getStrokeColor()&&c.getSkin()==DvtCSSStyle.SKIN_SKYROS&&c.is3D()&&0<a.getDepth()&&"gradient"==DvtChartStyleUtils.getSeriesEffect(c.chart)&&(180<=a.getAngleStart()||180<=a.getAngleStart()+a.getAngleExtent()||360==a.getAngleExtent())&&(c=DvtPieRenderUtils._createGradientPieBorder(a,b),c.setTranslate(a.__getExplodeOffsetX(),a.__getExplodeOffsetY()),d.push(c));DvtPieRenderUtils.associate(a,d);return d};
DvtPieRenderUtils.associate=function(a,b){if(b)for(var c=0;c<b.length;c++)a.getPieChart().chart.__getEventManager().associate(b[c],a)};
DvtPieRenderUtils._createGradientPieBorder=function(a,b){var c=DvtPieRenderUtils.BORDER,d=DvtPieRenderUtils.getGradientColors(null,c),e=DvtPieRenderUtils.getGradientAlphas(null,c),c=DvtPieRenderUtils.getGradientRatios(c),g=b.getBounds(),d=new DvtLinearGradientStroke(120,d,e,c,g);d.setWidth(1);e=a.getAngleStart();c=a.getAngleExtent();g=180>e?180-e:0;e=0<g?180:e;c-=g;360<e+c&&(c=360-e);var g=a.getPieChart(),h=a.getCenter(),e=new DvtArc(g.getCtx(),h.x,h.y,g.getRadiusX(),g.getRadiusY(),e,c,DvtArc.OPEN);
e.setStroke(d);return e};
DvtPieRenderUtils.createLateralSurface=function(a,b,c){if(0==a.getAngleExtent())return[];var d=[];if(0<DvtColorUtils.getAlpha(a.getFillColor()))if(b==DvtPieRenderUtils.SURFACE_LEFT||b==DvtPieRenderUtils.SURFACE_RIGHT)d.push(DvtPieRenderUtils._generateLateralShape(a,b,null,c));else if(b==DvtPieRenderUtils.SURFACE_CRUST)for(var e=DvtPieRenderUtils._createCrustPathCommands(a),g=e.length,h=0;h<g;h++)d.push(DvtPieRenderUtils._generateLateralShape(a,b,e[h],c));DvtPieRenderUtils.associate(a,d);return d};
DvtPieRenderUtils.generateLateralGradientFill=function(a,b){var c=a.getPieChart(),d=c.getSkin(),e=b==DvtPieRenderUtils.CRUST?a.getDepth():0,g=d==DvtCSSStyle.SKIN_SKYROS?0:270,h=DvtPieRenderUtils.getGradientColors(DvtColorUtils.getRGB(a.getFillColor()),b,d),k=DvtPieRenderUtils.getGradientAlphas(DvtColorUtils.getAlpha(a.getFillColor()),b),m=DvtPieRenderUtils.getGradientRatios(b,d),n=null;d==DvtCSSStyle.SKIN_SKYROS&&(n=[Math.floor(a.getCenter().x-c.getRadiusX()),Math.floor(a.getCenter().y-c.getRadiusY())+
e,Math.ceil(2*c.getRadiusX()),Math.ceil(2*c.getRadiusY())]);return new DvtLinearGradientFill(g,h,k,m,n)};
DvtPieRenderUtils._generateLateralShape=function(a,b,c,d){var e=a.getPieChart().getCtx();if(b==DvtPieRenderUtils.SURFACE_LEFT||b==DvtPieRenderUtils.SURFACE_RIGHT){var g=a.getAngleStart(),h=a.getAngleExtent();c=a.getCenter().x;var k=a.getCenter().y,m=a._radiusX,n=a._radiusY,t=a.getDepth();b=b==DvtPieRenderUtils.SURFACE_LEFT?DvtPieRenderUtils.reflectAngleOverYAxis(g+h,c,k,m,n):DvtPieRenderUtils.reflectAngleOverYAxis(g,c,k,m,n);b=DvtPieRenderUtils._generateInnerPoints(c,k,b.x,b.y,t);c=[];for(k=0;k<b.length;k++)c.push(b[k].x,
b[k].y);e=new DvtPolygon(e,c);e.setFill(d);a.getStrokeColor()&&e.setSolidStroke(a.getStrokeColor());return e}return c?(e=new DvtPath(e,null),e.setCmds(c),e.setTranslate(a.__getExplodeOffsetX(),a.__getExplodeOffsetY()),e.setFill(d),a.getStrokeColor()&&e.setSolidStroke(a.getStrokeColor()),e):null};
DvtPieRenderUtils._createCrustPathCommands=function(a){var b=a.getAngleStart(),c=a.getAngleExtent(),d=b+c,e=a.getCenter().x,g=a.getCenter().y,h=a._radiusX,k=a._radiusY;a=a.getDepth();var m=[];180>b&&360<d?(m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,k,a,b,180-b)),m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,k,a,360,d-360)),m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,k,a,180,180))):360<d?(m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,k,a,b,360-b)),m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,
k,a,360,d-360))):180>b&&180<d?(m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,k,a,b,180-b)),m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,k,a,180,d-180))):m.push(DvtPieRenderUtils._makeOuterPath(e,g,h,k,a,b,c));return m};
DvtPieRenderUtils._makeOuterPath=function(a,b,c,d,e,g,h){h=DvtMath.degreesToRads(h);var k=-(DvtMath.degreesToRads(g)+h);g=DvtPieRenderUtils.reflectAngleOverYAxis(g,a,b,c,d);a+=Math.cos(k)*c;b+=Math.sin(k)*d;k=DvtPathUtils.moveTo(g.x,g.y);k+=DvtPathUtils.arcTo(c,d,h,0,a,b);k+=DvtPathUtils.lineTo(a,b+e);k+=DvtPathUtils.arcTo(c,d,h,1,g.x,g.y+e);return k+=DvtPathUtils.lineTo(g.x,g.y)};
DvtPieRenderUtils._generateInnerPoints=function(a,b,c,d,e){var g=[];g.push({x:a,y:b});g.push({x:c,y:d});g.push({x:c,y:d+e});g.push({x:a,y:b+e});return g};var DvtPieLabelInfo=function(){this._init()};DvtObj.createSubclass(DvtPieLabelInfo,DvtObj,"DvtPieLabelInfo");DvtPieLabelInfo.prototype._init=function(){this._slice=this._sliceLabel=null;this._initialNumLines=this._y=this._x=this._height=this._width=this._position=this._angle=-1;this._hasFeeler=!1;this._minY=this._maxY=-1};
DvtPieLabelInfo.prototype.getAngle=function(){return this._angle};DvtPieLabelInfo.prototype.setAngle=function(a){this._angle=a};DvtPieLabelInfo.prototype.getHeight=function(){return this._height};DvtPieLabelInfo.prototype.setHeight=function(a){this._height=a};DvtPieLabelInfo.prototype.getInitialNumLines=function(){return this._initialNumLines};DvtPieLabelInfo.prototype.setInitialNumLines=function(a){this._initialNumLines=a};DvtPieLabelInfo.prototype.getMaxY=function(){return this._maxY};
DvtPieLabelInfo.prototype.setMaxY=function(a){this._maxY=a};DvtPieLabelInfo.prototype.getMinY=function(){return this._minY};DvtPieLabelInfo.prototype.setMinY=function(a){this._minY=a};DvtPieLabelInfo.prototype.boundY=function(a){this._minY<=this._maxY&&(a=Math.max(a,this._minY),a=Math.min(a,this._maxY));return a};DvtPieLabelInfo.prototype.hasFeeler=function(){return this._hasFeeler};DvtPieLabelInfo.prototype.setHasFeeler=function(a){this._hasFeeler=a};DvtPieLabelInfo.prototype.getPosition=function(){return this._position};
DvtPieLabelInfo.prototype.setPosition=function(a){this._position=a};DvtPieLabelInfo.prototype.getSlice=function(){return this._slice};DvtPieLabelInfo.prototype.setSlice=function(a){this._slice=a};DvtPieLabelInfo.prototype.getSliceLabel=function(){return this._sliceLabel};DvtPieLabelInfo.prototype.setSliceLabel=function(a){this._sliceLabel=a};DvtPieLabelInfo.prototype.getWidth=function(){return this._width};DvtPieLabelInfo.prototype.setWidth=function(a){this._width=a};
DvtPieLabelInfo.prototype.getX=function(){return this._x};DvtPieLabelInfo.prototype.setX=function(a){this._x=a};DvtPieLabelInfo.prototype.getY=function(){return this._y};DvtPieLabelInfo.prototype.setY=function(a){this._y=a};var DvtPieLabelUtils=function(){};DvtObj.createSubclass(DvtPieLabelUtils,DvtObj,"DvtPieLabelUtils");DvtPieLabelUtils._MAX_LINES_PER_LABEL=3;DvtPieLabelUtils._COLLISION_MARGIN=1;DvtPieLabelUtils._LEFT_SIDE_LABELS=1;DvtPieLabelUtils._RIGHT_SIDE_LABELS=2;
DvtPieLabelUtils._OUTSIDE_LABEL_DISTANCE=1.04;DvtPieLabelUtils._FEELER_RAD_MINSIZE=.1;DvtPieLabelUtils._FEELER_HORIZ_MINSIZE=.1;DvtPieLabelUtils._LABEL_TO_FEELER_OFFSET=.5;DvtPieLabelUtils._LABEL_TO_FEELER_DISTANCE=3;DvtPieLabelUtils._NO_COLLISION=0;DvtPieLabelUtils._HALF_COLLISION=1;DvtPieLabelUtils._ALL_COLLISION=2;DvtPieLabelUtils.layoutLabelsAndFeelers=function(a){var b=a.getLabelPosition();DvtPieLabelUtils._layoutInsideLabels(a,"auto"==b);DvtPieLabelUtils._layoutOutsideLabelsAndFeelers(a)};
DvtPieLabelUtils._layoutInsideLabels=function(a,b){for(var c=a.__getSlices(),d=0;d<c.length;d++){var e=c[d],g=a.getSeriesLabelPosition(e.getSeriesIndex());if("none"!=g&&"outsideSlice"!=g){var h=e.getAngleStart()+e.getAngleExtent()/2,k=e.getInnerRadius(),m=e.getCenter(),n=0,t=0,u=DvtPieLabelUtils._createLabel(e,!0);1==c.length?(n=m.x,t=m.y):(n=Math.max(.45,.65-.45*k/Math.max(e.getRadiusY(),.001)),h=DvtPieRenderUtils.reflectAngleOverYAxis(h,m.x,m.y,k+(e.getRadiusX()-k)*n,k+(e.getRadiusY()-k)*n),n=h.x,
t=h.y);u.setX(n);u.setY(t);u.alignMiddle();u.alignCenter();for(var h=DvtTextUtils.guessTextDimensions(u),m=k=n,v=t-h.h/2,t=t+h.h/2;e.contains(k,v)&&e.contains(k,t);)k--;for(;e.contains(m,v)&&e.contains(m,t);)m++;k=Math.ceil(k+3);m=Math.floor(m-3);n=2*Math.min(n-k,m-n);n<h.w&&(u.setX((k+m)/2),n=m-k);b&&"center"!=g?u.getDimensions().w<n?e.setSliceLabel(u):e.setSliceLabel(null):(g=a.getCtx().getStage(),t=DvtPieLabelUtils._isTextLabel(a,e)?null:u.getTextString().length,DvtTextUtils.fitText(u,n,h.h,g,
t)&&(g.removeChild(u),e.setSliceLabel(u)));null!=e.getSliceLabel()&&e.setNoOutsideFeeler()}}};
DvtPieLabelUtils._layoutOutsideLabelsAndFeelers=function(a){var b=[],c=[],c=DvtPieLabelUtils._generateInitialLayout(a),b=c[0],c=c[1],d=DvtPieLabelUtils._refineInitialLayout(a,b,DvtPieLabelUtils._LEFT_SIDE_LABELS),e=DvtPieLabelUtils._refineInitialLayout(a,c,DvtPieLabelUtils._RIGHT_SIDE_LABELS);d==DvtPieLabelUtils._HALF_COLLISION&&e!=DvtPieLabelUtils._NO_COLLISION&&DvtPieLabelUtils._columnLabels(a,b,!0,!0,!0);d!=DvtPieLabelUtils._NO_COLLISION&&e==DvtPieLabelUtils._HALF_COLLISION&&DvtPieLabelUtils._columnLabels(a,
c,!1,!0,!0);DvtPieLabelUtils._setLabelsAndFeelers(a,b,DvtPieLabelUtils._LEFT_SIDE_LABELS);DvtPieLabelUtils._setLabelsAndFeelers(a,c,DvtPieLabelUtils._RIGHT_SIDE_LABELS)};
DvtPieLabelUtils._createLabel=function(a,b){var c=a.getPieChart(),d=c.getCtx(),d=b?new DvtOutputText(d):new DvtMultilineText(d),e=c.getOptions().styleDefaults,g=[e.dataLabelStyle,new DvtCSSStyle(e.sliceLabelStyle)];(c=DvtChartDataUtils.getDataItem(c.chart,a.getSeriesIndex(),0))&&g.push(new DvtCSSStyle(c.labelStyle));c=DvtCSSStyle.mergeStyles(g);g=null!=c.getStyle("color");!b||g&&!DvtAgent.isHighContrast()?g||c.setStyle("color",e._defaultSliceLabelColor):(g=DvtColorUtils.getContrastingTextColor(a.getFillColor()),
c.setStyle("color",g));d.setCSSStyle(c);e=DvtPieLabelUtils.generateSliceLabelString(a,e.sliceLabelType);d.setTextString(e);a.setSliceLabelString(e);return d};
DvtPieLabelUtils.createPieCenterLabel=function(a){var b=a.getOptions().pieCenterLabel,c=a.getLabelPosition();if(b){var d=b.style,e=a.getRadiusX(),e=0<a.getInnerRadius()?a.getInnerRadius():"outsideSlice"==c?.9*e:.5*e,g=a.getCenter(),c=new DvtMultilineText(a.getCtx()),e=new DvtRectangle(g.x,g.y,e*Math.sqrt(2),e*Math.sqrt(2));c.setCSSStyle(new DvtCSSStyle(d));c.setTextString(b.text);DvtTextUtils.fitText(c,e.w,e.h,a)&&(b=c.getDimensions(),c.setY(e.y-b.h/2),c.setX(e.x),c.alignCenter(),c.isTruncated()&&
a.chart.__getEventManager().associate(c,new DvtSimpleObjPeer(c.getTextString())),a.addChild(c))}};
DvtPieLabelUtils.generateSliceLabelString=function(a,b){var c=a.getPieChart(),d=a.getCustomLabel(),e=DvtChartTooltipUtils.getValueFormat(c.chart,"label");if(null!=d)return"number"==typeof d?DvtChartTooltipUtils.formatValue(c.getCtx(),e,d):d;var g=a.getValue(),d=c.getTotalValue(),h=0==d?0:g/d,k=.01>h?3:.1>h?2:1>h?1:0;150>2*c.getRadiusX()&&(k=Math.max(k-1,0));var m=c.getCtx().getNumberConverter({style:"percent",maximumFractionDigits:k,minimumFractionDigits:k}),d="";m&&m.getAsString?d=m.getAsString(h):
m&&m.format?d=m.format(h):(h*=100,d=DvtChartTooltipUtils.formatValue(c.getCtx(),{},h,null,null,100==h?1:Math.pow(10,-1*k))+"%");c=DvtChartTooltipUtils.formatValue(c.getCtx(),e,g);e=a.getSeriesLabel();return"percent"==b?d:"number"==b?c:"text"==b?e:"textAndPercent"==b?e+", "+d:null};
DvtPieLabelUtils._refineInitialLayout=function(a,b,c){if(b&&0<b.length){var d=a.__getFrame().y,e=!1,g=!1,h=!1,k=0,m,n=!1,t=n;m=!1;c=c==DvtPieLabelUtils._LEFT_SIDE_LABELS;for(var u=0;u<b.length;u++)m=b[u],t=n,90<m.getPosition()&&(n=!0),k=m.getY()+m.getHeight(),(m=d-m.getY()>DvtPieLabelUtils._COLLISION_MARGIN)&&(n?n&&!t?g=!0:h=!0:e=!0),k>d&&(d=k);return e&&h||g?(DvtPieLabelUtils._columnLabels(a,b,c,!0,!0),DvtPieLabelUtils._ALL_COLLISION):e?(DvtPieLabelUtils._columnLabels(a,b,c,!0,!1),DvtPieLabelUtils._HALF_COLLISION):
h?(DvtPieLabelUtils._columnLabels(a,b,c,!1,!0),DvtPieLabelUtils._HALF_COLLISION):DvtPieLabelUtils._NO_COLLISION}};
DvtPieLabelUtils._setLabelsAndFeelers=function(a,b,c){if(!(null==b||0>=b.length)){var d,e,g,h=c==DvtPieLabelUtils._LEFT_SIDE_LABELS,k=Infinity;for(c=0;c<b.length;c++)g=b[c],d=g.getSlice(),g.hasFeeler()?(d=DvtPieLabelUtils._calculateFeeler(g,d,h),k=Math.min(k,d)):d.setNoOutsideFeeler();for(c=0;c<b.length;c++){g=b[c];d=g.getSlice();e=g.getSliceLabel();g.hasFeeler()&&(h?g.setX(g.getX()+k):g.setX(g.getX()-k),DvtPieLabelUtils._calculateFeeler(g,d,h),e.setMaxLines(1));e.setY(g.getY());e.setX(g.getX());
var m=a.__getFrame();g.getY()<m.y||g.getY()+g.getHeight()>m.y+m.h?(d.setSliceLabel(null),d.setNoOutsideFeeler()):(DvtPieLabelUtils._truncateSliceLabel(a,d,g,h),0==g.getWidth()||0==g.getHeight()?(d.setSliceLabel(null),d.setNoOutsideFeeler()):d.setSliceLabel(e))}}};
DvtPieLabelUtils._calculateFeeler=function(a,b,c){var d=a.getX(),e=a.getY()+a.getHeight()*DvtPieLabelUtils._LABEL_TO_FEELER_OFFSET,g=DvtPieLabelUtils._FEELER_HORIZ_MINSIZE*b.getRadiusX(),h;c?(d+=DvtPieLabelUtils._LABEL_TO_FEELER_DISTANCE,h=d+g):(d-=DvtPieLabelUtils._LABEL_TO_FEELER_DISTANCE,h=d-g);var k={x:0,y:0};h={x:h,y:e};d={x:d,y:e};k=a.getAngle();e=DvtPieLabelUtils._adjustForDepth(k,b.getDepth());k=DvtPieRenderUtils.reflectAngleOverYAxis(k,b.getCenter().x,b.getCenter().y+e,b.getRadiusX(),b.getRadiusY());
a=DvtMath.degreesToRads(a.getPosition());var e=Math.abs(Math.atan2(h.x-k.x,k.y-h.y)),m=(k.y-h.y)*Math.tan(a);if(a>Math.PI/2&&e>Math.PI/2&&e<a||a<Math.PI/2&&e<Math.PI/2&&e>a)h.x=c?k.x-m:k.x+m;b.setOutsideFeelerPoints(k,h,d);return Math.abs(d.x-h.x)-g};DvtPieLabelUtils._adjustForDepth=function(a,b){var c=0;189<a&&351>a&&(c=b);return c};DvtPieLabelUtils._getMiddleLabel=function(a){for(var b=91,c=-1,d=0;d<a.length;d++){var e=a[d].getPosition();Math.abs(e-90)<b&&(b=Math.abs(e-90),c=d)}return c};
DvtPieLabelUtils._setOptimalLabelPosition=function(a,b,c,d){b.setX(c);c=a.getRadiusY()*(1+DvtPieLabelUtils._FEELER_RAD_MINSIZE);d=DvtMath.degreesToRads(b.getPosition());c*=Math.cos(d);d=DvtPieLabelUtils._adjustForDepth(b.getAngle(),a.getDepth());a=a.getCenter().y-c-b.getHeight()*DvtPieLabelUtils._LABEL_TO_FEELER_OFFSET+d;b.setY(b.boundY(a))};
DvtPieLabelUtils._getRadFeelerAngle=function(a,b,c){var d=a.getSlice(),e=d.getCenter();a=a.getAngle();var g=DvtPieLabelUtils._adjustForDepth(a,d.getDepth()),d=DvtPieRenderUtils.reflectAngleOverYAxis(a,e.x,e.y+g,d.getRadiusX(),d.getRadiusY());return Math.atan2(Math.abs(b-d.x),d.y-c)};
DvtPieLabelUtils._columnLabels=function(a,b,c,d,e){var g=a.__getFrame(),h=g.y,k=g.y+g.h,m,n,t=0,g=a.getCenter().x,u;m=a.getRadiusX()*(1+DvtPieLabelUtils._FEELER_RAD_MINSIZE+DvtPieLabelUtils._FEELER_HORIZ_MINSIZE);c?(g-=m,u=g+a.getRadiusX()*DvtPieLabelUtils._FEELER_HORIZ_MINSIZE):(g+=m,u=g-a.getRadiusX()*DvtPieLabelUtils._FEELER_HORIZ_MINSIZE);for(m=0;m<b.length;m++)n=b[m],t=DvtMath.degreesToRads(n.getPosition()),n=DvtPieLabelUtils._getRadFeelerAngle(n,u,h),n-t>.45*Math.PI?(b.splice(m,1),m--):(b[m].setMinY(h),
h+=b[m].getHeight());for(m=b.length-1;0<=m;m--)n=b[m],t=DvtMath.degreesToRads(n.getPosition()),n=DvtPieLabelUtils._getRadFeelerAngle(n,u,k),t-n>.45*Math.PI?b.splice(m,1):(k-=b[m].getHeight(),b[m].setMaxY(k));h=DvtPieLabelUtils._getMiddleLabel(b);m=b[h];DvtPieLabelUtils._setOptimalLabelPosition(a,m,g,c);m.setHasFeeler(!0);d&&!e&&m.getMinY()+m.getHeight()>a.getCenter().y&&(e=!0);e&&!d&&m.getMaxY()<a.getCenter().y&&(d=!0);k=m.getY();t=m.getY()+m.getHeight();if(d)for(m=h-1;0<=m;m--)n=b[m],u=n.getHeight(),
DvtPieLabelUtils._setOptimalLabelPosition(a,n,g,c),n.setHasFeeler(!0),d=n.getY(),k=d+u<k?d:k-u,n.setY(k);if(e)for(m=h+1;m<b.length;m++)n=b[m],u=n.getHeight(),DvtPieLabelUtils._setOptimalLabelPosition(a,n,g,c),n.setHasFeeler(!0),d=n.getY(),t=d>t?d+u:t+u,n.setY(t-u)};
DvtPieLabelUtils._truncateSliceLabel=function(a,b,c,d){var e=c.getSliceLabel(),g=e.getCSSStyle(),h=0,h=a.getNumChildren(),k=!1;a.contains(e)||(a.addChild(e),k=!0);e.setCSSStyle(g);g=b.getSliceLabelString();e.setTextString(g);k&&a.removeChildAt(h);g=a.__getFrame();h=d?c.getX()-g.x:g.x+g.w-c.getX();a=DvtPieLabelUtils._getTextDimension(a,b,e,h,c.getInitialNumLines());c.setWidth(a.x);return c.getHeight()!=a.y?(c.setHeight(a.y),!0):!1};
DvtPieLabelUtils._generateInitialLayout=function(a){for(var b=Array(2),c=[],d=[],e=a.__getSlices(),g=a.__getFrame(),h=0;h<e.length;h++){var k=e[h],m=a.getSeriesLabelPosition(k.getSeriesIndex());if(null==k.getSliceLabel()&&"none"!=m&&"center"!=m){var m=DvtPieLabelUtils._createLabel(k,!1),n=k.getAngleStart()+k.getAngleExtent()/2;360<n&&(n-=360);0>n&&(n+=360);var t=DvtPieRenderUtils.reflectAngleOverYAxis(n,a.getCenter().x,a.getCenter().y,a.getRadiusX()*DvtPieLabelUtils._OUTSIDE_LABEL_DISTANCE,a.getRadiusY()*
DvtPieLabelUtils._OUTSIDE_LABEL_DISTANCE),u=DvtPieLabelUtils._getTextDimension(a,k,m,90<=n&&270>n?t.x-g.x:g.x+g.w-t.x,DvtPieLabelUtils._MAX_LINES_PER_LABEL);165>n&&15<n?t.y-=1*u.y:15>n||345<n?(t.y-=.5*u.y,t.x+=.2*u.y):165<n&&195>n&&(t.y-=.5*u.y,t.x-=.2*u.y);var v=DvtPieLabelUtils._adjustForDepth(n,a.getDepth());t.y+=v;1==e.length&&(t.x-=u.x/2);t.y<g.y||t.y+u.y>g.y+g.h||(90<=n&&270>n?(m.alignRight(),v=n-90,DvtPieLabelUtils._createLabelInfo(k,m,n,v,u,t,c)):(v=90>=n?Math.abs(90-n):180-(n-270),DvtPieLabelUtils._createLabelInfo(k,
m,n,v,u,t,d)))}}b[0]=c;b[1]=d;return b};DvtPieLabelUtils._createLabelInfo=function(a,b,c,d,e,g,h){for(var k=-1,m,n=0;n<h.length;n++)if(m=h[n],m.getPosition()>d){k=n;break}-1==k&&(k=h.length);m=new DvtPieLabelInfo;m.setPosition(d);m.setAngle(c);m.setSliceLabel(b);m.setSlice(a);m.setWidth(e.x);m.setHeight(e.y);m.setX(g.x);m.setY(g.y);h.splice(k,0,m)};
DvtPieLabelUtils._getTextDimension=function(a,b,c,d,e){c.setMaxLines(e);b=DvtPieLabelUtils._isTextLabel(a,b)?null:c.getTextString().length;return DvtTextUtils.fitText(c,d,Infinity,a,b)?(a.addChild(c),d=c.getDimensions(),a.removeChild(c),{x:d.w,y:d.h}):{x:0,y:0}};DvtPieLabelUtils._isTextLabel=function(a,b){var c=b.getCustomLabel();return-1!=a.getOptions().styleDefaults.sliceLabelType.indexOf("text")||null!=c&&"number"!=typeof c};var DvtChartRenderer={};
DvtObj.createSubclass(DvtChartRenderer,DvtObj,"DvtChartRenderer");DvtChartRenderer._BUTTON_SIZE=16;DvtChartRenderer._BUTTON_PADDING=5;DvtChartRenderer._BUTTON_CORNER_DIST=4;DvtChartRenderer._BUTTON_OPACITY=.8;DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_SLOW=.05;DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_FAST=.2;
DvtChartRenderer.render=function(a,b,c){DvtChartRenderer._renderBackground(a,b,c);if(DvtChartDataUtils.hasInvalidData(a))DvtChartRenderer.renderEmptyText(a,b,c);else{DvtChartTypeUtils.isOverview(a)||(a.getOptions()._maxOverflowCoord=c.x+c.w,a.getOptions()._minOverflowCoord=c.x);DvtChartRenderer._addOuterGaps(a,c);var d=c.clone();DvtChartRenderer._renderTitles(a,b,c);DvtChartRenderer._adjustAvailSpace(c);DvtChartLegendRenderer.render(a,b,c);DvtChartRenderer._adjustAvailSpace(c);var e=DvtChartRenderer._prerenderHorizScrollbar(a,
b,c),g=DvtChartRenderer._prerenderVertScrollbar(a,b,c);DvtChartRenderer._adjustAvailSpace(c);a.__setAxisSpace(c.clone());DvtChartAxisRenderer.render(a,b,c);DvtChartRenderer._adjustAvailSpace(c);DvtChartRenderer._positionLegend(a.legend,c);a.__setPlotAreaSpace(c.clone());DvtChartRenderer._setEventHandlers(a);DvtChartRenderer._renderScrollbars(a,e,g);DvtChartRenderer._updateTitles(a,b,d,c);DvtChartRenderer._renderPlotArea(a,b,c);DvtChartTypeUtils.isPolar(a)&&b.addChild(a.yAxis);DvtChartRenderer._renderDragButtons(a,
b)}};
DvtChartRenderer._setEventHandlers=function(a){var b=a.getOptions(),c=a.__getEventManager();if(DvtChartTypeUtils.hasAxes(a)&&!DvtChartTypeUtils.isOverview(a)){var d=new DvtRectangle(0,0,a.getWidth(),a.getHeight()),e=a.__getPlotAreaSpace(),g=a.__getAxisSpace(),h=new DvtRectangle(e.x,g.y,e.w,g.h),g=new DvtRectangle(g.x,e.y,g.w,e.h),k=new DvtSolidFill(b.styleDefaults.marqueeColor),m=new DvtSolidStroke(b.styleDefaults.marqueeBorderColor),n;DvtChartEventUtils.isScrollable(a)&&(n=DvtChartEventUtils.isDelayedScroll(a)?DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_FAST:
DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_SLOW,n=new DvtPanZoomHandler(a,e,d,n),n.setPanCursor(b._resources.panCursorUp,b._resources.panCursorDown),c.setPanZoomHandler(n),DvtChartEventUtils.isZoomable(a)&&(n=DvtChartEventUtils.getZoomDirection(a),n=DvtChartTypeUtils.isHorizontal(a)||"y"==n?new DvtMarqueeHandler(a,e,d,k,m,!1,!0,null,g):DvtChartTypeUtils.isBLAC(a)||"x"==n?new DvtMarqueeHandler(a,e,d,k,m,!0,!1,h,null):new DvtMarqueeHandler(a,e,d,k,m,!0,!0,h,g),c.setMarqueeZoomHandler(n)));"multiple"==
b.selectionMode&&(n=new DvtMarqueeHandler(a,e,d,k,m,!0,!0,h,g),c.setMarqueeSelectHandler(n))}};
DvtChartRenderer.rerenderAxisAndPlotArea=function(a,b){if(!DvtChartDataUtils.hasInvalidData(a)){var c=a.__getAxisSpace().clone(),d=a.getSelectionHandler();if(d)var e=d.getSelectedIds();var g=a.__cacheChartFocus();a.__cleanUpAxisAndPlotArea();DvtChartAxisRenderer.render(a,b,c);DvtChartRenderer._adjustAvailSpace(c);a.__setPlotAreaSpace(c.clone());DvtChartRenderer._renderPlotArea(a,b,c);d&&d.processInitialSelections(e,a.getChartObjPeers());a.__getEventManager().autoToggleZoomButton();DvtChartRenderer.positionDragButtons(a);
a.highlight(DvtChartStyleUtils.getHighlightedCategories(a));a.__restoreChartFocus(g)}};DvtChartRenderer._renderBackground=function(a,b,c){c=new DvtRect(a.getCtx(),c.x,c.y,c.w,c.h);c.setInvisibleFill();b.addChild(c);b=DvtChartEventManager.getUIEventParams(DvtChartConstants.BACKGROUND);a.__getEventManager().associate(c,new DvtSimpleObjPeer(null,null,null,b))};
DvtChartRenderer._addOuterGaps=function(a,b){var c=a.getOptions(),d=DvtChartDefaults.getGapWidth(a,c.layout.outerGapWidth),e=DvtChartDefaults.getGapHeight(a,c.layout.outerGapHeight);if("none"==c.styleDefaults.padding||DvtChartTypeUtils.isStandalonePlotArea(a)||DvtChartTypeUtils.isStandaloneXAxis(a)||DvtChartTypeUtils.isStandaloneYAxis(a)||DvtChartTypeUtils.isStandaloneY2Axis(a))d=Math.min(d,1),e=Math.min(e,1);b.x+=d;b.w-=2*d;b.y+=e;b.h-=2*e};
DvtChartRenderer._renderTitles=function(a,b,c){var d=a.getOptions();if(d.title.text){var e=DvtChartTextUtils.createText(a.__getEventManager(),b,d.title.text,d.title.style,c.x,c.y,c.w,c.h,DvtChartEventManager.getUIEventParams(DvtChartConstants.TITLE)),g,h,k=null!=d.title.hAlign?d.title.hAlign:d.title.halign,m="plotArea"==k.substring(0,8);e?(h=e.getDimensions(),g=h.h,e.setAriaProperty("hidden",null)):(g=0,h=new DvtRectangle(0,0,0,0));if(d.subtitle.text){var n=new DvtOutputText(a.getCtx(),d.subtitle.text,
c.x,c.y);if(n){n.setCSSStyle(d.subtitle.style);b.addChild(n);var t=n.measureDimensions(),u=DvtChartDefaults.getGapWidth(a,d.layout.titleSubtitleGapWidth),v=h.w+u+t.w;v>c.w||m?(u=DvtChartDefaults.getGapHeight(a,d.layout.titleSubtitleGapHeight),n.setY(c.y+g+u),DvtTextUtils.fitText(n,c.w,c.h,b)&&(t=n.measureDimensions(),g+=t.h+u,DvtAgent.isRightToLeft(a.getCtx())&&(n&&n.setX(c.w-t.w),e&&e.setX(c.w-h.w)))):(n.setY(h.h-t.h+c.y),e&&(DvtLayoutUtils.align(c,k,e,v),DvtAgent.isRightToLeft(a.getCtx())?(n.setX(e.getX()),
e&&e.setX(e.getX()+t.w+u)):n.setX(e.getX()+v-t.w)));n.setAriaProperty("hidden",null);a.__getEventManager().associate(n,new DvtSimpleObjPeer(n.getUntruncatedTextString(),null,null,DvtChartEventManager.getUIEventParams(DvtChartConstants.SUBTITLE)))}}else DvtLayoutUtils.align(c,k,e,h.w);m&&(a.putToCache("title",e),a.putToCache("subtitle",n));e="on"==d.titleSeparator.rendered?d.layout.titleSeparatorGap:d.layout.titlePlotAreaGap;c.y+=g+DvtChartDefaults.getGapHeight(a,e);c.h-=g+DvtChartDefaults.getGapHeight(a,
e);"on"==d.titleSeparator.rendered&&(g=new DvtLine(a.getCtx(),c.x,c.y,c.x+c.w,c.y),e=new DvtLine(a.getCtx(),c.x,c.y+1,c.x+c.w,c.y+1),g.setSolidStroke(d.titleSeparator.upperColor),e.setSolidStroke(d.titleSeparator.lowerColor),b.addChild(g),b.addChild(e),g=2+DvtChartDefaults.getGapHeight(a,d.layout.titlePlotAreaGap),c.y+=g,c.h-=g)}d.footnote.text&&(b=DvtChartTextUtils.createText(a.__getEventManager(),b,d.footnote.text,d.footnote.style,c.x,0,c.w,c.h,DvtChartEventManager.getUIEventParams(DvtChartConstants.FOOTNOTE)),
g=null!=d.footnote.hAlign?d.footnote.hAlign:d.footnote.halign,e="plotArea"==g.substring(0,8),b&&(h=b.getDimensions(),b.setY(c.y+c.h-h.h),c.h-=h.h+DvtChartDefaults.getGapHeight(a,d.layout.footnoteGap),DvtLayoutUtils.align(c,g,b,h.w),b.setAriaProperty("hidden",null)),e&&a.putToCache("footnote",b))};
DvtChartRenderer._updateTitles=function(a,b,c,d){var e=a.getOptions(),g=null!=e.title.hAlign?e.title.hAlign:e.title.halign,h=null!=e.footnote.hAlign?e.footnote.hAlign:e.footnote.halign,k=e.title.text&&"plotArea"==g.substring(0,8),e=e.footnote.text&&"plotArea"==h.substring(0,8);c.x=d.x;c.w=d.w;if(k){k=a.getFromCache("title");d=a.getFromCache("subtitle");var m=k.getDimensions();DvtChartRenderer._alignTextToPlotArea(b,c,g,k,m.w);d&&(k=d.getDimensions(),DvtChartRenderer._alignTextToPlotArea(b,c,g,d,k.w))}e&&
(a=a.getFromCache("footnote"),g=a.getDimensions(),DvtChartRenderer._alignTextToPlotArea(b,c,h,a,g.w))};DvtChartRenderer._alignTextToPlotArea=function(a,b,c,d,e){DvtTextUtils.fitText(d,b.w,b.h,a)&&("plotAreaStart"==c?DvtLayoutUtils.align(b,"start",d,e):"plotAreaCenter"==c?DvtLayoutUtils.align(b,"center",d,e):"plotAreaEnd"==c&&DvtLayoutUtils.align(b,"end",d,e))};
DvtChartRenderer._renderPlotArea=function(a,b,c){if(DvtChartTypeUtils.hasAxes(a)){var d=new DvtContainer(a.getCtx());d.setTranslate(c.x,c.y);b.addChild(d);a.setPlotArea(d);b=new DvtRectangle(0,0,c.w,c.h);DvtPlotAreaRenderer.render(a,d,b)}else DvtChartTypeUtils.isPie(a)?(d=new DvtPieChart(a,c),0<d.__getSlices().length?(b.addChild(d),a.setPlotArea(d),d.render()):DvtChartRenderer.renderEmptyText(a,b,c)):DvtChartTypeUtils.isFunnel(a)&&DvtFunnelRenderer.render(a,b,c);c.w=0;c.h=0};
DvtChartRenderer.renderEmptyText=function(a,b,c){var d=a.getOptions();if(DvtChartDataUtils.hasInvalidTimeData(a)&&DvtChartDataUtils.hasData(a))var e=DvtBundle.getTranslation(d,"labelInvalidData",DvtBundle.UTIL_PREFIX,"INVALID_DATA");else(e=d.emptyText)||(e=DvtBundle.getTranslation(d,"labelNoData",DvtBundle.UTIL_PREFIX,"NO_DATA"));DvtTextUtils.renderEmptyText(b,e,new DvtRectangle(c.x,c.y,c.w,c.h),a.__getEventManager(),d._statusMessageStyle)};
DvtChartRenderer._prerenderHorizScrollbar=function(a,b,c){var d=c.w,e=0;DvtChartEventUtils.isScrollable(a)&&DvtChartTypeUtils.isHorizScrollbarSupported(a)?DvtChartStyleUtils.isOverviewRendered(a)?(e=Math.min(DvtChartStyleUtils.getOverviewHeight(a),c.h),0<e&&(a.overview=new DvtChartOverview(a),b.addChild(a.overview),DvtLayoutUtils.position(c,"bottom",a.overview,d,e,10))):(e=a.getOptions().styleDefaults._scrollbarHeight,a.xScrollbar=new DvtSimpleScrollbar(a.getCtx(),a.processEvent,a),b.addChild(a.xScrollbar),
DvtLayoutUtils.position(c,"bottom",a.xScrollbar,d,e,8),a.overview=null):a.overview=null;return new DvtDimension(d,e)};
DvtChartRenderer._prerenderVertScrollbar=function(a,b,c){var d=0,e=c.h;if(DvtChartEventUtils.isScrollable(a)&&DvtChartTypeUtils.isVertScrollbarSupported(a)){var d=a.getOptions().styleDefaults._scrollbarHeight,g=new DvtSimpleScrollbar(a.getCtx(),a.processEvent,a);b.addChild(g);DvtLayoutUtils.position(c,DvtAgent.isRightToLeft(a.getCtx())?"right":"left",g,d,e,8);DvtChartTypeUtils.isHorizontal(a)?a.xScrollbar=g:a.yScrollbar=g}return new DvtDimension(d,e)};
DvtChartRenderer._renderScrollbars=function(a,b,c){var d=a.getOptions(),e={color:d.styleDefaults._scrollbarHandleColor,backgroundColor:d.styleDefaults._scrollbarTrackColor},g=a.__getPlotAreaSpace();a.xScrollbar&&(e.min=a.xAxis.getLinearGlobalMin(),e.max=a.xAxis.getLinearGlobalMax(),DvtChartTypeUtils.isHorizontal(a)?(e.isHorizontal=!1,e.isReversed=!1,a.xScrollbar.setTranslateY(g.y),a.xScrollbar.render(e,c.w,g.h)):(e.isHorizontal=!0,e.isReversed=DvtAgent.isRightToLeft(a.getCtx()),a.xScrollbar.setTranslateX(g.x),
a.xScrollbar.render(e,g.w,b.h)),a.xScrollbar.setViewportRange(a.xAxis.getLinearViewportMin(),a.xAxis.getLinearViewportMax()));a.yScrollbar&&(e.min=a.yAxis.getLinearGlobalMin(),e.max=a.yAxis.getLinearGlobalMax(),e.isHorizontal=!1,e.isReversed=!0,a.yScrollbar.setTranslateY(g.y),a.yScrollbar.render(e,c.w,g.h),a.yScrollbar.setViewportRange(a.yAxis.getLinearViewportMin(),a.yAxis.getLinearViewportMax()));a.overview&&(c={startTime:a.xAxis.getLinearGlobalMin(),endTime:a.xAxis.getLinearGlobalMax(),viewportStartTime:a.xAxis.getLinearViewportMin(),
viewportEndTime:a.xAxis.getLinearViewportMax(),minimumWindowSize:a.xAxis.getInfo().getMinimumExtent(),chart:DvtJSONUtils.clone(d)},DvtChartEventUtils.isZoomable(a)||(c.featuresOff="zoom"),c.chart._minOverflowCoord=d._minOverflowCoord-g.x,c.chart._maxOverflowCoord=d._maxOverflowCoord-g.x,a.overview.setTranslateX(g.x),a.overview.render(c,g.w,b.h),a.overview.setViewportRange(a.xAxis.getLinearViewportMin(),a.xAxis.getLinearViewportMax()))};
DvtChartRenderer._positionLegend=function(a,b){if(a){var c=a.getDimensions(),d=a.getOptions().orientation;"vertical"==d&&c.h<=b.h?a.setTranslateY(Math.round(b.y+b.h/2-c.h/2)):"horizontal"==d&&c.w<=b.w&&a.setTranslateX(Math.round(b.x+b.w/2-c.w/2))}};
DvtChartRenderer._renderDragButtons=function(a,b){var c=a.getOptions(),d=a.__getEventManager(),e=c.dragMode;if("user"!=e)"pan"==e?d.setDragMode(DvtChartEventManager.DRAG_MODE_PAN):"zoom"==e?d.setDragMode(DvtChartEventManager.DRAG_MODE_ZOOM):"select"==e?d.setDragMode(DvtChartEventManager.DRAG_MODE_SELECT):d.setDragMode(DvtChartEventManager.DRAG_MODE_OFF);else if(DvtChartTypeUtils.hasAxes(a)&&!DvtChartTypeUtils.isOverview(a)){var e=DvtAgent.isTouchDevice(),g=DvtChartEventUtils.isScrollable(a);a.dragButtons=
new DvtContainer(a.getCtx());var h=c._resources,k;"multiple"==c.selectionMode&&(e||g)&&(k=g&&(e||DvtChartEventUtils.isZoomable(a))?"end":"solo",d.selectButton=DvtChartRenderer._createDragButton(a,a.dragButtons,h.selectUp,h.selectDown,d.onSelectButtonClick,d,k),k=DvtBundle.getTranslation(c,"tooltipSelect",DvtBundle.CHART_PREFIX,"MARQUEE_SELECT"),d.selectButton.setAriaRole("button"),d.selectButton.setAriaProperty("label",k),d.associate(d.selectButton,new DvtSimpleObjPeer(k)));g&&(k=null==d.selectButton?
"solo":"start",e?(d.panButton=DvtChartRenderer._createDragButton(a,a.dragButtons,h.panUp,h.panDown,d.onPanButtonClick,d,k),k=DvtBundle.getTranslation(c,"tooltipPan",DvtBundle.CHART_PREFIX,"PAN"),d.panButton.setAriaRole("button"),d.panButton.setAriaProperty("label",k),d.associate(d.panButton,new DvtSimpleObjPeer(k))):DvtChartEventUtils.isZoomable(a)&&DvtChartTypeUtils.isScatterBubble(a)&&(d.zoomButton=DvtChartRenderer._createDragButton(a,a.dragButtons,h.zoomUp,h.zoomDown,d.onZoomButtonClick,d,k),k=
DvtBundle.getTranslation(c,"tooltipZoom",DvtBundle.CHART_PREFIX,"MARQUEE_ZOOM"),d.associate(d.zoomButton,new DvtSimpleObjPeer(k))));DvtChartRenderer.positionDragButtons(a);d.setDragMode(null);0<a.dragButtons.getNumChildren()&&(a.addChild(a.dragButtons),e?g&&(d.panButton.setToggled(!0),d.onPanButtonClick(null)):a.hideDragButtons(),a.dragButtons.setCursor("default"))}};
DvtChartRenderer._positionDragButton=function(a,b,c){DvtAgent.isRightToLeft(a.getCtx())?(a=c.x+DvtChartRenderer._BUTTON_PADDING,c.x+=DvtChartRenderer._BUTTON_SIZE+2*DvtChartRenderer._BUTTON_PADDING):a=c.x+c.w-DvtChartRenderer._BUTTON_SIZE-DvtChartRenderer._BUTTON_PADDING;c.w-=DvtChartRenderer._BUTTON_SIZE+2*DvtChartRenderer._BUTTON_PADDING;b.setTranslate(a,c.y+DvtChartRenderer._BUTTON_PADDING)};
DvtChartRenderer.positionDragButtons=function(a){var b=a.__getPlotAreaSpace().clone();b.x+=DvtChartRenderer._BUTTON_CORNER_DIST;b.w-=2*DvtChartRenderer._BUTTON_CORNER_DIST;b.y+=DvtChartRenderer._BUTTON_CORNER_DIST;var c=a.__getEventManager();c.selectButton&&DvtChartRenderer._positionDragButton(a,c.selectButton,b);c.panButton&&DvtChartRenderer._positionDragButton(a,c.panButton,b);c.zoomButton&&DvtChartRenderer._positionDragButton(a,c.zoomButton,b)};
DvtChartRenderer._createDragButtonBackground=function(a,b){var c=2,d=2,e=DvtAgent.isRightToLeft(a);"start"==b?e?c=0:d=0:"end"==b&&(e?d=0:c=0);var e=-DvtChartRenderer._BUTTON_PADDING,g=DvtChartRenderer._BUTTON_SIZE+2*DvtChartRenderer._BUTTON_PADDING,c=DvtPathUtils.roundedRectangle(e,e,g,g,c,d,d,c),c=new DvtPath(a,c);1<DvtAgent.getDevicePixelRatio()?(c.setSolidStroke("#D8DEE3",1,1),c.setPixelHinting(!0)):c.setSolidStroke("#B8BDC1",1,1);return c};
DvtChartRenderer._createDragButton=function(a,b,c,d,e,g,h){a=a.getCtx();var k=DvtChartRenderer._createDragButtonBackground(a,h);k.setSolidFill("#FFFFFF",DvtChartRenderer._BUTTON_OPACITY);k.addChild(new DvtImage(a,c,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));var m=DvtChartRenderer._createDragButtonBackground(a,h);m.setSolidFill("#E2E3E4",DvtChartRenderer._BUTTON_OPACITY);m.addChild(new DvtImage(a,c,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));var n=DvtChartRenderer._createDragButtonBackground(a,
h);n.setFill(new DvtLinearGradientFill(90,["#0527CE","#0586F0"],[DvtChartRenderer._BUTTON_OPACITY,DvtChartRenderer._BUTTON_OPACITY]));n.addChild(new DvtImage(a,d,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));c=DvtChartRenderer._createDragButtonBackground(a,h);c.setSolidFill("#0586F0",DvtChartRenderer._BUTTON_OPACITY);c.addChild(new DvtImage(a,d,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));d=new DvtButton(a,k,m,n,null,null,e,g);d.setOverDownState(c);d.setToggleEnabled(!0);
b.addChild(d);d.addEvtListener(DvtMouseEvent.MOUSEDOWN,function(a){a.stopPropagation()});DvtAgent.isTouchDevice()&&(b=DvtAgent.isRightToLeft(a),e=2*DvtChartRenderer._BUTTON_PADDING,h="solo"==h?new DvtRect(a,-e,-e,DvtChartRenderer._BUTTON_SIZE+2*e,DvtChartRenderer._BUTTON_SIZE+2*e):"start"==h&&!b||"end"==h&&b?new DvtRect(a,-e,-e,DvtChartRenderer._BUTTON_SIZE+1.5*e,DvtChartRenderer._BUTTON_SIZE+2*e):new DvtRect(a,-.5*e,-e,DvtChartRenderer._BUTTON_SIZE+1.5*e,DvtChartRenderer._BUTTON_SIZE+2*e),h.setInvisibleFill(),
d.addChild(h));return d};DvtChartRenderer._adjustAvailSpace=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.w=Math.round(a.w);a.h=Math.round(a.h)};
DvtChartRenderer.renderDataCursor=function(a){var b=null,c=a.getOptions(),d=a.__getEventManager();if(DvtChartTooltipUtils.isDataCursorEnabled(a)){b=new DvtDataCursor(a.getCtx(),c.styleDefaults.dataCursor,DvtChartTypeUtils.isHorizontal(a));b.setBehavior(DvtChartTooltipUtils.getDataCursorBehavior(a));a.addChild(b);var e=new DvtDataCursorHandler(a,b);d.setDataCursorHandler(e);a.positionDataCursor(c.dataCursorPosition)}else d.setDataCursorHandler(null);return b};var DvtChartAxisRenderer={};
DvtObj.createSubclass(DvtChartAxisRenderer,DvtObj,"DvtChartAxisRenderer");DvtChartAxisRenderer.render=function(a,b,c){DvtChartTypeUtils.hasAxes(a)&&(DvtChartAxisUtils.applyInitialZooming(a,c),DvtChartTypeUtils.isBubble(a)&&DvtChartMarkerUtils.calcBubbleSizes(a,c.w,c.h),DvtChartTypeUtils.isPolar(a)?DvtChartAxisRenderer._renderPolar(a,b,c):DvtChartAxisRenderer._renderCartesian(a,b,c))};
DvtChartAxisRenderer._renderCartesian=function(a,b,c){var d=a.getOptions(),e=DvtChartTypeUtils.isHorizontal(a),g=DvtChartTypeUtils.isSplitDualY(a),h=c.clone(),k=DvtChartAxisUtils.getYAxisPosition(a),m=DvtChartAxisUtils.getY2AxisPosition(a);DvtChartAxisRenderer._addAxisGaps(a,c);g&&k==m&&(d.yAxis._skipHighestTick=e,d.y2Axis._skipHighestTick=!e);var n=DvtChartAxisRenderer._createYAxis(a,b,c,h),t=DvtChartAxisRenderer._createY2Axis(a,b,c,h);(d=!g&&"on"==d.y2Axis.alignTickMarks&&null==d.y2Axis.step)&&
n&&t&&(DvtChartAxisRenderer._alignYAxes(n,t),e||(t.dim=DvtChartAxisRenderer._getPreferredSize(a,t.axis,a.y2Axis,t.options,"y2",c,h)));var u=DvtChartAxisUtils.getTickLabelGapSize(a,"y"),v=DvtChartAxisUtils.getTickLabelGapSize(a,"y2");g&&k==m?(e?(k=Math.max(n.dim.h+u,t.dim.h+v),n.dim.h=k-u,t.dim.h=k-v):(k=Math.max(n.dim.w+u,t.dim.w+v),n.dim.w=k-u,t.dim.w=k-v),DvtChartAxisRenderer._positionAxis(c.clone(),n,u)):DvtChartAxisRenderer._positionAxis(c,n,u);DvtChartAxisRenderer._positionAxis(c,t,v);k=DvtChartDataUtils.getGroupCount(a);
"pixel"==DvtChartStyleUtils.getBarSpacing(a)&&DvtChartTypeUtils.isBar(a)&&c.w>k&&(k*=Math.floor(c.w/k),c.x+=(c.w-k)/2,c.w=k);b=DvtChartAxisRenderer._createXAxis(a,b,c,h);b.axis.render(b.options,b.dim.w,b.dim.h);DvtChartAxisRenderer._positionAxis(c,b,DvtChartAxisUtils.getTickLabelGapSize(a,"x"));k=DvtChartStyleUtils.getSplitterPosition(a);m=DvtAgent.isRightToLeft(a.getCtx());h=DvtChartAxisRenderer._getSplitAvailSpace(c,k,e,e&&m);k=DvtChartAxisRenderer._getSplitAvailSpace(c,1-k,e,!e||!m);e?(n&&(n.axis.setTranslateX(c.x),
g?n.axis.render(n.options,h.w,n.dim.h,h.x,0):n.axis.render(n.options,c.w,n.dim.h)),d&&n&&t&&DvtChartAxisRenderer._alignYAxes(n,t),t&&(t.axis.setTranslateX(c.x),g?t.axis.render(t.options,k.w,t.dim.h,k.x,0):t.axis.render(t.options,c.w,t.dim.h)),DvtChartAxisRenderer._setOverflow(c,n,b)):(n&&(g?n.axis.render(n.options,n.dim.w,h.h,0,h.y):n.axis.render(n.options,n.dim.w,c.h)),d&&n&&t&&DvtChartAxisRenderer._alignYAxes(n,t),t&&(g?t.axis.render(t.options,t.dim.w,k.h,0,k.y):t.axis.render(t.options,t.dim.w,
c.h)),DvtChartAxisRenderer._setOverflow(c,b,n,t));DvtChartAxisRenderer._storeAxes(a,b,n,t)};DvtChartAxisRenderer._renderPolar=function(a,b,c){var d=DvtChartAxisRenderer._createXAxis(a,b,c,c);d.axis.setTranslateX(c.x);d.axis.setTranslateY(c.y);d.axis.render(d.options,c.w,c.h);b=DvtChartAxisRenderer._createYAxis(a,b,c,c);b.axis.setTranslateX(c.x);b.axis.setTranslateY(c.y);b.axis.render(b.options,c.w,c.h);DvtChartAxisRenderer._storeAxes(a,d,b)};
DvtChartAxisRenderer._createXAxis=function(a,b,c,d){var e=a.getOptions(),g=DvtChartAxisUtils.getXAxisPosition(a),h=DvtJSONUtils.clone(e.xAxis);h.position=g;h.isStandalone=DvtChartTypeUtils.isStandaloneXAxis(a);h.groupSeparators=e.styleDefaults.groupSeparators;DvtChartAxisRenderer._addCommonAxisAttributes(h,"x",a);h.groups=e.groups;h._groupWidthRatios=DvtChartAxisUtils.getGroupWidthRatios(a);h.timeAxisType=DvtChartAxisUtils.getTimeAxisType(a);h._environment=e._environment;h._locale=e._locale;h.drilling=
e.drilling;var k="top"==g||"bottom"==g,m=DvtChartAxisUtils.isGridShifted(a);"tangential"==g&&DvtChartAxisUtils.hasGroupAxis(a)?m?(h.startGroupOffset=.5,h.endGroupOffset=.5):h.endGroupOffset=1:(g=DvtChartAxisUtils.getAxisOffset(a),h.startGroupOffset=g,h.endGroupOffset=g,DvtChartTypeUtils.hasUncenteredSeries(a)&&(h.endGroupOffset+=1),DvtChartEventUtils.isScrollable(a)||DvtChartTypeUtils.isOverview(a)||(g=DvtChartDataUtils.getGroupCount(a),DvtChartAxisUtils.isAxisRendered(a,"y")&&DvtChartAxisUtils.isTickLabelInside(a,
"y")&&(h[(k?"start":"end")+"GroupOffset"]+=.04*g),DvtChartAxisUtils.isAxisRendered(a,"y2")&&DvtChartAxisUtils.isTickLabelInside(a,"y2")&&(h[(k?"end":"start")+"GroupOffset"]+=.04*g)));h.leftBuffer=k?c.x-d.x:0;h.rightBuffer=k?d.w+d.x-(c.w+c.x):0;h._renderGridAtLabels=!m||DvtChartAxisUtils.hasTimeAxis(a);k=new DvtChartAxis(a.getCtx(),a.processEvent,a);b.addChild(k);a=DvtChartAxisRenderer._getPreferredSize(a,k,a.xAxis,h,"x",c,d);h._minOverflowCoord=e._minOverflowCoord-c.x;h._maxOverflowCoord=e._maxOverflowCoord-
c.x;return{axis:k,options:h,dim:a}};
DvtChartAxisRenderer._createYAxis=function(a,b,c,d){var e=a.getOptions();if(DvtChartTypeUtils.hasY2DataOnly(a))return null;var g=DvtJSONUtils.clone(e.yAxis);g.position=DvtChartAxisUtils.getYAxisPosition(a);g.isStandalone=DvtChartTypeUtils.isStandaloneYAxis(a);DvtChartAxisRenderer._addCommonAxisAttributes(g,"y",a);DvtChartAxisRenderer._addCommonYAxisAttributes(g,a);var h=new DvtChartAxis(a.getCtx(),a.processEvent,a);b.addChild(h);b=DvtChartAxisRenderer._getPreferredSize(a,h,a.yAxis,g,"y",c,d);DvtChartAxisRenderer._adjustYAxisForLabels(h,
g,a);e.yAxis.min=g.min;e.yAxis.max=g.max;return{axis:h,options:g,dim:b}};
DvtChartAxisRenderer._createY2Axis=function(a,b,c,d){var e=a.getOptions();if(DvtChartTypeUtils.hasY2Data(a)){var g=DvtJSONUtils.clone(e.y2Axis);g.position=DvtChartAxisUtils.getY2AxisPosition(a);g.isStandalone=DvtChartTypeUtils.isStandaloneY2Axis(a);DvtChartAxisRenderer._addCommonAxisAttributes(g,"y2",a);DvtChartAxisRenderer._addCommonYAxisAttributes(g,a);var h=new DvtChartAxis(a.getCtx(),a.processEvent,a);b.addChild(h);b=DvtChartAxisRenderer._getPreferredSize(a,h,a.y2Axis,g,"y2",c,d);DvtChartAxisRenderer._adjustYAxisForLabels(h,
g,a);e.y2Axis.min=g.min;e.y2Axis.max=g.max;return{axis:h,options:g,dim:b}}};
DvtChartAxisRenderer._addCommonAxisAttributes=function(a,b,c){var d=c.getOptions();a.skin=d.skin;a.tickLabel.position=DvtChartAxisUtils.isTickLabelInside(c,b)?"inside":"outside";a.baselineScaling=DvtChartAxisUtils.getBaselineScaling(c,b);if(DvtChartAxisUtils.isTickLabelInside(c,b)||"tangential"==a.position)a._skipHighestTick=!0;a.zoomAndScroll=DvtChartTypeUtils.isPolar(c)?"off":d.zoomAndScroll;a._isOverview=DvtChartTypeUtils.isOverview(c);"x"==b&&DvtChartAxisUtils.hasGroupAxis(c)||(b=DvtChartDataUtils.getMinMaxValue(c,
b),a.dataMin=null!=a.dataMin?a.dataMin:b.min,a.dataMax=null!=a.dataMax?a.dataMax:b.max);DvtChartTypeUtils.isPolar(c)&&(a.polarGridShape=DvtChartAxisUtils.isGridPolygonal(c)?"polygon":"circle",a._radius=c.getRadius())};
DvtChartAxisRenderer._addCommonYAxisAttributes=function(a,b){a.timeAxisType="disabled";DvtChartEventUtils.isLiveScroll(b)&&DvtChartTypeUtils.isBLAC(b)&&!DvtChartTypeUtils.isPolar(b)&&(a._continuousExtent="on");if(a.isStandalone)a.leftBuffer=0,a.rightBuffer=0;else if(DvtChartTypeUtils.isSplitDualY(b))a.leftBuffer=Infinity,a.rightBuffer=Infinity;else{var c=DvtAgent.isRightToLeft(b.getCtx());a.leftBuffer=c?0:DvtAxis.MINIMUM_AXIS_BUFFER;a.rightBuffer=c?DvtAxis.MINIMUM_AXIS_BUFFER:0}};
DvtChartAxisRenderer._adjustYAxisForLabels=function(a,b,c){var d=c.getOptions(),e=d.styleDefaults.dataLabelPosition;if(DvtChartTypeUtils.hasBarSeries(c)&&"outsideBarEdge"==e){var e=d.styleDefaults.dataLabelStyle,d=a.getInfo(),e=DvtTextUtils.getTextStringHeight(c.getCtx(),e),g=0,g="log"==b.scale?a.getUnboundedValueAt(a.getUnboundedCoordAt(d.getDataMax())-e)-d.getDataMax():Math.abs(d.getViewportMax()-d.getViewportMin())/Math.abs(d.getEndCoord()-d.getStartCoord())*e;DvtChartTypeUtils.isHorizontal(c)&&
(g*=4);d.getDataMin()-d.getGlobalMin()<g&&0>d.getDataMin()&&(b.dataMin-=g);d.getGlobalMax()-d.getDataMax()<g&&0<d.getDataMax()&&(b.dataMax+=g)}};
DvtChartAxisRenderer._getPreferredSize=function(a,b,c,d,e,g,h){var k=d.isStandalone,m=d.position,n="top"==m||"bottom"==m;if("radial"==m||"tangential"==m)return new DvtDimension(0,0);if("off"==d.rendered)return n?new DvtDimension(g.w,0):new DvtDimension(0,g.h);e=DvtChartAxisUtils.getTickLabelGapSize(a,e);if(k)return n?new DvtDimension(g.w,g.h-e):new DvtDimension(g.w-e,g.h);k=d.size;if(null!=k)return n?new DvtDimension(g.w,DvtChartStyleUtils.getSizeInPixels(k,h.h)-e):new DvtDimension(DvtChartStyleUtils.getSizeInPixels(k,
h.w)-e,g.h);if(a.getOptions()._duringAnimation)return n?(b=DvtAgent.isRightToLeft(a.getCtx()),d._startOverflow=b?c.getRightOverflow():c.getLeftOverflow(),d._endOverflow=b?c.getLeftOverflow():c.getRightOverflow(),new DvtDimension(g.w,c.getHeight())):new DvtDimension(c.getWidth(),g.h);c=d.maxSize;return n?b.getPreferredSize(d,g.w,DvtChartStyleUtils.getSizeInPixels(c,h.h)-e):b.getPreferredSize(d,DvtChartStyleUtils.getSizeInPixels(c,h.w)-e,g.h)};
DvtChartAxisRenderer._addAxisGaps=function(a,b){var c=DvtChartTypeUtils.isHorizontal(a),d=DvtChartAxisUtils.getYAxisPosition(a),e=DvtChartAxisUtils.getY2AxisPosition(a),g=DvtChartAxisUtils.isAxisRendered(a,"x"),h=DvtChartAxisUtils.isAxisRendered(a,"y"),k=DvtChartAxisUtils.isAxisRendered(a,"y2"),m=a.getOptions().layout.verticalAxisGap,m=c?m*DvtChartAxisUtils.getGapScalingFactor(a,"x"):m*Math.max(DvtChartAxisUtils.getGapScalingFactor(a,"y"),DvtChartAxisUtils.getGapScalingFactor(a,"y2")),m=Math.ceil(m);
(!c||"top"==d&&h||"top"==e&&k)&&c||(b.y+=m,b.h-=m);(!c||"bottom"==d&&h||"bottom"==e&&k)&&(c||g)||(b.h-=m)};DvtChartAxisRenderer._positionAxis=function(a,b,c){b&&DvtLayoutUtils.position(a,b.options.position,b.axis,b.dim.w,b.dim.h,c)};DvtChartAxisRenderer._alignYAxes=function(a,b){var c=a.axis.getInfo();if(c){var d=c.getMajorTickCount(),c=c.getMinorTickCount(),e=b.options;e._majorTickCount=d;e._minorTickCount=c}};
DvtChartAxisRenderer._getSplitAvailSpace=function(a,b,c,d){var e=a.clone();c?(e.w=a.w*b,e.x=d?a.w*(1-b):0):(e.h=a.h*b,e.y=d?a.h*(1-b):0);return e};DvtChartAxisRenderer._setOverflow=function(a,b,c,d){if(b){var e=b.axis.getLeftOverflow();b=b.axis.getRightOverflow();a.x+=e;a.w-=e+b;c&&c.axis.setTranslateX(c.axis.getTranslateX()+("left"==c.options.position?e:-b));d&&d.axis.setTranslateX(d.axis.getTranslateX()+("left"==d.options.position?e:-b))}};
DvtChartAxisRenderer._storeAxes=function(a,b,c,d){a.xAxis&&(a.xAxis.destroy(),a.removeChild(a.xAxis));a.yAxis&&(a.yAxis.destroy(),a.removeChild(a.yAxis));a.y2Axis&&(a.y2Axis.destroy(),a.removeChild(a.y2Axis));a.xAxis=b.axis;a.yAxis=c?c.axis:null;a.y2Axis=d?d.axis:null};var DvtChartLegendRenderer={};DvtObj.createSubclass(DvtChartLegendRenderer,DvtObj,"DvtChartLegendRenderer");
DvtChartLegendRenderer.render=function(a,b,c){var d=a.getOptions(),e=d.legend.position;if("on"==d.legend.rendered){var g=DvtJSONUtils.clone(d.legend);delete g.position;g.skin=d.skin;g.hideAndShowBehavior=DvtChartEventUtils.getHideAndShowBehavior(a);g.hoverBehavior=DvtChartEventUtils.getHoverBehavior(a);g.hoverBehaviorDelay=DvtChartStyleUtils.getHoverBehaviorDelay(a);g.hiddenCategories=DvtChartStyleUtils.getHiddenCategories(a);g.highlightedCategories=DvtChartStyleUtils.getHighlightedCategories(a);
"auto"==e&&(e=c.w>=c.h?"end":"bottom");var h="top"==e||"bottom"==e;g.orientation=h?"horizontal":"vertical";"start"==e&&(g.halign="end");if("start"==e||"end"==e)g.valign="middle";"top"==e&&(g.valign="bottom");if("top"==e||"bottom"==e)g.halign="center";DvtChartLegendRenderer._addLegendData(a,g);if(0!=g.sections.length){var k=DvtLegend.newInstance(a.getCtx(),a.processEvent,a);null!=a.getId()&&k.setId(a.getId()+"legend");b.addChild(k);var m;if(null!=g.size)m=h?new DvtDimension(c.w,DvtChartStyleUtils.getSizeInPixels(g.size,
c.h)):new DvtDimension(DvtChartStyleUtils.getSizeInPixels(g.size,c.w),c.h);else{m=h?c.w:DvtChartStyleUtils.getSizeInPixels(g.maxSize,c.w);var n=h?DvtChartStyleUtils.getSizeInPixels(g.maxSize,c.h):c.h;m=k.getPreferredSize(g,m,n)}k.render(g,m.w,m.h);g=h?DvtChartDefaults.getGapHeight(a,d.layout.legendGapHeight):DvtChartDefaults.getGapWidth(a,d.layout.legendGapWidth);DvtLayoutUtils.position(c,e,k,m.w,m.h,g);c=k.__getBounds();h=k.localToStage(new DvtPoint(c.x,c.y));c.x=h.x;c.y=h.y;DvtChartTypeUtils.isOverview(a)||
(m=DvtAgent.isRightToLeft(a.getCtx()),"end"==e?m?d._minOverflowCoord=h.x+c.w+g/2:d._maxOverflowCoord=h.x-g/2:"start"==e&&(m?d._maxOverflowCoord=h.x-g/2:d._minOverflowCoord=h.x+c.w+g/2));a.legend&&(a.legend.destroy(),b.removeChild(a.legend));a.legend=k}}};
DvtChartLegendRenderer._addLegendData=function(a,b){var c=DvtChartLegendRenderer._getSeriesItems(a,"vertical"==b.orientation);if(0<c.length){var d=b.seriesSection;d.items=c;b.sections.unshift(d)}c=DvtChartLegendRenderer._getRefObjItems(a);0<c.length&&(d=b.referenceObjectSection,d.items=c,b.referenceObjectTitle&&(d.title=b.referenceObjectTitle),b.sections.push(d))};
DvtChartLegendRenderer._getSeriesItems=function(a,b){var c=[],d,e;if("pie"==a.getType()){for(var g=DvtPieChartUtils.getRenderedSeriesIndices(a),h=0;h<g.length;h++)e=g[h],(d=DvtChartLegendRenderer._createLegendItem(a,e))&&c.push(d);DvtPieChartUtils.hasOtherSeries(a)&&(d={id:DvtPieChartUtils.OTHER_SLICE_SERIES_ID,text:DvtBundle.getTranslation(a.getOptions(),"labelOther",DvtBundle.CHART_PREFIX,"LABEL_OTHER"),categoryVisibility:0<=DvtArrayUtils.getIndex(DvtChartStyleUtils.getHiddenCategories(a),DvtPieChartUtils.OTHER_SLICE_SERIES_ID)?
"hidden":"visible",symbolType:"marker",color:a.getOptions().styleDefaults.otherColor,borderColor:a.getOptions().styleDefaults.borderColor},c.push(d))}else{var g={},h={},k=DvtChartDataUtils.getSeriesCount(a);for(e=0;e<k;e++)if(d=DvtChartLegendRenderer._createLegendItem(a,e)){var m=DvtChartDataUtils.getStackCategory(a,e);DvtChartDataUtils.isAssignedToY2(a,e)?h[m]?h[m].push(d):h[m]=[d]:g[m]?g[m].push(d):g[m]=[d]}d=DvtChartDataUtils.getStackCategories(a,null,!0);e=DvtChartTypeUtils.isStacked(a)&&DvtChartTypeUtils.isVertical(a)&&
b;c=DvtChartLegendRenderer._getSeriesItemsForAxis(g,d.y,e,c);c=DvtChartLegendRenderer._getSeriesItemsForAxis(h,d.y2,e,c)}return c};DvtChartLegendRenderer._getSeriesItemsForAxis=function(a,b,c,d){for(var e,g=0;g<b.length;g++)(e=a[b[g]])&&(d=c?d.concat(e.reverse()):d.concat(e));return d};
DvtChartLegendRenderer._createLegendItem=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b),d=a.getType(),e=DvtChartStyleUtils.getSeriesType(a,b),g=DvtChartStyleUtils.getLineType(a,b),h=c.displayInLegend;if(!c||"off"==h||"on"!=h&&(DvtChartTypeUtils.isFunnel(a)||DvtChartTypeUtils.isStock(a))||"on"!=h&&!DvtChartDataUtils.hasSeriesData(a,b))return null;var k=DvtChartDataUtils.getSeriesLabel(a,b);if("on"!=h&&(!k||0>=k.trim().length))return null;var h=DvtChartDataUtils.getSeries(a,b),m=DvtChartStyleUtils.getHiddenCategories(a),
m=DvtArrayUtils.getIndex(m,h),k={id:h,text:k,categoryVisibility:0<=m?"hidden":"visible"};"line"==e||"lineWithArea"==e||"scatter"==d||"bubble"==d?(k.lineStyle=DvtChartStyleUtils.getLineStyle(a,b),k.lineWidth=DvtChartStyleUtils.getLineWidth(a,b),DvtChartStyleUtils.isMarkerDisplayed(a,b)?(k.symbolType="none"==g?"marker":"lineWithMarker",k.markerShape=DvtChartStyleUtils.getMarkerShape(a,b),k.markerColor=DvtChartStyleUtils.getMarkerColor(a,b)):k.symbolType="line"):(k.symbolType="marker","none"==DvtChartStyleUtils.getLineType(a,
b)&&(k.markerShape=DvtChartStyleUtils.getMarkerShape(a,b)));k.color=DvtChartStyleUtils.getColor(a,b);k.borderColor=DvtChartStyleUtils.getBorderColor(a,b);k.pattern=DvtChartStyleUtils.getPattern(a,b);k.action=c.action;k._spb=a.getShowPopupBehaviors(c._id);k.drilling=DvtChartEventUtils.isSeriesDrillable(a,b)?"on":"off";k.shortDesc=c.shortDesc;return k};
DvtChartLegendRenderer._getRefObjItems=function(a){a=DvtChartRefObjUtils.getRefObjs(a);if(0>=a.length)return[];for(var b=[],c=0;c<a.length;c++){var d=a[c];if(d&&"on"==d.displayInLegend&&d.text){var e=DvtChartRefObjUtils.getType(d);b.push({symbolType:"area"==e?"square":"line",text:d.text,color:DvtChartRefObjUtils.getColor(d),lineStyle:d.lineStyle,lineWidth:DvtChartRefObjUtils.getLineWidth(d),categoryVisibility:d.visibility,shortDesc:d.shortDesc})}}return b};var DvtPlotAreaRenderer={};
DvtObj.createSubclass(DvtPlotAreaRenderer,DvtObj,"DvtPlotAreaRenderer");DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE=16;DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP=4;DvtPlotAreaRenderer._MIN_CHARS_DATA_LABEL=3;DvtPlotAreaRenderer._FILTER_THRESHOLD_SCATTER_BUBBLE=1E4;
DvtPlotAreaRenderer.render=function(a,b,c){"off"==a.getOptions().plotArea.rendered?DvtPlotAreaRenderer._renderAxisLines(a,b,c):0<c.w&&0<c.h&&(a._currentMarkers=[],a._currentAreas=[],DvtPlotAreaRenderer._renderBackgroundObjects(a,b,c),DvtPlotAreaRenderer._renderTicks(a,b,c),DvtPlotAreaRenderer._renderForegroundObjects(a,b,c))};
DvtPlotAreaRenderer._renderBackgroundObjects=function(a,b,c){var d=a.getOptions(),e,g=a.getCtx();if(DvtChartTypeUtils.isPolar(a)){e=c.x+c.w/2;var h=c.y+c.h/2;DvtChartAxisUtils.isGridPolygonal(a)?(e=DvtPolygonUtils.getRegularPolygonPoints(e,h,DvtChartDataUtils.getGroupCount(a),a.getRadius(),0),e=new DvtPolygon(g,e)):e=new DvtCircle(g,e,h,a.getRadius())}else e=new DvtRect(g,c.x,c.y,c.w,c.h);(h=DvtChartStyleUtils.getBackgroundColor(a))?e.setSolidFill(h):e.setInvisibleFill();b.addChild(e);h=DvtChartEventManager.getUIEventParams(DvtChartConstants.PLOT_AREA);
a.__getEventManager().associate(e,new DvtSimpleObjPeer(null,null,null,h));if(d.xAxis.referenceObjects||d.yAxis.referenceObjects||d.y2Axis.referenceObjects)d=DvtPlotAreaRenderer.createClippedGroup(a,b,c),DvtRefObjRenderer.renderBackgroundObjects(a,d,c);DvtChartTypeUtils.isBLAC(a)&&(g=new DvtContainer(g),b.addChild(g),a.__setAreaContainer(g),DvtChartTypeUtils.hasAreaSeries(a)&&DvtPlotAreaRenderer._renderAreas(a,g,c,!1))};
DvtPlotAreaRenderer._renderTicks=function(a,b,c){a.xAxis&&DvtChartAxisUtils.isMinorTickRendered(a,"x")&&DvtPlotAreaRenderer._renderMinorTicks(a,b,a.xAxis,c);a.yAxis&&DvtChartAxisUtils.isMinorTickRendered(a,"y")&&DvtPlotAreaRenderer._renderMinorTicks(a,b,a.yAxis,c);a.y2Axis&&DvtChartAxisUtils.isMinorTickRendered(a,"y2")&&DvtPlotAreaRenderer._renderMinorTicks(a,b,a.y2Axis,c);a.xAxis&&DvtChartAxisUtils.isMajorTickRendered(a,"x")&&DvtPlotAreaRenderer._renderMajorTicks(a,b,a.xAxis,c);a.yAxis&&DvtChartAxisUtils.isMajorTickRendered(a,
"y")&&DvtPlotAreaRenderer._renderMajorTicks(a,b,a.yAxis,c);a.y2Axis&&DvtChartAxisUtils.isMajorTickRendered(a,"y2")&&DvtPlotAreaRenderer._renderMajorTicks(a,b,a.y2Axis,c)};
DvtPlotAreaRenderer._renderAxisLines=function(a,b,c){a.xAxis&&a.yAxis&&DvtChartAxisUtils.isAxisLineRendered(a,"x")&&DvtPlotAreaRenderer._renderAxisLine(a,b,a.xAxis,a.yAxis,c);a.xAxis&&a.y2Axis&&DvtChartAxisUtils.isAxisLineRendered(a,"x")&&(a.yAxis&&!DvtChartTypeUtils.isSplitDualY(a)||DvtPlotAreaRenderer._renderAxisLine(a,b,a.xAxis,a.y2Axis,c));a.yAxis&&a.xAxis&&DvtChartAxisUtils.isAxisLineRendered(a,"y")&&DvtPlotAreaRenderer._renderAxisLine(a,b,a.yAxis,a.xAxis,c);a.y2Axis&&a.xAxis&&DvtChartAxisUtils.isAxisLineRendered(a,
"y2")&&DvtPlotAreaRenderer._renderAxisLine(a,b,a.y2Axis,a.xAxis,c)};DvtPlotAreaRenderer._renderMajorTicks=function(a,b,c,d){DvtPlotAreaRenderer._renderGridlines(a,b,c.getOptions().majorTick,c.getPosition(),c.getMajorTickCoords(),c.getBaselineCoord(),d)};DvtPlotAreaRenderer._renderMinorTicks=function(a,b,c,d){DvtPlotAreaRenderer._renderGridlines(a,b,c.getOptions().minorTick,c.getPosition(),c.getMinorTickCoords(),null,d)};
DvtPlotAreaRenderer._renderAxisLine=function(a,b,c,d,e){c=c.getOptions();var g=c.position,g="bottom"==g||"right"==g||"tangential"==g?d.getMaxCoord():d.getMinCoord();DvtPlotAreaRenderer._renderGridlines(a,b,c.axisLine,d.getPosition(),[g],null,e)};
DvtPlotAreaRenderer._renderGridlines=function(a,b,c,d,e,g,h){var k=c.lineColor,m=new DvtSolidStroke(k,1,c.lineWidth);c.lineStyle&&m.setStyle(DvtStroke.convertTypeString(c.lineStyle));var n=m.clone();"inherit"!=c.baselineColor&&(k="auto"==c.baselineColor?DvtColorUtils.getDarker(k,.4):c.baselineColor,n.setColor(k));n.setWidth(null!=c.baselineWidth?c.baselineWidth:c.lineWidth);n.setStyle(DvtStroke.convertTypeString(c.baselineStyle?c.baselineStyle:c.lineStyle));for(c=0;c<e.length;c++)DvtPlotAreaRenderer._renderGridline(a,
b,d,e[c],null!=g&&e[c]==g?n:m,h)};
DvtPlotAreaRenderer._renderGridline=function(a,b,c,d,e,g){var h;h=b.getCtx();var k=!DvtAgent.isTouchDevice()||1<DvtAgent.getDevicePixelRatio();"radial"==c?(DvtChartAxisUtils.isGridPolygonal(a)?(d=DvtPolygonUtils.getRegularPolygonPoints(0,0,DvtChartDataUtils.getGroupCount(a),d,0),h=new DvtPolygon(h,d)):h=new DvtCircle(h,0,0,d),h.setInvisibleFill(),h.setTranslate(g.x+g.w/2,g.y+g.h/2)):"tangential"==c?(h=new DvtLine(h,0,0,a.getRadius()*Math.sin(d),-a.getRadius()*Math.cos(d)),.01>d%Math.PI/2&&k&&h.setPixelHinting(!0),
h.setTranslate(g.x+g.w/2,g.y+g.h/2)):(h="top"==c||"bottom"==c?new DvtLine(h,d,g.y,d,g.y+g.h):new DvtLine(h,g.x,d,g.x+g.w,d),k&&h.setPixelHinting(!0));h.setStroke(e);h.setMouseEnabled(!1);b.addChild(h)};
DvtPlotAreaRenderer._renderForegroundObjects=function(a,b,c){var d=DvtChartTypeUtils.isBLAC(a),e=DvtChartTypeUtils.hasBarSeries(a),g=DvtChartTypeUtils.hasLineSeries(a),h=DvtChartTypeUtils.hasCandlestickSeries(a),k=DvtChartTypeUtils.hasLineWithAreaSeries(a),m=d&&e&&!g&&!k&&!DvtChartTypeUtils.isPolar(a);m||DvtPlotAreaRenderer._renderAxisLines(a,b,c);var n=DvtPlotAreaRenderer.createClippedGroup(a,b,c);d?(k&&DvtPlotAreaRenderer._renderAreas(a,b,c,!0),e&&DvtPlotAreaRenderer._renderBars(a,n,c),g&&DvtPlotAreaRenderer._renderLines(a,
b,n,c),h&&DvtPlotAreaRenderer._renderStock(a,n,c),m&&DvtPlotAreaRenderer._renderAxisLines(a,b,c)):DvtChartTypeUtils.isScatterBubble(a)&&DvtPlotAreaRenderer._renderScatterBubble(a,b,n,!0,c);d=a.getOptions();if(d.xAxis.referenceObjects||d.yAxis.referenceObjects||d.y2Axis.referenceObjects)n=DvtPlotAreaRenderer.createClippedGroup(a,b,c),DvtRefObjRenderer.renderForegroundObjects(a,n,c);b=DvtChartDataUtils.getInitialSelection(a);DvtChartEventUtils.setInitialSelection(a,b);a.highlight(DvtChartStyleUtils.getHighlightedCategories(a))};
DvtPlotAreaRenderer._renderDataLabel=function(a,b,c,d,e,g,h){if(!DvtChartTypeUtils.isOverview(a)){var k=DvtChartDataUtils.getDataLabel(a,d,e,h);if(null!=k){var m=DvtChartStyleUtils.getDataLabelPosition(a,d,e,h);if("none"!=m){k=new DvtOutputText(a.getCtx(),k,0,0);k.setMouseEnabled(!1);g=DvtChartStyleUtils.getDataLabelStyle(a,d,e,g,m,h);k.setCSSStyle(g);k.setY(c.y+c.h/2);k.setX(c.x+c.w/2);k.alignCenter();k.alignMiddle();g=k.measureDimensions();if("left"==m)k.setX(c.x-g.w/2-DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP);
else if("right"==m)k.setX(c.x+c.w+g.w/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP);else if("top"==m)k.setY(c.y-g.h/2);else if("bottom"==m)k.setY(c.y+c.h+g.h/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP/2);else{if("bar"==DvtChartStyleUtils.getSeriesType(a,d)){if(g.w>c.w||g.h>c.h)return;"inLeft"==m?k.setX(c.x+g.w/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):"inRight"==m?k.setX(c.x+c.w-g.w/2-DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):"inTop"==m?k.setY(c.y+g.h/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):
"inBottom"==m&&k.setY(c.y+c.h-g.h/2-DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP/2)}else if(DvtChartTypeUtils.isBubble(a)&&(c.x+=DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP,c.y+=DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP,c.h-=2*DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP,c.w-=2*DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP,m=k.getOptimalFontSize(c),k.setFontSize(m),!DvtTextUtils.fitText(k,c.w,c.h,b,DvtPlotAreaRenderer._MIN_CHARS_DATA_LABEL)))return;null!=DvtChartStyleUtils.getPattern(a,d,e)&&(g=k.getDimensions(),
c=.15*g.h,c=DvtPathUtils.roundedRectangle(g.x-c,g.y,g.w+2*c,g.h,2,2,2,2),c=new DvtPath(a.getCtx(),c),c.setSolidFill("#FFFFFF",.9),b.addChild(c))}DvtChartStyleUtils.optimizeMarkerStroke(a)&&k.setSolidStroke("none");b.addChild(k);a.addDataLabel(k)}}}};
DvtPlotAreaRenderer._renderDataLabelForMarker=function(a,b,c){var d=a.__getEventManager().getLogicalObject(c),e=d.getSeriesIndex(),d=d.getGroupIndex();if(c instanceof DvtSimpleMarker){var g=new DvtRectangle(c.getCx()-c.getWidth()/2,c.getCy()-c.getHeight()/2,c.getWidth(),c.getHeight());DvtPlotAreaRenderer._renderDataLabel(a,b,g,e,d,c.getDataColor())}else c instanceof DvtChartRangeMarker&&(DvtPlotAreaRenderer._renderDataLabel(a,b,c.getBoundingBox1(),e,d,c.getDataColor(),"low"),DvtPlotAreaRenderer._renderDataLabel(a,
b,c.getBoundingBox2(),e,d,c.getDataColor(),"high"))};
DvtPlotAreaRenderer._renderScatterBubble=function(a,b,c,d,e){DvtPlotAreaRenderer._filterScatterBubble(a,d,e);for(var g=DvtChartStyleUtils.getMarkerBorderColor(a),h=DvtChartStyleUtils.getBorderWidth(a),g=new DvtSolidStroke(g,null,h),h=[],k=DvtChartDataUtils.getSeriesCount(a),m=0;m<k;m++){"none"!=DvtChartStyleUtils.getLineType(a,m)&&DvtPlotAreaRenderer._renderLinesForSeries(a,c,m,e);var n=DvtPlotAreaRenderer._getMarkersForSeries(a,m,e,g),h=h.concat(n)}d&&DvtChartMarkerUtils.sortMarkers(h);DvtChartTypeUtils.isBubble(a)?
DvtPlotAreaRenderer._addMarkersToContainer(a,c,h,g):DvtPlotAreaRenderer._addMarkersToContainer(a,b,h,g)};DvtPlotAreaRenderer._renderMarkersForSeries=function(a,b,c,d){var e=DvtChartStyleUtils.getMarkerBorderColor(a,c),g=DvtChartStyleUtils.getBorderWidth(a,c),e=new DvtSolidStroke(e,null,g);c=DvtChartStyleUtils.isRangeSeries(a,c)?DvtPlotAreaRenderer._getRangeMarkersForSeries(a,c,d):DvtPlotAreaRenderer._getMarkersForSeries(a,c,d,e);DvtPlotAreaRenderer._addMarkersToContainer(a,b,c,e)};
DvtPlotAreaRenderer._addMarkersToContainer=function(a,b,c,d){var e=b;DvtChartStyleUtils.optimizeMarkerStroke(a)&&(e=new DvtContainer(a.getCtx()),e.setStroke(d),b.addChild(e));for(b=0;b<c.length;b++)e.addChild(c[b]),DvtPlotAreaRenderer._renderDataLabelForMarker(a,e,c[b]);a._currentMarkers.push(c)};
DvtPlotAreaRenderer._getMarkerInfo=function(a,b,c,d){var e=a.getOptions(),g=DvtChartDataUtils.getValue(a,b,c);if(null==g||isNaN(g)||DvtPlotAreaRenderer._isDataItemFiltered(a,b,c))return null;var h=DvtChartDataUtils.getGroupCount(a),g=DvtChartStyleUtils.isMarkerDisplayed(a,b,c);if(!g)if(a.getSkin()!=DvtCSSStyle.SKIN_NEXT&&DvtChartAxisUtils.isMixedFrequency(a))2>h&&(g=!0);else{var k=h-1,m=DvtChartTypeUtils.isPolar(a),h=m&&0<k&&c==k?0:c+1,k=DvtChartDataUtils.getValue(a,b,m&&0<k&&0==c?k:c-1),h=DvtChartDataUtils.getValue(a,
b,h);null!=k&&!isNaN(k)||null!=h&&!isNaN(h)||(g=!0)}if(!g&&(DvtChartTypeUtils.isSpark(a)||(e._duringAnimation||DvtChartTypeUtils.isOverview(a))&&!DvtChartDataUtils.isDataSelected(a,b,c))||!DvtChartDataUtils.isMarkerInViewport(a,b,c,d))return null;d=DvtChartDataUtils.getMarkerPosition(a,b,c,d);if(!d)return null;e=DvtChartStyleUtils.getMarkerShape(a,b,c);a=DvtChartStyleUtils.getMarkerSize(a,b,c);return{seriesIndex:b,groupIndex:c,x:d.x,y:d.y,shape:e,size:a,markerDisplayed:g}};
DvtPlotAreaRenderer._getMarkersForSeries=function(a,b,c,d){if(!DvtChartStyleUtils.isSeriesRendered(a,b))return[];var e=DvtAgent.isTouchDevice(),g=a.getCtx(),h=DvtChartStyleUtils.optimizeMarkerStroke(a),k=h?d.getColor():null;d=h?d.getWidth():null;for(var m=[],n=DvtChartDataUtils.getGroupCount(a),t=0;t<n;t++){var u=DvtPlotAreaRenderer._getMarkerInfo(a,b,t,c);if(u){var v=null,w=DvtChartStyleUtils.getMarkerColor(a,b,t);if(u.markerDisplayed){v=new DvtSimpleMarker(g,u.shape,a.getSkin(),u.x,u.y,u.size,u.size);
DvtChartStyleUtils.isSelectable(a,b,t)&&v.setCursor(DvtSelectionEffectUtils.getSelectingCursor());v.setFill(DvtChartSeriesEffectUtils.getMarkerFill(a,b,t));var x=DvtChartStyleUtils.getMarkerBorderColor(a,b,t),y=DvtChartStyleUtils.getBorderWidth(a,b,t);x==k&&y==d||v.setSolidStroke(x,null,y);v.setDataColor(w,!0);w=DvtSelectionEffectUtils.getHoverBorderColor(w);x=DvtChartStyleUtils.getSelectedInnerColor(a);y=DvtChartStyleUtils.getSelectedOuterColor(a);v.setHoverStroke(new DvtSolidStroke(x,1,1),new DvtSolidStroke(w,
1,3.5));v.setSelectedStroke(new DvtSolidStroke(x,1,1.5),new DvtSolidStroke(y,1,4.5));v.setSelectedHoverStroke(new DvtSolidStroke(x,1,1.5),new DvtSolidStroke(w,1,4.5));e&&u.size<DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE&&DvtPlotAreaRenderer._addMarkerHitArea(v,u.x,u.y,h)}else DvtChartStyleUtils.isSelectable(a,b,t)?(v=new DvtChartLineMarker(g,u.shape,u.x,u.y,u.size,h),v.setCursor(DvtSelectionEffectUtils.getSelectingCursor()),e&&DvtPlotAreaRenderer._addMarkerHitArea(v,u.x,u.y,h)):(e&&(u.size=DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE),
v=new DvtChartLineMarker(g,DvtSimpleMarker.SQUARE,u.x,u.y,u.size,h)),null!=v&&(v.setInvisibleFill(),v.setDataColor(w));null!=v&&(m.push(v),DvtChartObjPeer.associate(v,a,b,t,u))}}return m};DvtPlotAreaRenderer._addMarkerHitArea=function(a,b,c,d){b=new DvtRect(a.getCtx(),b-DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE/2,c-DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE/2,DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE,DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE);d&&b.setSolidStroke("none");b.setInvisibleFill();a.addChild(b)};
DvtPlotAreaRenderer._getRangeMarkersForSeries=function(a,b,c){if(!DvtChartStyleUtils.isSeriesRendered(a,b))return[];for(var d=DvtAgent.isTouchDevice(),e=a.getCtx(),g=a.xAxis,h=DvtChartDataUtils.isAssignedToY2(a,b)?a.y2Axis:a.yAxis,k=a.getOptions(),m=DvtChartDataUtils.getGroupCount(a),n=[],t=0;t<m;t++)if(!DvtPlotAreaRenderer._isDataItemFiltered(a,b,t)&&DvtChartStyleUtils.isDataItemRendered(a,b,t)){var u=g.getCoordAt(DvtChartDataUtils.getXValue(a,b,t)),v=h.getUnboundedCoordAt(DvtChartDataUtils.getLowValue(a,
b,t)),w=h.getUnboundedCoordAt(DvtChartDataUtils.getHighValue(a,b,t));if(null!=u&&null!=v&&null!=w){var x=DvtChartStyleUtils.isMarkerDisplayed(a,b,t);if(!x){var y=m-1,z=DvtChartTypeUtils.isPolar(a),A=z&&0<y&&0==t?y:t-1,B=z&&0<y&&t==y?0:t+1,y=DvtChartDataUtils.getLowValue(a,b,A),z=DvtChartDataUtils.getHighValue(a,b,A),B=DvtChartDataUtils.getLowValue(a,b,B),A=DvtChartDataUtils.getHighValue(a,b,A);null==y&&null==z&&null==B&&null==A&&(x=!0)}if(!(k._duringAnimation||DvtChartTypeUtils.isOverview(a)||DvtChartTypeUtils.isSpark(a))||
x||DvtChartDataUtils.isDataSelected(a,b,t)){var v=DvtPlotAreaRenderer.convertAxisCoord(a,new DvtPoint(u,v),c),A=DvtPlotAreaRenderer.convertAxisCoord(a,new DvtPoint(u,w),c),u=new DvtPoint((v.x+A.x)/2,(v.y+A.y)/2),w=DvtChartStyleUtils.getMarkerSize(a,b,t),x=new DvtChartRangeMarker(e,v.x,v.y,A.x,A.y,w,!x),y=DvtChartSeriesEffectUtils.getMarkerFill(a,b,t),z=DvtChartStyleUtils.getMarkerBorderColor(a,b,t),B=DvtChartStyleUtils.getBorderWidth(a,b,t),z=new DvtSolidStroke(z,null,B),B=DvtChartStyleUtils.getMarkerColor(a,
b,t),D=DvtChartStyleUtils.getSelectedInnerColor(a),C=DvtChartStyleUtils.getSelectedOuterColor(a);x.setStyleProperties(y,z,B,D,C);DvtChartStyleUtils.isSelectable(a,b,t)&&x.setCursor(DvtSelectionEffectUtils.getSelectingCursor());v=new DvtLine(e,v.x,v.y,A.x,A.y);v.setSolidStroke("rgba(0,0,0,0)",null,d?Math.max(w,DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE):w);x.addChild(v);n.push(x);DvtChartObjPeer.associate(x,a,b,t,u)}}}return n};
DvtPlotAreaRenderer._renderBars=function(a,b,c){for(var d=DvtChartTypeUtils.isHorizontal(a),e=DvtChartTypeUtils.isPolar(a),g=DvtChartTypeUtils.isStock(a),h="pixel"==DvtChartStyleUtils.getBarSpacing(a),k=DvtAgent.isRightToLeft(a.getCtx()),m=0;m<DvtChartDataUtils.getGroupCount(a);m++)for(var n=0;n<DvtChartDataUtils.getSeriesCount(a);n++)if(DvtChartDataUtils.isBLACItemInViewport(a,n,m)&&"bar"==DvtChartStyleUtils.getSeriesType(a,n)){var t=DvtChartDataUtils.getBarInfo(a,n,m,c);if(null!=t){var u=t.yCoord,
v=t.baseCoord,w=t.axisCoord,x=t.x1,y=t.x2,z=t.barWidth,A=!1;1>Math.abs(u-v)&&(DvtChartStyleUtils.isRangeSeries(a,n)?u--:(A=!0,u=u>v||d&&!k&&u==v?v+3:v-3));u=e?new DvtChartPolarBar(a,w,v,u,x,y,c):new DvtChartBar(a,w,v,u,x,y);b.addChild(u);DvtChartStyleUtils.isSelectable(a,n,m)&&u.setCursor(DvtSelectionEffectUtils.getSelectingCursor());v=null;A?z=DvtSolidFill.invisibleFill():(z=DvtChartSeriesEffectUtils.getBarFill(a,n,m,d,z),A=DvtChartStyleUtils.getBorderColor(a,n,m),w=DvtChartStyleUtils.getBorderWidth(a,
n,m),A&&(v=new DvtSolidStroke(A,null,w)));A=DvtChartStyleUtils.getColor(a,n,m);w=DvtChartStyleUtils.getSelectedInnerColor(a);x=DvtChartStyleUtils.getSelectedOuterColor(a);u.setStyleProperties(z,v,A,w,x);h&&u.setPixelHinting(!0);DvtChartObjPeer.associate(u,a,n,m,t.dataPos);DvtChartStyleUtils.isRangeSeries(a,n)?(DvtPlotAreaRenderer._renderDataLabel(a,b,u.getBoundingBox(),n,m,A,"low"),DvtPlotAreaRenderer._renderDataLabel(a,b,u.getBoundingBox(),n,m,A,"high")):DvtPlotAreaRenderer._renderDataLabel(a,b,
u.getBoundingBox(),n,m,A);t=[];t.push(u);g&&0!=n||a._currentMarkers.push(t)}}};
DvtPlotAreaRenderer._renderStock=function(a,b,c){c=a.getOptions();var d=a.xAxis,e=a.yAxis;if("candlestick"==DvtChartStyleUtils.getSeriesType(a,0))for(var g=0;g<DvtChartDataUtils.getGroupCount(a);g++)if(DvtChartDataUtils.isBLACItemInViewport(a,0,g)){var h=DvtChartDataUtils.getXValue(a,0,g),k=DvtChartDataUtils.getDataItem(a,0,g),m,n,t,u=null;k&&(m=k.open,n=k.close,t=k.low,u=k.high);var v=null!=t&&null!=u;if(null!=m&&null!=n){var h=d.getUnboundedCoordAt(h),w=DvtChartStyleUtils.getBarWidth(a,0,g),k=e.getBoundedCoordAt(m),
x=e.getBoundedCoordAt(n),y,z=null;v&&(y=e.getBoundedCoordAt(t),z=e.getBoundedCoordAt(u));u=new DvtChartCandlestick(a.getCtx(),h,w,k,x,y,z);b.addChild(u);DvtChartStyleUtils.isSelectable(a,0,g)&&u.setCursor(DvtSelectionEffectUtils.getSelectingCursor());var v=DvtChartSeriesEffectUtils.getBarFill(a,0,g,!1,w),w=null,z=DvtChartStyleUtils.getBorderColor(a,0,g),A=DvtChartStyleUtils.getBorderWidth(a,0,g);z?w=new DvtSolidStroke(z,null,A):v instanceof DvtPatternFill&&(w=new DvtSolidStroke(v.getColor(),null,
A));var z=DvtChartStyleUtils.getColor(a,0,g),A=DvtChartStyleUtils.getSelectedInnerColor(a),B=DvtChartStyleUtils.getSelectedOuterColor(a),D=c.styleDefaults.stockRangeColor;u.setChangeStyle(v,w,z,A,B);u.setRangeStyle(new DvtSolidFill(D),w,D,B);h=new DvtPoint(h,(k+x)/2);DvtChartObjPeer.associate(u,a,0,g,h);h=[];h.push(u._changeShape);a._currentMarkers.push(h)}}};
DvtPlotAreaRenderer._renderLines=function(a,b,c,d){var e=[],g,h=DvtChartDataUtils.getSeriesCount(a);for(g=0;g<h;g++)DvtChartStyleUtils.isSeriesRendered(a,g)&&"line"==DvtChartStyleUtils.getSeriesType(a,g)&&e.push(g);for(h=0;h<e.length;h++)g=e[h],"none"!=DvtChartStyleUtils.getLineType(a,g)&&(DvtChartTypeUtils.isPolar(a)||DvtPlotAreaRenderer._filterPointsForSeries(a,g),DvtPlotAreaRenderer._renderLinesForSeries(a,c,g,d));for(h=0;h<e.length;h++)DvtPlotAreaRenderer._renderMarkersForSeries(a,b,e[h],d)};
DvtPlotAreaRenderer._renderAreas=function(a,b,c,d){for(var e=DvtChartDataUtils.getSeriesCount(a),g=d?"lineWithArea":"area",h=[],k=[],m=0;m<e;m++)DvtChartStyleUtils.isSeriesRendered(a,m)&&DvtChartStyleUtils.getSeriesType(a,m)==g&&(DvtChartDataUtils.isAssignedToY2(a,m)?k.push(m):h.push(m));0<h.length&&DvtPlotAreaRenderer._renderAreasForAxis(a,b,h,a.yAxis.getBaselineCoord(),c,d);0<k.length&&DvtPlotAreaRenderer._renderAreasForAxis(a,b,k,a.y2Axis.getBaselineCoord(),c,d)};
DvtPlotAreaRenderer._renderAreasForAxis=function(a,b,c,d,e,g){for(var h=DvtChartTypeUtils.isStacked(a),k=DvtChartTypeUtils.isPolar(a),m=DvtPlotAreaRenderer.createClippedGroup(a,b,e),n={},t={},u={},v={},w=[],x=DvtChartDataUtils.getGroupCount(a),y=0;y<x;y++)w.push(new DvtChartCoord(null,d,d,y,DvtChartDataUtils.getGroup(a,y),!0));for(x=0;x<c.length;x++){var y=c[x],z=DvtChartDataUtils.getStackCategory(a,y),A=DvtChartDataUtils.isSeriesNegative(a,y),B=n[z],D=t[z],C=u[z],G=v[z];if("none"==DvtChartStyleUtils.getLineType(a,
y))DvtPlotAreaRenderer._renderMarkersForSeries(a,b,y,e);else{var F=DvtChartSeriesEffectUtils.getAreaFill(a,y),E=DvtChartStyleUtils.getBorderColor(a,y),I=DvtChartStyleUtils.getBorderWidth(a,y),K=E?new DvtSolidStroke(E,null,I):null,I=DvtChartStyleUtils.getLineType(a,y);k||DvtPlotAreaRenderer._filterPointsForSeries(a,y);var J;DvtChartStyleUtils.isRangeSeries(a,y)?(J=DvtPlotAreaRenderer._getCoordsForSeries(a,y,e,"high"),B=DvtPlotAreaRenderer._getCoordsForSeries(a,y,e,"low"),D=I):A?(J=DvtPlotAreaRenderer._getAreaCoordsForSeries(a,
y,e,C?C:w),B=C?C:[],D=G):(J=DvtPlotAreaRenderer._getAreaCoordsForSeries(a,y,e,B?B:w),B=B?B:[]);F=new DvtChartLineArea(a,!0,e,d,F,K,I,J,D,B);m.addChild(F);a._currentAreas.push(F);DvtChartObjPeer.associate(F,a,y);A?(u[z]=J,v[z]=I):(n[z]=J,t[z]=I);h||((g||0<DvtChartStyleUtils.getDataItemGaps(a)&&!E)&&DvtPlotAreaRenderer._renderLinesForSeries(a,m,y,e,!g),g||DvtPlotAreaRenderer._renderMarkersForSeries(a,b,y,e),x+1<c.length&&(m=DvtPlotAreaRenderer.createClippedGroup(a,b,e)))}}for(x=0;x<c.length;x++)y=c[x],
"none"!=DvtChartStyleUtils.getLineType(a,y)&&(d=DvtChartStyleUtils.getBorderColor(a,y)||DvtChartStyleUtils.getBorderColor(a,y+1),h&&(g||0<DvtChartStyleUtils.getDataItemGaps(a)&&!d)&&DvtPlotAreaRenderer._renderLinesForSeries(a,m,y,e,!g),(h||g)&&DvtPlotAreaRenderer._renderMarkersForSeries(a,b,y,e))};
DvtPlotAreaRenderer._getAreaCoordsForSeries=function(a,b,c,d){b=DvtPlotAreaRenderer._getCoordsForSeries(a,b,c);c=[];for(var e=0;e<d.length;e++)c.push(d[e].clone());d=b.length-1;a=DvtChartTypeUtils.isPolar(a);for(e=0;e<b.length;e++)if(null!=b[e].x){var g=c[b[e].groupIndex],h=a&&0==e?d:e-1,k=a&&e==d?0:e+1;0<=h&&null!=b[h].x&&(g.y1=b[e].y1);k<=d&&null!=b[k].x&&(g.y2=b[e].y2);g.x=b[e].x;g.filtered=g.y1==g.y2?b[e].filtered:!1}return c};
DvtPlotAreaRenderer._renderLinesForSeries=function(a,b,c,d,e){var g;if(e)e=2.5*DvtChartStyleUtils.getDataItemGaps(a),g=new DvtSolidStroke(DvtChartStyleUtils.getBackgroundColor(a,!0),1,e);else{e=DvtChartStyleUtils.getColor(a,c);var h=DvtChartStyleUtils.getLineWidth(a,c),k=DvtStroke.convertTypeString(DvtChartStyleUtils.getLineStyle(a,c));g=new DvtSolidStroke(e,1,h);g.setStyle(k)}var m=DvtChartDataUtils.isAssignedToY2(a,c)?a.y2Axis.getBaselineCoord():a.yAxis.getBaselineCoord(),n=DvtChartStyleUtils.getLineType(a,
c);e=function(e){e=DvtPlotAreaRenderer._getCoordsForSeries(a,c,d,e);e=new DvtChartLineArea(a,!1,d,m,null,g,n,e);b.addChild(e);DvtChartObjPeer.associate(e,a,c)};DvtChartStyleUtils.isRangeSeries(a,c)?(e("high"),e("low")):e("value")};
DvtPlotAreaRenderer._filterScatterBubble=function(a,b,c){var d=DvtChartDataUtils.getSeriesCount(a),e=DvtChartDataUtils.getGroupCount(a);if(!(d*e<DvtPlotAreaRenderer._FILTER_THRESHOLD_SCATTER_BUBBLE)){for(var g,h=[],k=0;k<d;k++)if(DvtChartStyleUtils.isSeriesRendered(a,k))for(var m=0;m<e;m++)g=DvtPlotAreaRenderer._getMarkerInfo(a,k,m,c),null!=g&&h.push(g);if(!(h.length<DvtPlotAreaRenderer._FILTER_THRESHOLD_SCATTER_BUBBLE)){b&&DvtChartMarkerUtils.sortMarkers(h);b=new DvtPixelMap(25,new DvtPixelMap(5,
new DvtPixelMap));for(c=h.length-1;0<=c;c--)g=h[c],d=DvtChartStyleUtils.getColor(a,g.seriesIndex,g.groupIndex),d=g.markerDisplayed?DvtColorUtils.getAlpha(d):0,e=DvtChartDataUtils.getDataItem(a,g.seriesIndex,g.groupIndex),DvtChartMarkerUtils.checkPixelMap(b,g.x,g.y,g.size)?e._filtered=!0:0<d&&(DvtChartMarkerUtils.updatePixelMap(b,g.x,g.y,g.size,d),e._filtered=!1);a.putToCache("dataFiltered",!0)}}};
DvtPlotAreaRenderer._filterPointsForSeries=function(a,b){var c=a.__getPlotAreaSpace().w,d=DvtChartDataUtils.getSeriesItem(a,b).items,e=a.xAxis.getInfo(),e=(e.getDataMax()-e.getDataMin())/(e.getViewportMax()-e.getViewportMin()),c=Math.round(d.length/e*2/c);if(2>=c)for(e=0;e<d.length;e++)(n=d[e])&&(n._filtered=!1);else{for(var g,h,k,m,n,t,u=!1,e=0;e<d.length;e+=c){g=-1;h=-Infinity;k=-1;m=Infinity;for(var v=e;v<Math.min(e+c,d.length);v++)t=DvtChartDataUtils.getValue(a,b,v),n=d[v],null!=t&&null!=n&&(t>
h&&(g=v,h=t),t<m&&(k=v,m=t),u=n._filtered=!0);for(v=e;v<Math.min(e+c,d.length);v++)n=d[v],null==n||v!=g&&v!=k||(n._filtered=!1)}a.putToCache("dataFiltered",u)}};DvtPlotAreaRenderer._isDataItemFiltered=function(a,b,c){return(a=DvtChartDataUtils.getDataItem(a,b,c))&&a._filtered?!0:!1};
DvtPlotAreaRenderer._getCoordsForSeries=function(a,b,c,d){c=a.xAxis;var e=a.yAxis;DvtChartDataUtils.isAssignedToY2(a,b)&&(e=a.y2Axis);for(var g=[],h=0;h<DvtChartDataUtils.getGroupCount(a);h++){var k=DvtChartDataUtils.getGroup(a,h),m=DvtChartDataUtils.getValue(a,b,h),n=DvtChartDataUtils.getXValue(a,b,h),t=null;"low"==d?t=DvtChartDataUtils.getLowValue(a,b,h):"high"==d?t=DvtChartDataUtils.getHighValue(a,b,h):null==m||isNaN(m)||(t=DvtChartDataUtils.getCumulativeValue(a,b,h));null==t||isNaN(t)||!DvtChartDataUtils.isBLACItemInViewport(a,
b,h)?g.push(new DvtChartCoord(null,null,null,h,k,!1)):(DvtChartTypeUtils.isPolar(a)&&(t=Math.max(t,e.getInfo().getViewportMin())),m=c.getUnboundedCoordAt(n),t=e.getUnboundedCoordAt(t),k=new DvtChartCoord(m,t,t,h,k,DvtPlotAreaRenderer._isDataItemFiltered(a,b,h)),g.push(k))}return g};
DvtPlotAreaRenderer.createClippedGroup=function(a,b,c){var d=new DvtContainer(b.getCtx());b.addChild(d);b=new DvtClipPath(a.getId());var e=DvtPlotAreaRenderer._extendClipGroup(a);DvtChartTypeUtils.isPolar(a)?(e=c.x+c.w/2,c=c.y+c.h/2,DvtChartAxisUtils.isGridPolygonal(a)?(a=DvtPolygonUtils.getRegularPolygonPoints(e,c,DvtChartDataUtils.getGroupCount(a),a.getRadius(),0),b.addPolygon(a)):b.addCircle(e,c,a.getRadius())):DvtChartTypeUtils.isHorizontal(a)?b.addRect(c.x-e,c.y,c.w+2*e,c.h):b.addRect(c.x,c.y-
e,c.w,c.h+2*e);d.setClipPath(b);return d};DvtPlotAreaRenderer.polarToCartesian=function(a,b,c){var d=c.x+c.w/2+a*Math.sin(b);a=c.y+c.h/2-a*Math.cos(b);return new DvtPoint(d,a)};DvtPlotAreaRenderer.convertAxisCoord=function(a,b,c){return DvtChartTypeUtils.isPolar(a)?(a=DvtPlotAreaRenderer.polarToCartesian(b.y,b.x,c),new DvtPoint(a.x,a.y)):DvtChartTypeUtils.isHorizontal(a)?new DvtPoint(b.y,b.x):new DvtPoint(b.x,b.y)};
DvtPlotAreaRenderer._extendClipGroup=function(a){if(DvtChartTypeUtils.hasLineSeries(a)||DvtChartTypeUtils.hasLineWithAreaSeries(a)){var b=DvtChartStyleUtils.getLineWidth(a),c=function(a){var c=a.getInfo();a=c.getCoordAt(c.getGlobalMax());var g=c.getCoordAt(c.getDataMax()),h=c.getCoordAt(c.getGlobalMin()),c=c.getCoordAt(c.getDataMin());return null!=a&&null!=g&&g-a<=b/2||null!=h&&null!=c&&h-c<=b/2?!0:!1};if(a.yAxis&&c(a.yAxis)||a.y2Axis&&c(a.y2Axis))return Math.ceil(b/2)}return 0};
var DvtFunnelRenderer={};DvtObj.createSubclass(DvtFunnelRenderer,DvtObj,"DvtFunnelRenderer");DvtFunnelRenderer._DEFAULT_3D_GAP_RATIO=1/36;DvtFunnelRenderer._DEFAULT_2D_GAP_RATIO=1/70;DvtFunnelRenderer._MAX_WIDTH_FOR_GAPS=.25;DvtFunnelRenderer._GROUP_INDEX=0;
DvtFunnelRenderer.render=function(a,b,c){var d=new DvtContainer(a.getCtx());d.setTranslate(c.x,c.y);b.addChild(d);a.setPlotArea(d);var e;if("horizontal"==a.getOptions().orientation)e=new DvtRectangle(0,0,c.w,c.h);else{var g=new DvtMatrix;e=DvtAgent.isRightToLeft(a.getCtx())?-1:1;g.translate(-c.h/2,-c.w/2);g.rotate(e*Math.PI/2);g.translate(c.x+c.w/2,c.y+c.h/2);e=new DvtRectangle(0,0,c.h,c.w);d.setMatrix(g)}DvtFunnelRenderer._renderFunnelSlices(a,d,e)||DvtChartRenderer.renderEmptyText(a,b,c);b=DvtChartDataUtils.getInitialSelection(a);
DvtChartEventUtils.setInitialSelection(a,b);a.highlight(DvtChartStyleUtils.getHighlightedCategories(a))};
DvtFunnelRenderer._renderFunnelSlices=function(a,b,c){for(var d=a.getOptions(),e=DvtChartDataUtils.getSeriesCount(a),g=DvtChartStyleUtils.getDataItemGaps(a),d=Math.min(DvtFunnelRenderer._MAX_WIDTH_FOR_GAPS*c.w/(e-1),("on"==d.styleDefaults.threeDEffect?DvtFunnelRenderer._DEFAULT_3D_GAP_RATIO:DvtFunnelRenderer._DEFAULT_2D_GAP_RATIO)*c.w),g=g*d,h=d=0,k=0,m=0;m<e;m++)if(DvtChartStyleUtils.isDataItemRendered(a,m)){var n=DvtChartDataUtils.getTargetValue(a,m);null==n&&(n=DvtChartDataUtils.getValue(a,m,DvtFunnelRenderer._GROUP_INDEX));
0>=n||(d+=n)}if(0==d)return!1;for(m=e-1;0<=m;m--)DvtChartStyleUtils.isDataItemRendered(a,m)&&(n=DvtChartDataUtils.getValue(a,m,DvtFunnelRenderer._GROUP_INDEX),e=DvtChartDataUtils.getTargetValue(a,m),0>=n&&null==e||null!=e&&0>=e||(null!=e?(k+=e/d,e=new DvtFunnelSlice(a,m,h,c.w,c.h,1-k,e/d,n/e,g)):(k+=n/d,e=new DvtFunnelSlice(a,m,h,c.w,c.h,1-k,n/d,null,g)),h++,b.addChild(e),DvtChartObjPeer.associate(e,a,m,DvtFunnelRenderer._GROUP_INDEX)));return!0};var DvtRefObjRenderer={};
DvtObj.createSubclass(DvtRefObjRenderer,DvtObj,"DvtRefObjRenderer");DvtRefObjRenderer.renderBackgroundObjects=function(a,b,c){DvtRefObjRenderer._renderObjects(a,b,c,"back")};DvtRefObjRenderer.renderForegroundObjects=function(a,b,c){DvtRefObjRenderer._renderObjects(a,b,c,"front")};
DvtRefObjRenderer._renderObjects=function(a,b,c,d){DvtRefObjRenderer._renderObjectsForAxis(a,b,c,d,a.xAxis,DvtChartRefObjUtils.getAxisRefObjs(a,"x"));DvtRefObjRenderer._renderObjectsForAxis(a,b,c,d,a.yAxis,DvtChartRefObjUtils.getAxisRefObjs(a,"y"));DvtRefObjRenderer._renderObjectsForAxis(a,b,c,d,a.y2Axis,DvtChartRefObjUtils.getAxisRefObjs(a,"y2"))};
DvtRefObjRenderer._renderObjectsForAxis=function(a,b,c,d,e,g){if(g&&e)for(var h=0;h<g.length;h++){var k=g[h];if(DvtChartRefObjUtils.isObjectRendered(k)&&k&&DvtChartRefObjUtils.getLocation(k)==d){var m,n=DvtChartRefObjUtils.getType(k);"area"==n?m=DvtRefObjRenderer._createReferenceArea(k,a,c,e):"line"==n&&(m=DvtRefObjRenderer._createReferenceLine(k,a,c,e));null!=m&&(k=new DvtRefObjPeer(a,[m],k,h,e==a.xAxis?"xAxis":e==a.yAxis?"yAxis":"y2Axis"),a.registerObject(k),a.__getEventManager().associate(m,k),
b.addChild(m))}}};
DvtRefObjRenderer._createReferenceArea=function(a,b,c,d){var e=b.getCtx(),g=d.getPosition(),h="top"==g||"bottom"==g,k="radial"==g,g=DvtChartRefObjUtils.getColor(a),m=DvtChartRefObjUtils.getLineType(a);if(null!=a.items&&d==b.yAxis){e=a.items;k=[];h=[];if(b.xAxis.isGroupAxis())for(;e.length<DvtChartDataUtils.getGroupCount(b);)e.push(null);for(a=0;a<e.length;a++){var n=e[a],t=DvtChartRefObjUtils.getLowValue(n),n=DvtChartRefObjUtils.getHighValue(n);if(null==t||null==n)k.push(new DvtChartCoord),h.push(new DvtChartCoord);
else{var t=d.getUnboundedCoordAt(t),n=d.getUnboundedCoordAt(n),u=b.xAxis.getUnboundedCoordAt(DvtChartRefObjUtils.getXValue(b,e,a));k.push(new DvtChartCoord(u,n,n));h.push(new DvtChartCoord(u,t,t))}}c=new DvtChartLineArea(b,!0,c,null,new DvtSolidFill(g),null,m,k,m,h)}else{m=DvtChartRefObjUtils.getLowValue(a);a=DvtChartRefObjUtils.getHighValue(a);if(null==m||-Infinity==m)m=d.getInfo().getGlobalMin();if(null==a||Infinity==a)a=d.getInfo().getGlobalMax();m=DvtRefObjRenderer._getAxisCoord(b,d,m);d=DvtRefObjRenderer._getAxisCoord(b,
d,a);DvtChartTypeUtils.isPolar(b)?(h=c.x+c.w/2,a=c.y+c.h/2,k?DvtChartAxisUtils.isGridPolygonal(b)?(c=DvtChartDataUtils.getGroupCount(b),b=DvtPolygonUtils.getRegularPolygonPoints(h,a,c,d,0,1),c=DvtPolygonUtils.getRegularPolygonPoints(h,a,c,m,0,0),c=DvtPathUtils.polyline(b)+DvtPathUtils.polyline(c)+DvtPathUtils.closePath()):c=DvtPathUtils.moveTo(h,a-d)+DvtPathUtils.arcTo(d,d,Math.PI,1,h,a+d)+DvtPathUtils.arcTo(d,d,Math.PI,1,h,a-d)+DvtPathUtils.moveTo(h,a-m)+DvtPathUtils.arcTo(m,m,Math.PI,0,h,a+m)+DvtPathUtils.arcTo(m,
m,Math.PI,0,h,a-m)+DvtPathUtils.closePath():(b=b.getRadius(),k=DvtPlotAreaRenderer.polarToCartesian(b,m,c),c=DvtPlotAreaRenderer.polarToCartesian(b,d,c),c=DvtPathUtils.moveTo(h,a)+DvtPathUtils.lineTo(k.x,k.y)+DvtPathUtils.arcTo(b,b,d-m,DvtAgent.isRightToLeft(e)?0:1,c.x,c.y)+DvtPathUtils.lineTo(c.x,c.y)+DvtPathUtils.closePath()),c=new DvtPath(e,c)):c=new DvtPolygon(e,h?[m,0,d,0,d,c.h,m,c.h]:[0,m,0,d,c.w,d,c.w,m]);c.setSolidFill(g)}return c};
DvtRefObjRenderer._createReferenceLine=function(a,b,c,d){var e=d.getPosition(),g="top"==e||"bottom"==e,h="radial"==e,k="tangential"==e,e=DvtChartRefObjUtils.getLineWidth(a),m=DvtChartRefObjUtils.getLineType(a),n=DvtChartRefObjUtils.getColor(a),e=new DvtSolidStroke(n,1,e);a.lineStyle&&e.setStyle(DvtStroke.convertTypeString(a.lineStyle));n=b.getCtx();if(null!=a.items&&d==b.yAxis){g=a.items;h=[];[].push(h);if(b.xAxis.isGroupAxis())for(;g.length<DvtChartDataUtils.getGroupCount(b);)g.push(null);h=[];for(k=
0;k<g.length;k++)n=g[k],a=null,null!=n&&(isNaN(n)?null!=n.value&&(a=n.value):a=n),null==a?h.push(new DvtChartCoord):(n=d.getUnboundedCoordAt(a),a=b.xAxis.getUnboundedCoordAt(DvtChartRefObjUtils.getXValue(b,g,k)),h.push(new DvtChartCoord(a,n,n)));b=new DvtChartLineArea(b,!1,c,null,null,e,m,h)}else if(a.value){a=DvtRefObjRenderer._getAxisCoord(b,d,a.value);if(null==a||Infinity==a||-Infinity==a)return null;d=c.x+c.w/2;m=c.y+c.h/2;h?(DvtChartAxisUtils.isGridPolygonal(b)?(h=DvtPolygonUtils.getRegularPolygonPoints(d,
m,DvtChartDataUtils.getGroupCount(b),a,0),b=new DvtPolygon(n,h)):b=new DvtCircle(n,d,m,a),b.setFill(null)):k?(b=DvtPlotAreaRenderer.polarToCartesian(b.getRadius(),a,c),b=new DvtLine(n,d,m,b.x,b.y)):(b=g?new DvtLine(n,a,0,a,c.h):new DvtLine(n,0,a,c.w,a),b.setPixelHinting(!0));b.setStroke(e)}else return null;return b};DvtRefObjRenderer._getAxisCoord=function(a,b,c){return b.isGroupAxis()&&(a=DvtChartDataUtils.getGroupIndex(a,c),0<=a)?b.getUnboundedCoordAt(a):isNaN(c)?null:b.getUnboundedCoordAt(c)};
var DvtSparkChart=function(){};DvtObj.createSubclass(DvtSparkChart,DvtBaseComponent,"DvtSparkChart");DvtSparkChart.newInstance=function(a,b,c){var d=new DvtSparkChart;d.Init(a,b,c);return d};DvtSparkChart.getDefaults=function(a){return(new DvtSparkChartDefaults).getDefaults(a)};
DvtSparkChart.prototype.Init=function(a,b,c){DvtSparkChart.superclass.Init.call(this,a,b,c);this.Defaults=new DvtSparkChartDefaults;this._eventManager=new DvtSparkChartEventManager(this);this._eventManager.addListeners(this);this._chart=DvtChart.newInstance(a);this.addChild(this._chart);DvtAgent.isTouchDevice()||this._eventManager.setKeyboardHandler(new DvtKeyboardHandler(this._eventManager,this));this._tooltipMask=new DvtRect(a);this.addChild(this._tooltipMask);this.setId("sparkChart1000"+Math.floor(1E9*
Math.random()))};DvtSparkChart.prototype.SetOptions=function(a){a?(this.Options=this.Defaults.calcOptions(a),DvtAgent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults())};DvtSparkChart.prototype.setId=function(a){DvtSparkChart.superclass.setId.call(this,a);this._chart&&this._chart.setId(a+"chart")};
DvtSparkChart.prototype.render=function(a,b,c){this.SetOptions(a);isNaN(b)||isNaN(c)||(this.Width=b,this.Height=c);DvtSparkChartRenderer.render(this,this.Width,this.Height);a=this.Options.shortDesc;this._tooltipMask.setWidth(this.Width);this._tooltipMask.setHeight(this.Height);this._tooltipMask.setInvisibleFill();a?(this._peer=new DvtSimpleObjPeer(null,a,this.Options.color),this._eventManager.associate(this._tooltipMask,this._peer)):this._peer=null;this.Options._selectingCursor&&this.setCursor(DvtSelectionEffectUtils.getSelectingCursor());
this.UpdateAriaAttributes()};DvtSparkChart.prototype.__getChart=function(){return this._chart};DvtSparkChart.prototype.getAutomation=function(){return new DvtSparkChartAutomation(this)};DvtSparkChart.prototype.GetComponentDescription=function(){return DvtBundle.getTranslation(this.getOptions(),"componentName",DvtBundle.UTIL_PREFIX,"CHART")};
DvtSparkChart.prototype.UpdateAriaAttributes=function(){var a=DvtDisplayable.generateAriaLabel(DvtStringUtils.processAriaLabel(this.GetComponentDescription()),this.Options.shortDesc?[this.Options.shortDesc]:null);this.IsParentRoot()?(this.getCtx().setAriaRole("img"),this.getCtx().setAriaLabel(DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"COLON_SEP_LIST",[DvtBundle.getTranslatedString(DvtBundle.UTIL_PREFIX,"DATA_VISUALIZATION"),a]))):(this.setAriaRole("img"),this.setAriaProperty("label",a))};
DvtSparkChart.prototype.__getEventManager=function(){return this._eventManager};DvtSparkChart.prototype.__getLogicalObject=function(){return this._peer};var DvtSparkChartAutomation=function(a){this._sparkChart=a};DvtObj.createSubclass(DvtSparkChartAutomation,DvtAutomation,"DvtSparkChartAutomation");
DvtSparkChartAutomation.prototype.getDataItem=function(a){return(a=this._sparkChart.__getChart().getAutomation().getDataItem(0,a))?{borderColor:a.borderColor,color:a.color,date:a.x,low:a.low,high:a.high,value:null==a.low||null==a.high?a.value:a.high-a.low}:null};var DvtSparkChartDefaults=function(){this.Init({skyros:DvtSparkChartDefaults.VERSION_1,alta:DvtSparkChartDefaults.SKIN_ALTA})};DvtObj.createSubclass(DvtSparkChartDefaults,DvtBaseComponentDefaults,"DvtSparkChartDefaults");
DvtSparkChartDefaults.SKIN_ALTA={skin:DvtCSSStyle.SKIN_ALTA,color:"#267db3"};DvtSparkChartDefaults.VERSION_1={skin:DvtCSSStyle.SKIN_SKYROS,type:"line",animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,color:"#666699",firstColor:null,lastColor:null,highColor:null,lowColor:null,visualEffects:"auto",baselineScaling:"min",barSpacing:"auto",lineWidth:1,lineStyle:"solid",lineType:"straight",markerSize:5,markerShape:"auto",barGapRatio:.25,_statusMessageStyle:new DvtCSSStyle("font-size: 12px; color: #404259;")};
var DvtSparkChartEventManager=function(a){this.Init(a.getCtx(),a.__dispatchEvent,a);this._sparkChart=a};DvtObj.createSubclass(DvtSparkChartEventManager,DvtEventManager,"DvtSparkChartEventManager");DvtSparkChartEventManager.prototype.ProcessKeyboardEvent=function(a){if(!this.KeyboardHandler)return!1;if(a.keyCode==DvtKeyboardEvent.TAB){var b=this._sparkChart.getCtx().getStageAbsolutePosition();this.ProcessObjectTooltip(a,b.x,b.y,this._sparkChart.__getLogicalObject(),this._sparkChart)}return!1};
DvtSparkChartEventManager.prototype.OnBlur=function(a){DvtSparkChartEventManager.superclass.OnBlur.call(this,a);this.hideTooltip()};var DvtSparkChartRenderer={};DvtObj.createSubclass(DvtSparkChartRenderer,DvtObj,"DvtSparkChartRenderer");
DvtSparkChartRenderer.render=function(a,b,c){var d=a.__getChart(),e=DvtSparkChartRenderer._convertOptionsObj(a),g=a.getOptions();if("area"==g.type||"line"==g.type||"lineWithArea"==g.type){a=DvtSparkChartRenderer._getDataItems(a);var h=!1;if(g.firstColor||g.lastColor||g.highColor||g.lowColor)h=!0;else for(var k=0;k<a.length;k++)if(a[k]&&"on"==a[k].markerDisplayed){h=!0;break}if(h&&0<a.length||"none"==g.lineType)g=g.markerSize/2,b-=2*g,c-=2*g,d.setTranslate(g,g)}d.render(e,b,c)};
DvtSparkChartRenderer._getDataItems=function(a){return(a=a.getOptions())&&a.items?a.items:[]};
DvtSparkChartRenderer._convertOptionsObj=function(a){var b=a.getOptions(),c={styleDefaults:{},xAxis:{},yAxis:{},groups:[]};c.translations=b.translations;var d="floatingBar"==b.type,e=[],g=-1,h=-1,k=-Infinity,m=Infinity;a=DvtSparkChartRenderer._getDataItems(a);for(var n=0;n<a.length;n++){var t=a[n],u={};t instanceof Object?(d?(u.low=t.floatValue,u.high=t.floatValue+t.value):(u.value=t.value,u.low=t.low,u.high=t.high),t.date&&(c.timeAxisType="enabled",c.groups.push(t.date)),"on"==t.markerDisplayed&&
(u.markerDisplayed="on"),t.color&&(u.color=t.color),t.borderColor&&(u.borderColor=t.borderColor),t.markerShape&&(u.markerShape=t.markerShape),t.markerSize&&(u.markerSize=t.markerSize)):u.value=t;e.push(u);t=null!=u.value?u.value:Math.max(u.low,u.high);k<t&&(k=t,g=n);u=null!=u.value?u.value:Math.min(u.low,u.high);m>u&&(m=u,h=n)}b.highColor&&0<=g&&(e[g].markerDisplayed="on",e[g].color||(e[g].color=b.highColor));b.lowColor&&0<=h&&(e[h].markerDisplayed="on",e[h].color||(e[h].color=b.lowColor));b.firstColor&&
0<e.length&&(e[0].markerDisplayed="on",e[0].color||(e[0].color=b.firstColor));b.lastColor&&0<e.length&&(e[e.length-1].markerDisplayed="on",e[e.length-1].color||(e[e.length-1].color=b.lastColor));c.series=[{items:e,areaColor:b.areaColor}];b.referenceObjects&&(c.yAxis.referenceObjects=b.referenceObjects);c.__spark=!0;e=b.barSpacing;"auto"==e&&(e=1<DvtAgent.getDevicePixelRatio()?"subpixel":"pixel");c.__sparkBarSpacing=e;c.type=d?"bar":b.type;c.animationOnDataChange=b.animationOnDataChange;c.animationOnDisplay=
b.animationOnDisplay;c.emptyText=b.emptyText;c.styleDefaults.colors=[b.color];c.styleDefaults.animationDuration=b.animationDuration;c.styleDefaults.animationIndicators="none";c.styleDefaults.lineWidth=b.lineWidth;c.styleDefaults.lineStyle=b.lineStyle;c.styleDefaults.lineType=b.lineType;c.styleDefaults.markerSize=b.markerSize;c.styleDefaults.markerShape=b.markerShape;c.styleDefaults.barGapRatio=b.barGapRatio;c.styleDefaults.dataItemGaps="0%";c.xAxis.rendered="off";c.yAxis.rendered="off";d="zero"==
b.baselineScaling;e=k!=m?.1*(k-m):.1*Math.abs(k);c.yAxis.min=d&&0<=m?0:m-e;c.yAxis.max=d&&0>=k?0:k+e;c.styleDefaults.seriesEffect="none"==b.visualEffects||"area"!=b.type&&"lineWithArea"!=b.type?"color":"gradient";c.layout={gapWidthRatio:0,gapHeightRatio:0};c.legend={rendered:"off"};c._statusMessageStyle=b._statusMessageStyle;return c};